import{S as t,i as l,s as e,e as s,t as n,a,c as i,b as c,d as r,f as o,g as u,h,j as d,k as f,l as v,n as m,m as g,o as p,p as x,D as E,q as w,r as b,w as $,u as y,v as T,x as I,y as A,H as N,z as L,A as O,B as S,C as B,F as k,E as U,G as _,I as M,J as P,K as V,L as C,M as D,N as G,O as R,P as j,Q as F,R as q,T as z,U as H,V as W,W as Y,X,Y as K,Z as Q,_ as J,$ as Z,a0 as tt,a1 as lt,a2 as et,a3 as st,a4 as nt,a5 as at,a6 as it,a7 as ct,a8 as rt,a9 as ot,aa as ut,ab as ht,ac as dt,ad as ft,ae as vt,af as mt,ag as gt,ah as pt,ai as xt,aj as Et,ak as wt,al as bt,am as $t,an as yt}from"./vendor.5bb6c08f.js";var Tt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),It="/assets/tippy.ac9e6991.png";function At(t){let l,e;return{c(){l=s("img"),this.h()},l(t){l=i(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){h(l,"class","hidden"),l.src!==(e=It)&&h(l,"src","/assets/tippy.ac9e6991.png"),h(l,"alt","tippy-hidden")},m(t,e){d(t,l,e)},p:m,i:m,o:m,d(t){t&&o(l)}}}function Nt(t){let l,e,n;return{c(){l=s("img"),this.h()},l(t){l=i(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){h(l,"class","self-center w-40 h-32"),l.src!==(e=It)&&h(l,"src","/assets/tippy.ac9e6991.png"),h(l,"alt","tippy")},m(t,e){d(t,l,e)},p:m,i(e){n||w((()=>{n=b(l,t[1],{}),n.start()}))},o:m,d(t){t&&o(l)}}}function Lt(t){let l,e,g,p,x,E,w,b,$,y,T,I,A,N;function L(t,l){return t[0]?Nt:At}let O=L(t),S=O(t);return{c(){l=s("nav"),e=s("p"),g=n("chino"),p=a(),x=s("a"),E=s("i"),w=a(),b=s("div"),$=a(),S.c(),y=a(),T=s("div"),I=a(),A=s("p"),N=n("Brewing the coffee.."),this.h()},l(t){l=i(t,"NAV",{class:!0});var s=c(l);e=i(s,"P",{class:!0});var n=c(e);g=r(n,"chino"),n.forEach(o),p=u(s),x=i(s,"A",{href:!0});var a=c(x);E=i(a,"I",{class:!0}),c(E).forEach(o),a.forEach(o),s.forEach(o),w=u(t),b=i(t,"DIV",{class:!0}),c(b).forEach(o),$=u(t),S.l(t),y=u(t),T=i(t,"DIV",{class:!0}),c(T).forEach(o),I=u(t),A=i(t,"P",{class:!0});var h=c(A);N=r(h,"Brewing the coffee.."),h.forEach(o),this.h()},h(){h(e,"class","flex-1 text-5xl font-light"),h(E,"class","ri-github-fill text-5xl"),h(x,"href","https://github.com/the-rabbit-house/chino"),h(l,"class","px-6 pt-2 h-20 flex flex-row items-center"),h(b,"class","flex-1"),h(T,"class","flex-1"),h(A,"class","pb-6 text-2xl font-light text-center")},m(t,s){d(t,l,s),f(l,e),f(e,g),f(l,p),f(l,x),f(x,E),d(t,w,s),d(t,b,s),d(t,$,s),S.m(t,s),d(t,y,s),d(t,T,s),d(t,I,s),d(t,A,s),f(A,N)},p(t,[l]){O===(O=L(t))&&S?S.p(t,l):(S.d(1),S=O(t),S&&(S.c(),v(S,1),S.m(y.parentNode,y)))},i(t){v(S)},o:m,d(t){t&&o(l),t&&o(w),t&&o(b),t&&o($),S.d(t),t&&o(y),t&&o(T),t&&o(I),t&&o(A)}}}function Ot(t,l,e){const{navigate:s}=g("navigator");g("events");var n=!1;return p((async()=>{e(0,n=!0);const t=await E.getInfo();if("android"===(null==t?void 0:t.operatingSystem)){document.querySelector("meta[name=viewport]").setAttribute("content",`width=device-width, height=${window.innerHeight}, initial-scale=1.0, user-scalable=0`)}setTimeout((()=>s("Gallery")),1500)})),[n,function(t,l){return{delay:0,duration:1500,easing:x,css:(t,l)=>`transform: rotate(${360*t}deg);`}}]}const St={backend:"danbooru",limit:20,throttle:1,galleryCols:3,galleryImageSize:"BASE",swipeDistance:.2},Bt=y("settings",St),kt={tags:$([]),images:$([])},Ut=$([]),_t=$(null),Mt=$([]),Pt=function(t){return T(Bt,(l=>I(St[t],null==l?void 0:l[t])))},Vt=function(t,l){A(Bt)[t]=l,Bt.set(A(Bt))};function Ct(t){const l=[];for(const e of t){if(!(null==e?void 0:e.file_url))continue;const t={id:null==e?void 0:e.md5,file_name:(null==e?void 0:e.md5)+"."+(null==e?void 0:e.file_ext)||"",source:null==e?void 0:e.source,artist:null==e?void 0:e.tag_string_artist,thumbnail_url:null==e?void 0:e.preview_file_url,file_url:null==e?void 0:e.file_url,width:null==e?void 0:e.image_width,height:null==e?void 0:e.image_height,tags:null==e?void 0:e.tag_string.split(" "),data:e};l.push(t)}return l}function Dt(t){const l=[];for(const e of t){if(!(null==e?void 0:e.file_url))continue;const t={id:null==e?void 0:e.hash,file_name:null==e?void 0:e.image,source:null==e?void 0:e.source,artist:null==e?void 0:e.owner,thumbnail_url:`https://img3.gelbooru.com/thumbnails/${null==e?void 0:e.directory}/thumbnail_${null==e?void 0:e.hash}.jpg`,file_url:null==e?void 0:e.file_url,width:null==e?void 0:e.width,height:null==e?void 0:e.height,tags:null==e?void 0:e.tags.split(" "),data:e};l.push(t)}return l}var Gt={danbooru:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"danbooru",PLATFORMS:["web","native"],fetchImages:async function(t,{page:l,limit:e}){try{return[!0,Ct((await N.request({method:"GET",url:"https://danbooru.donmai.us/posts.json?tags="+t.join("+")+"&page="+(l+1)+"&limit="+e})).data)]}catch(s){return[!1,[]]}}}),gelbooru:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"gelbooru",PLATFORMS:["native"],fetchImages:async function(t,{page:l,limit:e}){try{return[!0,Dt((await N.request({method:"GET",url:"https://gelbooru.com/index.php?page=dapi&s=post&q=index&json=1&tags="+t.join("+")+"&pid="+l+"&limit="+e})).data)]}catch(s){return[!1,[]]}}})};const Rt=$(!1),jt=$(0),Ft=$(!1),qt=Pt("limit"),zt=Pt("backend");function Ht(t){let l=A(Mt);l=L(O(t),A(Mt))?B([t],l):S(t,l),Mt.set(l)}const Wt={};function Yt(t){return(null==Wt?void 0:Wt[null==t?void 0:t.id])?Wt[t.id]:(null==Wt?void 0:Wt["thumbnail_"+(null==t?void 0:t.id)])?Wt["thumbnail_"+t.id]:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}const Xt={image:null},Kt=$([]),Qt=$([]);function Jt(t){Kt.set(B([t],A(Kt))),Qt.set(B([t],A(Qt)))}const Zt=T([Kt,Qt],(([t,l])=>[...t,...l])),tl=$([]);function ll(){var t;const l=I(1,null==(t=A(Bt))?void 0:t.throttle);if(A(tl).length>=l)return;if(A(Zt).length<1)return;const[e,...s]=A(Zt),[n,a,i=!1]=e;if(void 0!==L(O([n,i]),A(tl)))return void Jt(e);const c=i?"thumbnail_url":"file_url",r=i?"thumbnail_":"";if(!(null==Wt?void 0:Wt[r+(null==n?void 0:n.id)])){const t=[n,i];tl.set(S(t,A(tl))),async function(t,l,e){const s=await N.downloadFile({url:null==t?void 0:t[l],filePath:e+(null==t?void 0:t.file_name),fileDirectory:"CACHE",method:"GET"});let n=null;if(null==s?void 0:s.blob){const t=s.blob;n=URL.createObjectURL(t)}if(null==s?void 0:s.path){const t=await k.getUri({path:s.path});n=U.convertFileSrc(t.uri)}return n?(Wt[e+(null==t?void 0:t.id)]=n,n):null}(n,c,r).then((l=>{(i||Xt.image===n)&&document.body.contains(a)&&(a.src=Yt(n)),tl.set(B([t],A(tl)))}))}Jt(e)}function el(t,[l,e=!1]){return e&&(Xt.image=l),t.src=Yt(l),Kt.set([...A(Kt),[l,t,!0]]),e&&Qt.set([[l,t,!1],...A(Qt)]),{update([l,e=!1]){e&&(Xt.image=l),t.src=Yt(l),Kt.set([...A(Kt),[l,t,!0]]),e&&Qt.set([[l,t,!1],...A(Qt)])}}}Zt.subscribe(ll),tl.subscribe(ll);function sl(t){let l,e,v,m,g,p,x,E,$,y,T,I,A,N,L,O,S,B,k,U,R,j,F,q,z,H,W,Y,X,K,Q,J,Z,tt,lt,et,st,nt,at,it,ct,rt,ot,ut,ht,dt,ft,vt,mt,gt,pt,xt,Et,wt,bt,$t,yt,Tt,It,At,Nt,Lt,Ot,St,Bt,kt,Ut,_t,Mt,Pt,Vt,Ct,Dt,Gt,Rt,jt,Ft,qt,zt,Ht,Wt,Yt,Xt,Kt,Qt,Jt,Zt,tl,ll,el,sl,cl,rl,ol=t[2]?"SM":"SMALL",ul=t[2]?"LG":"LARGE";return w(t[13]),{c(){l=s("article"),e=s("section"),v=s("p"),m=n("Images "),g=s("br"),p=n("per page"),x=a(),E=s("button"),$=n("-"),y=a(),T=s("button"),I=n(t[3]),A=a(),N=s("button"),L=n("+"),O=a(),S=s("section"),B=s("p"),k=n("Load "),U=s("br"),R=n("limit"),j=a(),F=s("button"),q=n("-"),z=a(),H=s("button"),W=n(t[4]),Y=a(),X=s("button"),K=n("+"),Q=a(),J=s("section"),Z=s("sup"),tt=n("MOBILE ONLY"),lt=a(),et=s("p"),st=n("Grid"),nt=s("br"),at=n(" columns"),it=a(),ct=s("button"),rt=n("-"),ot=a(),ut=s("button"),ht=n(t[5]),dt=a(),ft=s("button"),vt=n("+"),mt=a(),gt=s("section"),pt=s("sup"),xt=n("MOBILE ONLY"),Et=a(),wt=s("p"),bt=n("Swipe "),$t=s("br"),yt=n("distance"),Tt=a(),It=s("button"),At=n("16.1%"),Lt=a(),Ot=s("button"),St=n("20%"),kt=a(),Ut=s("button"),_t=n("25%"),Pt=a(),Vt=s("section"),Ct=s("sup"),Dt=n("TABLET+ ONLY"),Gt=a(),Rt=s("p"),jt=n("Image size"),Ft=a(),qt=s("button"),zt=n(ol),Wt=a(),Yt=s("button"),Xt=n("BASE"),Qt=a(),Jt=s("button"),Zt=n(ul),this.h()},l(s){l=i(s,"ARTICLE",{class:!0});var n=c(l);e=i(n,"SECTION",{class:!0});var a=c(e);v=i(a,"P",{class:!0});var h=c(v);m=r(h,"Images "),g=i(h,"BR",{}),p=r(h,"per page"),h.forEach(o),x=u(a),E=i(a,"BUTTON",{class:!0});var d=c(E);$=r(d,"-"),d.forEach(o),y=u(a),T=i(a,"BUTTON",{class:!0,disabled:!0});var f=c(T);I=r(f,t[3]),f.forEach(o),A=u(a),N=i(a,"BUTTON",{class:!0});var w=c(N);L=r(w,"+"),w.forEach(o),a.forEach(o),O=u(n),S=i(n,"SECTION",{class:!0});var b=c(S);B=i(b,"P",{class:!0});var _=c(B);k=r(_,"Load "),U=i(_,"BR",{}),R=r(_,"limit"),_.forEach(o),j=u(b),F=i(b,"BUTTON",{class:!0});var M=c(F);q=r(M,"-"),M.forEach(o),z=u(b),H=i(b,"BUTTON",{class:!0,disabled:!0});var P=c(H);W=r(P,t[4]),P.forEach(o),Y=u(b),X=i(b,"BUTTON",{class:!0});var V=c(X);K=r(V,"+"),V.forEach(o),b.forEach(o),Q=u(n),J=i(n,"SECTION",{class:!0});var C=c(J);Z=i(C,"SUP",{class:!0});var D=c(Z);tt=r(D,"MOBILE ONLY"),D.forEach(o),lt=u(C),et=i(C,"P",{class:!0});var G=c(et);st=r(G,"Grid"),nt=i(G,"BR",{}),at=r(G," columns"),G.forEach(o),it=u(C),ct=i(C,"BUTTON",{class:!0});var Nt=c(ct);rt=r(Nt,"-"),Nt.forEach(o),ot=u(C),ut=i(C,"BUTTON",{class:!0,disabled:!0});var Bt=c(ut);ht=r(Bt,t[5]),Bt.forEach(o),dt=u(C),ft=i(C,"BUTTON",{class:!0});var Mt=c(ft);vt=r(Mt,"+"),Mt.forEach(o),C.forEach(o),mt=u(n),gt=i(n,"SECTION",{class:!0});var Ht=c(gt);pt=i(Ht,"SUP",{class:!0});var Kt=c(pt);xt=r(Kt,"MOBILE ONLY"),Kt.forEach(o),Et=u(Ht),wt=i(Ht,"P",{class:!0});var tl=c(wt);bt=r(tl,"Swipe "),$t=i(tl,"BR",{}),yt=r(tl,"distance"),tl.forEach(o),Tt=u(Ht),It=i(Ht,"BUTTON",{class:!0});var ll=c(It);At=r(ll,"16.1%"),ll.forEach(o),Lt=u(Ht),Ot=i(Ht,"BUTTON",{class:!0});var el=c(Ot);St=r(el,"20%"),el.forEach(o),kt=u(Ht),Ut=i(Ht,"BUTTON",{class:!0});var sl=c(Ut);_t=r(sl,"25%"),sl.forEach(o),Ht.forEach(o),Pt=u(n),Vt=i(n,"SECTION",{class:!0});var nl=c(Vt);Ct=i(nl,"SUP",{class:!0});var al=c(Ct);Dt=r(al,"TABLET+ ONLY"),al.forEach(o),Gt=u(nl),Rt=i(nl,"P",{class:!0});var il=c(Rt);jt=r(il,"Image size"),il.forEach(o),Ft=u(nl),qt=i(nl,"BUTTON",{class:!0});var cl=c(qt);zt=r(cl,ol),cl.forEach(o),Wt=u(nl),Yt=i(nl,"BUTTON",{class:!0});var rl=c(Yt);Xt=r(rl,"BASE"),rl.forEach(o),Qt=u(nl),Jt=i(nl,"BUTTON",{class:!0});var hl=c(Jt);Zt=r(hl,ul),hl.forEach(o),nl.forEach(o),n.forEach(o),this.h()},h(){h(v,"class","flex-1"),h(E,"class","w-14 md:w-16 mr-1 svelte-t7wigu"),h(T,"class","w-14 md:w-16 mr-1 svelte-t7wigu"),T.disabled=!0,h(N,"class","w-14 md:w-16 svelte-t7wigu"),h(e,"class","px-2 py-4 svelte-t7wigu"),h(B,"class","flex-1"),h(F,"class","w-14 md:w-16 mr-1 svelte-t7wigu"),h(H,"class","w-14 md:w-16 mr-1 svelte-t7wigu"),H.disabled=!0,h(X,"class","w-14 md:w-16 svelte-t7wigu"),h(S,"class","px-2 py-4 svelte-t7wigu"),h(Z,"class","svelte-t7wigu"),h(et,"class","flex-1"),h(ct,"class","w-14 md:w-16 mr-1 svelte-t7wigu"),h(ut,"class","w-14 md:w-16 mr-1 svelte-t7wigu"),ut.disabled=!0,h(ft,"class","w-14 md:w-16 svelte-t7wigu"),h(J,"class","relative px-2 py-4 pt-8 svelte-t7wigu"),h(pt,"class","svelte-t7wigu"),h(wt,"class","flex-1 text-wrap"),h(It,"class","mr-1 svelte-t7wigu"),h(Ot,"class","mr-1 svelte-t7wigu"),h(Ut,"class","svelte-t7wigu"),h(gt,"class","relative px-2 py-4 pt-8 svelte-t7wigu"),h(Ct,"class","svelte-t7wigu"),h(Rt,"class","flex-1 text-wrap"),h(qt,"class","mr-1 svelte-t7wigu"),h(Yt,"class","mr-1 svelte-t7wigu"),h(Jt,"class","svelte-t7wigu"),h(Vt,"class","relative px-2 py-4 pt-8 svelte-t7wigu"),h(l,"class","flex flex-col items-stretch overflow-y-auto svelte-t7wigu")},m(s,n){d(s,l,n),f(l,e),f(e,v),f(v,m),f(v,g),f(v,p),f(e,x),f(e,E),f(E,$),f(e,y),f(e,T),f(T,I),f(e,A),f(e,N),f(N,L),f(l,O),f(l,S),f(S,B),f(B,k),f(B,U),f(B,R),f(S,j),f(S,F),f(F,q),f(S,z),f(S,H),f(H,W),f(S,Y),f(S,X),f(X,K),f(l,Q),f(l,J),f(J,Z),f(Z,tt),f(J,lt),f(J,et),f(et,st),f(et,nt),f(et,at),f(J,it),f(J,ct),f(ct,rt),f(J,ot),f(J,ut),f(ut,ht),f(J,dt),f(J,ft),f(ft,vt),f(l,mt),f(l,gt),f(gt,pt),f(pt,xt),f(gt,Et),f(gt,wt),f(wt,bt),f(wt,$t),f(wt,yt),f(gt,Tt),f(gt,It),f(It,At),f(gt,Lt),f(gt,Ot),f(Ot,St),f(gt,kt),f(gt,Ut),f(Ut,_t),f(l,Pt),f(l,Vt),f(Vt,Ct),f(Ct,Dt),f(Vt,Gt),f(Vt,Rt),f(Rt,jt),f(Vt,Ft),f(Vt,qt),f(qt,zt),f(Vt,Wt),f(Vt,Yt),f(Yt,Xt),f(Vt,Qt),f(Vt,Jt),f(Jt,Zt),sl=!0,cl||(rl=[_(window,"resize",t[13]),_(E,"click",t[14]),_(N,"click",t[15]),_(F,"click",t[16]),_(X,"click",t[17]),_(ct,"click",t[18]),_(ft,"click",t[19]),M(Nt=il.call(null,It,.161===t[6])),_(It,"click",t[20]),M(Bt=il.call(null,Ot,.2===t[6])),_(Ot,"click",t[21]),M(Mt=il.call(null,Ut,.25===t[6])),_(Ut,"click",t[22]),M(Ht=il.call(null,qt,"SMALL"===t[7])),_(qt,"click",t[23]),M(Kt=il.call(null,Yt,"BASE"===t[7])),_(Yt,"click",t[24]),M(tl=il.call(null,Jt,"LARGE"===t[7])),_(Jt,"click",t[25])],cl=!0)},p(l,[e]){t=l,(!sl||8&e)&&P(I,t[3]),(!sl||16&e)&&P(W,t[4]),(!sl||32&e)&&P(ht,t[5]),Nt&&V(Nt.update)&&64&e&&Nt.update.call(null,.161===t[6]),Bt&&V(Bt.update)&&64&e&&Bt.update.call(null,.2===t[6]),Mt&&V(Mt.update)&&64&e&&Mt.update.call(null,.25===t[6]),(!sl||4&e)&&ol!==(ol=t[2]?"SM":"SMALL")&&P(zt,ol),Ht&&V(Ht.update)&&128&e&&Ht.update.call(null,"SMALL"===t[7]),Kt&&V(Kt.update)&&128&e&&Kt.update.call(null,"BASE"===t[7]),(!sl||4&e)&&ul!==(ul=t[2]?"LG":"LARGE")&&P(Zt,ul),tl&&V(tl.update)&&128&e&&tl.update.call(null,"LARGE"===t[7])},i(t){sl||(w((()=>{el&&el.end(1),ll||(ll=b(l,C,{delay:nl})),ll.start()})),sl=!0)},o(t){ll&&ll.invalidate(),el=D(l,C,{delay:0,duration:al}),sl=!1},d(t){t&&o(l),t&&el&&el.end(),cl=!1,G(rl)}}}const nl=200,al=100;function il(t,l){return t.classList.toggle("active-button",l),{update(l){t.classList.toggle("active-button",l)}}}function cl(t,l,e){let s,n,a,i,c,r;var o,u;const h=Pt("limit");R(t,h,(t=>e(3,n=t)));const d=Pt("throttle");R(t,d,(t=>e(4,a=t)));const f=Pt("galleryCols");R(t,f,(t=>e(5,i=t)));const v=Pt("galleryImageSize");R(t,v,(t=>e(7,r=t)));const m=Pt("swipeDistance");R(t,m,(t=>e(6,c=t)));return t.$$.update=()=>{1&t.$$.dirty&&e(2,s=u<=768)},[u,o,s,n,a,i,c,r,h,d,f,v,m,function(){e(1,o=window.innerHeight),e(0,u=window.innerWidth)},()=>{n>5&&Vt("limit",n-5)},()=>{n<95&&Vt("limit",n+5)},()=>{a>1&&Vt("throttle",a-1)},()=>{a<5&&Vt("throttle",a+1)},()=>{i>1&&Vt("galleryCols",j(i))},()=>{i<5&&Vt("galleryCols",F(i))},()=>Vt("swipeDistance",.161),()=>Vt("swipeDistance",.2),()=>Vt("swipeDistance",.25),()=>Vt("galleryImageSize","SMALL"),()=>Vt("galleryImageSize","BASE"),()=>Vt("galleryImageSize","LARGE")]}class rl extends t{constructor(t){super(),l(this,t,cl,sl,e,{})}}function ol(t,l,e){const s=t.slice();return s[16]=l[e],s}function ul(t){let l,e,v,m,g,p=t[3],x=[];for(let s=0;s<p.length;s+=1)x[s]=hl(ol(t,p,s));return{c(){l=s("section"),e=s("p"),v=n("Favorites"),m=a(),g=s("div");for(let t=0;t<x.length;t+=1)x[t].c();this.h()},l(t){l=i(t,"SECTION",{class:!0});var s=c(l);e=i(s,"P",{class:!0});var n=c(e);v=r(n,"Favorites"),n.forEach(o),m=u(s),g=i(s,"DIV",{id:!0,class:!0});var a=c(g);for(let l=0;l<x.length;l+=1)x[l].l(a);a.forEach(o),s.forEach(o),this.h()},h(){h(e,"class","text-4xl font-medium"),h(g,"id","favorites"),h(g,"class","flex flex-row flex-wrap svelte-i0idq1"),h(l,"class","svelte-i0idq1")},m(t,s){d(t,l,s),f(l,e),f(e,v),f(l,m),f(l,g);for(let l=0;l<x.length;l+=1)x[l].m(g,null)},p(t,l){if(392&l){let e;for(p=t[3],e=0;e<p.length;e+=1){const s=ol(t,p,e);x[e]?x[e].p(s,l):(x[e]=hl(s),x[e].c(),x[e].m(g,null))}for(;e<x.length;e+=1)x[e].d(1);x.length=p.length}},d(t){t&&o(l),H(x,t)}}}function hl(t){let l,e,v,m,g,p=t[16]+"";function x(){return t[9](t[16])}function E(){return t[10](t[16])}return{c(){l=s("button"),e=n(p),v=a(),this.h()},l(t){l=i(t,"BUTTON",{class:!0});var s=c(l);e=r(s,p),v=u(s),s.forEach(o),this.h()},h(){h(l,"class","select-none svelte-i0idq1")},m(t,s){d(t,l,s),f(l,e),f(l,v),m||(g=[M(pl.call(null,l)),M(xl.call(null,l)),_(l,"longpress",x),_(l,"click",E)],m=!0)},p(l,s){t=l,8&s&&p!==(p=t[16]+"")&&P(e,p)},d(t){t&&o(l),m=!1,G(g)}}}function dl(t){let l,e,m,g,p,x,E,$,y,T,I,A,N,L,O,S,B,k,U,R,j,F,H,J,Z,tt,lt=!q(t[3]),et=t[2]?"Searching...":"Search";m=new z({props:{tags:t[0],onlyUnique:!0,allowBlur:!0}});let st=lt&&ul(t);return{c(){l=s("main"),e=s("div"),W(m.$$.fragment),g=a(),p=s("div"),st&&st.c(),x=a(),E=s("div"),$=s("button"),y=n("SAFE"),I=a(),A=s("button"),N=n("UNSAFE"),O=a(),S=s("button"),B=n("EXPLICIT"),U=a(),R=s("button"),j=n(et),this.h()},l(t){l=i(t,"MAIN",{class:!0});var s=c(l);e=i(s,"DIV",{id:!0,class:!0});var n=c(e);Y(m.$$.fragment,n),n.forEach(o),g=u(s),p=i(s,"DIV",{class:!0});var a=c(p);st&&st.l(a),a.forEach(o),x=u(s),E=i(s,"DIV",{id:!0,class:!0});var h=c(E);$=i(h,"BUTTON",{class:!0});var d=c($);y=r(d,"SAFE"),d.forEach(o),I=u(h),A=i(h,"BUTTON",{class:!0});var f=c(A);N=r(f,"UNSAFE"),f.forEach(o),O=u(h),S=i(h,"BUTTON",{class:!0});var v=c(S);B=r(v,"EXPLICIT"),v.forEach(o),h.forEach(o),U=u(s),R=i(s,"BUTTON",{id:!0,class:!0});var w=c(R);j=r(w,et),w.forEach(o),s.forEach(o),this.h()},h(){h(e,"id","tags-input"),h(e,"class","svelte-i0idq1"),h(p,"class","flex-1 rounded overflow-y-auto"),h($,"class","svelte-i0idq1"),h(A,"class","svelte-i0idq1"),h(S,"class","svelte-i0idq1"),h(E,"id","rating-buttons"),h(E,"class","flex flex-row items-center justify-between svelte-i0idq1"),h(R,"id","search-button"),h(R,"class","py-2 text-4xl rounded-lg svelte-i0idq1"),h(l,"class","flex flex-col items-stretch space-y-2 svelte-i0idq1")},m(s,n){d(s,l,n),f(l,e),X(m,e,null),f(l,g),f(l,p),st&&st.m(p,null),f(l,x),f(l,E),f(E,$),f($,y),f(E,I),f(E,A),f(A,N),f(E,O),f(E,S),f(S,B),f(l,U),f(l,R),f(R,j),J=!0,Z||(tt=[M(T=El.call(null,$,"SAFE"===t[1])),_($,"click",t[11]),M(L=El.call(null,A,"UNSAFE"===t[1])),_(A,"click",t[12]),M(k=El.call(null,S,"EXPLICIT"===t[1])),_(S,"click",t[13]),_(R,"click",t[6])],Z=!0)},p(l,[e]){t=l;const s={};1&e&&(s.tags=t[0]),m.$set(s),8&e&&(lt=!q(t[3])),lt?st?st.p(t,e):(st=ul(t),st.c(),st.m(p,null)):st&&(st.d(1),st=null),T&&V(T.update)&&2&e&&T.update.call(null,"SAFE"===t[1]),L&&V(L.update)&&2&e&&L.update.call(null,"UNSAFE"===t[1]),k&&V(k.update)&&2&e&&k.update.call(null,"EXPLICIT"===t[1]),(!J||4&e)&&et!==(et=t[2]?"Searching...":"Search")&&P(j,et)},i(t){J||(v(m.$$.fragment,t),w((()=>{H&&H.end(1),F||(F=b(l,C,{delay:fl})),F.start()})),J=!0)},o(t){K(m.$$.fragment,t),F&&F.invalidate(),H=D(l,C,{delay:0,duration:vl}),J=!1},d(t){t&&o(l),Q(m),st&&st.d(),t&&H&&H.end(),Z=!1,G(tt)}}}const fl=200,vl=100,ml={SAFE:"rating:safe",UNSAFE:"rating:questionable",EXPLICIT:"rating:explicit"},gl=B(["","rating:safe","rating:questionable","rating:explicit"]);function pl(t,l=1500){function e(){const e=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),l),s=()=>{clearTimeout(e),t.removeEventListener("mousemove",s),t.removeEventListener("mouseup",s)};t.addEventListener("mousemove",s),t.addEventListener("mouseup",s)}function s(){const e=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),l),s=()=>{clearTimeout(e),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",s)};t.addEventListener("touchmove",s),t.addEventListener("touchend",s)}return t.addEventListener("mousedown",e),t.addEventListener("touchstart",s),{destroy(){t.removeEventListener("mousedown",e),t.removeEventListener("touchstart",s)}}}function xl(t){function l(t){return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1}return t.addEventListener("oncontextmenu",l),{destroy(){t.removeEventListener("oncontextmenu",l)}}}function El(t,l){return t.classList.toggle("active-button",l),{update(l){t.classList.toggle("active-button",l)}}}function wl(t,l,e){let s,n,a;R(t,Mt,(t=>e(14,s=t))),R(t,Rt,(t=>e(2,n=t)));const{tags:i}=kt;R(t,i,(t=>e(3,a=t)));const c=J();var r=gl(s),o="";function u(t){e(1,o=o!==t?t:"")}function h(t){Z(t,r)||e(0,r=S(t,r))}function d(t){Z(t,a)&&tt(i,a=B([t],a),a)}p((()=>{document.querySelector(".svelte-tags-input").focus()}));return[r,o,n,a,i,u,async function(){if(n)return;const t=o?null==ml?void 0:ml[o]:"";c("search",[...r,t])},h,d,t=>d(t),t=>h(t),()=>u("SAFE"),()=>u("UNSAFE"),()=>u("EXPLICIT")]}class bl extends t{constructor(t){super(),l(this,t,wl,dl,e,{})}}function $l(t,l,e){const s=t.slice();return s[4]=l[e][0],s[5]=l[e][1],s}function yl(t){let l,e,v,m,g,p,x,E,w,b,$,y,T,I,A,N,L,O,S,B,k,U,M=Il(t[5],t[0])?"AVAILABLE":"UNVAILABLE",V=t[4]+"",C=Il(t[5],"web")?"✓":"✗",D=Il(t[5],"native")?"✓":"✗";function G(){return t[2](t[4])}return{c(){l=s("button"),e=s("p"),v=n(M),m=a(),g=s("p"),p=n(V),x=a(),E=s("p"),w=n("Supported platforms:"),b=a(),$=s("div"),y=s("p"),T=n("WEB: "),I=n(C),A=a(),N=s("p"),L=n("NATIVE: "),O=n(D),S=a(),this.h()},l(t){l=i(t,"BUTTON",{"data-supported":!0,class:!0});var s=c(l);e=i(s,"P",{class:!0});var n=c(e);v=r(n,M),n.forEach(o),m=u(s),g=i(s,"P",{class:!0});var a=c(g);p=r(a,V),a.forEach(o),x=u(s),E=i(s,"P",{class:!0});var h=c(E);w=r(h,"Supported platforms:"),h.forEach(o),b=u(s),$=i(s,"DIV",{class:!0});var d=c($);y=i(d,"P",{});var f=c(y);T=r(f,"WEB: "),I=r(f,C),f.forEach(o),A=u(d),N=i(d,"P",{});var B=c(N);L=r(B,"NATIVE: "),O=r(B,D),B.forEach(o),d.forEach(o),S=u(s),s.forEach(o),this.h()},h(){h(e,"class","absolute top-0 right-0 pt-6 pr-6"),h(g,"class","pb-2 text-2xl"),h(E,"class","text-lg"),h($,"class","pt-1 flex flex-row space-x-4"),h(l,"data-supported",B=Il(t[5],t[0])),h(l,"class","svelte-119wbrv")},m(t,s){d(t,l,s),f(l,e),f(e,v),f(l,m),f(l,g),f(g,p),f(l,x),f(l,E),f(E,w),f(l,b),f(l,$),f($,y),f(y,T),f(y,I),f($,A),f($,N),f(N,L),f(N,O),f(l,S),k||(U=_(l,"click",G),k=!0)},p(e,s){t=e,1&s&&M!==(M=Il(t[5],t[0])?"AVAILABLE":"UNVAILABLE")&&P(v,M),1&s&&B!==(B=Il(t[5],t[0]))&&h(l,"data-supported",B)},d(t){t&&o(l),k=!1,U()}}}function Tl(t){let l,e,v,g,p,x=Object.entries(Gt),E=[];for(let s=0;s<x.length;s+=1)E[s]=yl($l(t,x,s));return{c(){l=s("main"),e=s("div");for(let t=0;t<E.length;t+=1)E[t].c();v=a(),g=s("button"),p=n("Help"),this.h()},l(t){l=i(t,"MAIN",{class:!0});var s=c(l);e=i(s,"DIV",{id:!0,class:!0});var n=c(e);for(let l=0;l<E.length;l+=1)E[l].l(n);n.forEach(o),v=u(s),g=i(s,"BUTTON",{class:!0});var a=c(g);p=r(a,"Help"),a.forEach(o),s.forEach(o),this.h()},h(){h(e,"id","backends"),h(e,"class","flex flex-col space-y-2 svelte-119wbrv"),h(g,"class","text-2xl svelte-119wbrv"),h(l,"class","flex flex-col svelte-119wbrv")},m(t,s){d(t,l,s),f(l,e);for(let l=0;l<E.length;l+=1)E[l].m(e,null);f(l,v),f(l,g),f(g,p)},p(t,[l]){if(3&l){let s;for(x=Object.entries(Gt),s=0;s<x.length;s+=1){const n=$l(t,x,s);E[s]?E[s].p(n,l):(E[s]=yl(n),E[s].c(),E[s].m(e,null))}for(;s<E.length;s+=1)E[s].d(1);E.length=x.length}},i:m,o:m,d(t){t&&o(l),H(E,t)}}}const Il=(t,l)=>Z(l,I([],null==t?void 0:t.PLATFORMS));function Al(t,l,e){const s=J();let n=null;function a(t){s("backendchange",t)}p((async()=>{"web"===(await E.getInfo()).platform?e(0,n="web"):e(0,n="native")}));return[n,a,t=>a(t)]}class Nl extends t{constructor(t){super(),l(this,t,Al,Tl,e,{})}}const Ll={tags:y("favorites:tags",[]),images:y("favorites:images",[])};function Ol(t){const l=A(Ll.tags);let e=l;e=L(O(t),l)?B([t],e):S(t,e),Ll.tags.set(e)}function Sl(t){const l=A(Ll.images);let e=l;const s=I(null,L(lt("id",t.id),l));e=s?B([s],e):S(t,e),console.log(e),Ll.images.set(e)}Ll.tags.subscribe((t=>kt.tags.set(t))),Ll.images.subscribe((t=>kt.images.set(t)));function Bl(t,l,e){const s=t.slice();return s[22]=l[e],s}function kl(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-fill text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function Ul(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-fill text-3xl text-yellow-300")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function _l(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-line text-4xl md:text-5xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function Ml(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function Pl(t){let l,e,v,m,g,p,x=t[3]?"":"Add";function E(){return t[19](t[22])}return{c(){l=s("button"),e=n(x),v=a(),m=s("i"),this.h()},l(t){l=i(t,"BUTTON",{class:!0});var s=c(l);e=r(s,x),v=u(s),m=i(s,"I",{class:!0}),c(m).forEach(o),s.forEach(o),this.h()},h(){h(m,"class","ri-add-line text-4xl md:text-5xl"),h(l,"class","icon-button svelte-1l3pgoh")},m(t,s){d(t,l,s),f(l,e),f(l,v),f(l,m),g||(p=_(l,"click",E),g=!0)},p(l,s){t=l,8&s&&x!==(x=t[3]?"":"Add")&&P(e,x)},d(t){t&&o(l),g=!1,p()}}}function Vl(t){let l,e,v,m,g,p,x=t[3]?"":"Remove";function E(){return t[18](t[22])}return{c(){l=s("button"),e=n(x),v=a(),m=s("i"),this.h()},l(t){l=i(t,"BUTTON",{class:!0});var s=c(l);e=r(s,x),v=u(s),m=i(s,"I",{class:!0}),c(m).forEach(o),s.forEach(o),this.h()},h(){h(m,"class","ri-subtract-line text-4xl md:text-5xl"),h(l,"class","icon-button svelte-1l3pgoh")},m(t,s){d(t,l,s),f(l,e),f(l,v),f(l,m),g||(p=_(l,"click",E),g=!0)},p(l,s){t=l,8&s&&x!==(x=t[3]?"":"Remove")&&P(e,x)},d(t){t&&o(l),g=!1,p()}}}function Cl(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-line text-4xl md:text-5xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function Dl(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function Gl(t){let l,e,v,m,g,p,x,E,w,b,$,y=t[22]+"";function T(t,l){return(null==g||48&l)&&(g=!!t[5](t[22])),g?Vl:Pl}let I=T(t,-1),A=I(t);function N(t,l){return(null==E||144&l)&&(E=!!t[7](t[22])),E?Dl:Cl}let L=N(t,-1),O=L(t);function S(){return t[20](t[22])}return{c(){l=s("div"),e=s("p"),v=n(y),m=a(),A.c(),p=a(),x=s("button"),O.c(),w=a(),this.h()},l(t){l=i(t,"DIV",{class:!0});var s=c(l);e=i(s,"P",{class:!0});var n=c(e);v=r(n,y),n.forEach(o),m=u(s),A.l(s),p=u(s),x=i(s,"BUTTON",{class:!0});var a=c(x);O.l(a),a.forEach(o),w=u(s),s.forEach(o),this.h()},h(){h(e,"class","truncate flex-1 md:text-lg font-light svelte-1l3pgoh"),h(x,"class","icon-button svelte-1l3pgoh"),h(l,"class","p-4 flex flex-row rounded-lg items-center svelte-1l3pgoh")},m(t,s){d(t,l,s),f(l,e),f(e,v),f(l,m),A.m(l,null),f(l,p),f(l,x),O.m(x,null),f(l,w),b||($=_(x,"click",S),b=!0)},p(e,s){t=e,16&s&&y!==(y=t[22]+"")&&P(v,y),I===(I=T(t,s))&&A?A.p(t,s):(A.d(1),A=I(t),A&&(A.c(),A.m(l,p))),L!==(L=N(t,s))&&(O.d(1),O=L(t),O&&(O.c(),O.m(x,null)))},d(t){t&&o(l),A.d(),O.d(),b=!1,$()}}}function Rl(t){let l,e,a,u;return{c(){l=s("button"),e=n("CLOSE"),this.h()},l(t){l=i(t,"BUTTON",{id:!0,class:!0});var s=c(l);e=r(s,"CLOSE"),s.forEach(o),this.h()},h(){h(l,"id","close-button"),h(l,"class","tracking-wider svelte-1l3pgoh")},m(s,n){d(s,l,n),f(l,e),a||(u=_(l,"click",t[21]),a=!0)},p:m,d(t){t&&o(l),a=!1,u()}}}function jl(t){var l;let e,v,g,p,x,E,b,$,y,T,I,A,N,L,O,S,B,k,U,M,V,C,D,R,j,F,q,z,W,Y,X,K=(null==(l=t[2])?void 0:l.artist)+"";function Q(t,l){return t[6]?Ul:kl}w(t[15]);let J=Q(t),Z=J(t);function tt(t,l){var e;return(null==F||132&l)&&(F=!!t[7](null==(e=t[2])?void 0:e.artist)),F?Ml:_l}let lt=tt(t,-1),et=lt(t),st=t[4],nt=[];for(let s=0;s<st.length;s+=1)nt[s]=Gl(Bl(t,st,s));let at=t[0]&&Rl(t);return{c(){e=s("article"),v=s("div"),g=s("button"),Z.c(),p=a(),x=s("a"),E=s("i"),y=a(),T=s("button"),I=s("i"),A=a(),N=s("a"),L=s("i"),S=a(),B=s("section"),k=s("div"),U=s("p"),M=n("Artist:"),V=a(),C=s("p"),D=n(K),R=a(),j=s("button"),et.c(),q=a(),z=s("div");for(let t=0;t<nt.length;t+=1)nt[t].c();W=a(),at&&at.c(),this.h()},l(t){e=i(t,"ARTICLE",{class:!0});var l=c(e);v=i(l,"DIV",{class:!0});var s=c(v);g=i(s,"BUTTON",{class:!0});var n=c(g);Z.l(n),n.forEach(o),p=u(s),x=i(s,"A",{class:!0,href:!0,download:!0});var a=c(x);E=i(a,"I",{class:!0}),c(E).forEach(o),a.forEach(o),y=u(s),T=i(s,"BUTTON",{class:!0});var h=c(T);I=i(h,"I",{class:!0}),c(I).forEach(o),h.forEach(o),A=u(s),N=i(s,"A",{class:!0,href:!0,target:!0});var d=c(N);L=i(d,"I",{class:!0}),c(L).forEach(o),d.forEach(o),s.forEach(o),S=u(l),B=i(l,"SECTION",{class:!0});var f=c(B);k=i(f,"DIV",{class:!0});var m=c(k);U=i(m,"P",{class:!0});var w=c(U);M=r(w,"Artist:"),w.forEach(o),V=u(m),C=i(m,"P",{class:!0});var b=c(C);D=r(b,K),b.forEach(o),m.forEach(o),R=u(f),j=i(f,"BUTTON",{class:!0});var $=c(j);et.l($),$.forEach(o),f.forEach(o),q=u(l),z=i(l,"DIV",{id:!0,class:!0});var O=c(z);for(let e=0;e<nt.length;e+=1)nt[e].l(O);O.forEach(o),W=u(l),at&&at.l(l),l.forEach(o),this.h()},h(){var l,s;h(g,"class","icon-button svelte-1l3pgoh"),h(E,"class","ri-download-fill text-4xl"),h(x,"class","icon-button svelte-1l3pgoh"),h(x,"href",b=Yt(t[2])),h(x,"download",$=null==(l=t[2])?void 0:l.file_name),h(I,"class","ri-file-copy-fill text-4xl"),h(T,"class","icon-button svelte-1l3pgoh"),h(L,"class","ri-phone-find-line text-4xl"),h(N,"class","icon-button svelte-1l3pgoh"),h(N,"href",O=null==(s=t[2])?void 0:s.source),h(N,"target","_blank"),h(v,"class","p-2 flex flex-row justify-between space-x-4 svelte-1l3pgoh"),h(U,"class","text-lg"),h(C,"class","text-xl font-light"),h(k,"class","flex-1 flex flex-col"),h(j,"class","icon-button svelte-1l3pgoh"),h(B,"class","p-4 flex flex-row svelte-1l3pgoh"),h(z,"id","tags"),h(z,"class","flex flex-col svelte-1l3pgoh"),h(e,"class","flex flex-col space-y-2 svelte-1l3pgoh")},m(l,s){d(l,e,s),f(e,v),f(v,g),Z.m(g,null),f(v,p),f(v,x),f(x,E),f(v,y),f(v,T),f(T,I),f(v,A),f(v,N),f(N,L),f(e,S),f(e,B),f(B,k),f(k,U),f(U,M),f(k,V),f(k,C),f(C,D),f(B,R),f(B,j),et.m(j,null),f(e,q),f(e,z);for(let t=0;t<nt.length;t+=1)nt[t].m(z,null);f(e,W),at&&at.m(e,null),Y||(X=[_(window,"resize",t[15]),_(g,"click",t[16]),_(T,"click",t[11]),_(j,"click",t[17])],Y=!0)},p(t,[l]){var s,n,a;if(J!==(J=Q(t))&&(Z.d(1),Z=J(t),Z&&(Z.c(),Z.m(g,null))),4&l&&b!==(b=Yt(t[2]))&&h(x,"href",b),4&l&&$!==($=null==(s=t[2])?void 0:s.file_name)&&h(x,"download",$),4&l&&O!==(O=null==(n=t[2])?void 0:n.source)&&h(N,"href",O),4&l&&K!==(K=(null==(a=t[2])?void 0:a.artist)+"")&&P(D,K),lt!==(lt=tt(t,l))&&(et.d(1),et=lt(t),et&&(et.c(),et.m(j,null))),184&l){let e;for(st=t[4],e=0;e<st.length;e+=1){const s=Bl(t,st,e);nt[e]?nt[e].p(s,l):(nt[e]=Gl(s),nt[e].c(),nt[e].m(z,null))}for(;e<nt.length;e+=1)nt[e].d(1);nt.length=st.length}t[0]?at?at.p(t,l):(at=Rl(t),at.c(),at.m(e,null)):at&&(at.d(1),at=null)},i:m,o:m,d(t){t&&o(e),Z.d(),et.d(),H(nt,t),at&&at.d(),Y=!1,G(X)}}}function Fl(t,l,e){let s,n,a,i,c,r,o,u,h;R(t,_t,(t=>e(2,r=t))),R(t,Mt,(t=>e(12,o=t)));const{tags:d,images:f}=kt;R(t,d,(t=>e(14,h=t))),R(t,f,(t=>e(13,u=t)));const v=J();let{closable:m=!1}=l;var g;return t.$$set=t=>{"closable"in t&&e(0,m=t.closable)},t.$$.update=()=>{2&t.$$.dirty&&e(3,s=g<=768),4&t.$$.dirty&&e(4,n=I([],null==r?void 0:r.tags)),4096&t.$$.dirty&&e(5,a=t=>Z(t,o)),8196&t.$$.dirty&&e(6,i=void 0!==L(lt("id",r.id),u)),16384&t.$$.dirty&&e(7,c=t=>Z(t,h))},[m,g,r,s,n,a,i,c,d,f,v,function(){et.write({url:null==r?void 0:r.file_url})},o,u,h,function(){e(1,g=window.innerWidth)},()=>Sl(r),()=>Ol(null==r?void 0:r.artist),t=>Ht(t),t=>Ht(t),t=>Ol(t),()=>v("close")]}class ql extends t{constructor(t){super(),l(this,t,Fl,jl,e,{closable:0})}}const{window:zl}=ut;function Hl(t){let l,e,n,r,m,g,p,x,E,$,y,T,I,A,N,L,O,S,B;return w(t[18]),N=new ql({props:{closable:!0}}),N.$on("close",t[21]),{c(){l=s("div"),e=s("div"),n=s("img"),m=a(),g=s("img"),E=a(),$=s("img"),I=a(),A=s("div"),W(N.$$.fragment),this.h()},l(t){l=i(t,"DIV",{class:!0});var s=c(l);e=i(s,"DIV",{class:!0,style:!0});var a=c(e);n=i(a,"IMG",{class:!0,alt:!0,src:!0}),m=u(a),g=i(a,"IMG",{src:!0,alt:!0,class:!0}),E=u(a),$=i(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(o),s.forEach(o),I=u(t),A=i(t,"DIV",{id:!0,style:!0,class:!0});var r=c(A);Y(N.$$.fragment,r),r.forEach(o),this.h()},h(){h(n,"class","invisible svelte-16tpoxy"),h(n,"alt","previous"),n.src!==(r=Yt(t[6]))&&h(n,"src",r),g.src!==(p=Yt(t[0]))&&h(g,"src",p),h(g,"alt","current"),h(g,"class","svelte-16tpoxy"),h($,"class","invisible svelte-16tpoxy"),$.src!==(y=Yt(t[7]))&&h($,"src",y),h($,"alt","next"),h(e,"class","flex flex-row"),nt(e,"width","300vw"),nt(e,"transform","translate("+(-t[1]+t[8])+"px,"+t[9]+"px)"),nt(e,"will-change","transform"),h(l,"class","fixed top-0 left-0"),h(A,"id","info-container"),h(A,"style",L=t[4]?"":`transform:translateY(${t[5]+1.75*t[9]}px`),h(A,"class","svelte-16tpoxy")},m(s,a){d(s,l,a),f(l,e),f(e,n),f(e,m),f(e,g),t[19](g),f(e,E),f(e,$),t[20](e),d(s,I,a),d(s,A,a),X(N,A,null),O=!0,S||(B=[_(zl,"resize",t[18]),M(Jl.call(null,n)),M(x=el.call(null,g,[t[0],!0])),M(Jl.call(null,$)),M(t[13].call(null,l))],S=!0)},p(t,[l]){(!O||64&l&&n.src!==(r=Yt(t[6])))&&h(n,"src",r),(!O||1&l&&g.src!==(p=Yt(t[0])))&&h(g,"src",p),x&&V(x.update)&&1&l&&x.update.call(null,[t[0],!0]),(!O||128&l&&$.src!==(y=Yt(t[7])))&&h($,"src",y),(!O||770&l)&&nt(e,"transform","translate("+(-t[1]+t[8])+"px,"+t[9]+"px)"),(!O||560&l&&L!==(L=t[4]?"":`transform:translateY(${t[5]+1.75*t[9]}px`))&&h(A,"style",L)},i(t){O||(T||w((()=>{T=b(l,at,{y:1e3}),T.start()})),v(N.$$.fragment,t),O=!0)},o(t){K(N.$$.fragment,t),O=!1},d(e){e&&o(l),t[19](null),t[20](null),e&&o(I),e&&o(A),Q(N),S=!1,G(B)}}}const Wl=st(O(0),(()=>null)),Yl=t=>t>200&&t<315,Xl=t=>t>120&&t<200,Kl=t=>t>0&&t<60||t>315&&t<=360,Ql=t=>t>60&&t<120;function Jl(t){setTimeout((()=>{t.classList.remove("invisible")}),300)}function Zl(t,l,e){let s,n,a,i,c,r,o,u;R(t,Ut,(t=>e(15,r=t)));const h=J();let{image:d=null}=l;var f=0,v=0,m=null;const g=Pt("swipeDistance");R(t,g,(t=>e(14,c=t)));var p=null,x=null,E=null,w=!1;const b=$(null);R(t,b,(t=>e(16,o=t)));const y=ht(0,{duration:50});function T(){u>s&&("DOWN"===o&&tt(y,u=0,u),"UP"===o&&(tt(y,u=0,u),e(4,w=!0)),"LEFT"===o&&h("imagechange",E),"RIGHT"===o&&h("imagechange",x),h("swipe",o)),tt(b,o=null,o),tt(y,u=0,u)}R(t,y,(t=>e(17,u=t)));var A=null;return t.$$set=t=>{"image"in t&&e(0,d=t.image)},t.$$.update=()=>{if(16386&t.$$.dirty&&(s=I(120,Wl(v*c))),16386&t.$$.dirty&&(n=I(450,Wl(v*c*3))),32769&t.$$.dirty){const t=it(O(d))(r);e(6,x=r[ct(t-1,0)]),e(7,E=r[rt(t+1,ot(r))])}var l,h,f;196608&t.$$.dirty&&e(8,a="RIGHT"===o?u:"LEFT"===o?-u:0),196608&t.$$.dirty&&e(9,i="DOWN"===o?u:"UP"===o?-u:0),28&t.$$.dirty&&(l=p,h=m,f=w,A&&l&&(f?A.unbind(h,"pan"):(A.bind(h,"pan",(function(t){const l=t.detail.data[0].directionFromOrigin,e=t.detail.data[0].distanceFromOrigin;let s=null;Yl(l)?s="DOWN":Xl(l)?s="LEFT":Kl(l)?s="RIGHT":Ql(l)&&(s="UP"),s!==o?(tt(b,o=s,o),tt(y,u=0,u)):tt(y,u=e,u),e>n&&T()})),window.addEventListener("touchend",T))))},[d,v,m,p,w,f,x,E,a,i,g,b,y,function(t){if(t&&!A)return A=dt.Region(t),{destroy(){A.unbind(m,"pan"),window.removeEventListener("touchend",T),A=null}}},c,r,o,u,function(){e(5,f=zl.innerHeight),e(1,v=zl.innerWidth)},function(t){ft[t?"unshift":"push"]((()=>{e(3,p=t)}))},function(t){ft[t?"unshift":"push"]((()=>{e(2,m=t)}))},()=>{e(4,w=!1)}]}class te extends t{constructor(t){super(),l(this,t,Zl,Hl,e,{image:0})}}const{window:le}=ut;function ee(t,l,e){const s=t.slice();return s[43]=l[e],s}function se(t){let l,e,a,u,v,m,g;return{c(){l=s("button"),e=n(t[14]),this.h()},l(s){l=i(s,"BUTTON",{id:!0,class:!0});var n=c(l);e=r(n,t[14]),n.forEach(o),this.h()},h(){h(l,"id","backend-button"),h(l,"class","svelte-10vtxxx")},m(s,n){d(s,l,n),f(l,e),v=!0,m||(g=_(l,"click",t[24]),m=!0)},p(l,s){t=l,(!v||16384&s[0])&&P(e,t[14])},i(t){v||(w((()=>{u&&u.end(1),a||(a=b(l,C,{delay:fl})),a.start()})),v=!0)},o(t){a&&a.invalidate(),u=D(l,C,{duration:vl}),v=!1},d(t){t&&o(l),t&&u&&u.end(),m=!1,g()}}}function ne(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-settings-2-line text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function ae(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-close-line text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function ie(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-search-line text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function ce(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-close-line text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function re(t){let l,e,n,a,r,u,m=t[13],g=[];for(let s=0;s<m.length;s+=1)g[s]=oe(ee(t,m,s));const p=t=>K(g[t],1,1,(()=>{g[t]=null}));return{c(){l=s("div"),e=s("div");for(let t=0;t<g.length;t+=1)g[t].c();this.h()},l(t){l=i(t,"DIV",{id:!0,class:!0});var s=c(l);e=i(s,"DIV",{id:!0,class:!0,style:!0});var n=c(e);for(let l=0;l<g.length;l+=1)g[l].l(n);n.forEach(o),s.forEach(o),this.h()},h(){h(e,"id","images"),h(e,"class","flex flex-row flex-wrap justify-center md:justify-between svelte-10vtxxx"),h(e,"style",n=t[3]||t[8]||t[9]?"filter: blur(20px)":null),h(l,"id","images-container"),h(l,"class","flex-1 flex flex-col items-stretch svelte-10vtxxx")},m(s,n){d(s,l,n),f(l,e);for(let t=0;t<g.length;t+=1)g[t].m(e,null);a=!0,r||(u=M(t[27].call(null,l)),r=!0)},p(t,l){if(2108416&l[0]){let s;for(m=t[13],s=0;s<m.length;s+=1){const n=ee(t,m,s);g[s]?(g[s].p(n,l),v(g[s],1)):(g[s]=oe(n),g[s].c(),v(g[s],1),g[s].m(e,null))}for(vt(),s=m.length;s<g.length;s+=1)p(s);mt()}(!a||776&l[0]&&n!==(n=t[3]||t[8]||t[9]?"filter: blur(20px)":null))&&h(e,"style",n)},i(t){if(!a){for(let t=0;t<m.length;t+=1)v(g[t]);a=!0}},o(t){g=g.filter(Boolean);for(let l=0;l<g.length;l+=1)K(g[l]);a=!1},d(t){t&&o(l),H(g,t),r=!1,u()}}}function oe(t){let l,e,n,a,c,r,u,f,v;function m(){return t[33](t[43])}return{c(){l=s("img"),this.h()},l(t){l=i(t,"IMG",{class:!0,alt:!0,src:!0,style:!0}),this.h()},h(){h(l,"class","object-cover svelte-10vtxxx"),h(l,"alt",""),l.src!==(e=Yt(t[43]))&&h(l,"src",e),h(l,"style",n=`width:${t[10]}; height:${t[11]}`)},m(e,s){d(e,l,s),u=!0,f||(v=[M(a=el.call(null,l,[t[43],!1])),_(l,"click",m)],f=!0)},p(s,i){t=s,(!u||8192&i[0]&&l.src!==(e=Yt(t[43])))&&h(l,"src",e),(!u||3072&i[0]&&n!==(n=`width:${t[10]}; height:${t[11]}`))&&h(l,"style",n),a&&V(a.update)&&8192&i[0]&&a.update.call(null,[t[43],!1])},i(e){u||(w((()=>{r&&r.end(1),c||(c=b(l,t[20],{key:t[43].id})),c.start()})),u=!0)},o(e){c&&c.invalidate(),r=D(l,t[19],{key:t[43].id}),u=!1},d(t){t&&o(l),t&&r&&r.end(),f=!1,G(v)}}}function ue(t){let l,e;return l=new te({props:{image:t[2]}}),l.$on("imagechange",t[34]),l.$on("swipe",t[35]),{c(){W(l.$$.fragment)},l(t){Y(l.$$.fragment,t)},m(t,s){X(l,t,s),e=!0},p(t,e){const s={};4&e[0]&&(s.image=t[2]),l.$set(s)},i(t){e||(v(l.$$.fragment,t),e=!0)},o(t){K(l.$$.fragment,t),e=!1},d(t){Q(l,t)}}}function he(t){let l,e,a,u;return{c(){l=s("button"),e=n("More"),this.h()},l(t){l=i(t,"BUTTON",{id:!0,class:!0});var s=c(l);e=r(s,"More"),s.forEach(o),this.h()},h(){h(l,"id","more-button"),h(l,"class","mb-2 svelte-10vtxxx")},m(s,n){d(s,l,n),f(l,e),a||(u=_(l,"click",t[36]),a=!0)},p:m,d(t){t&&o(l),a=!1,u()}}}function de(t){let l,e,n;return e=new rl({}),{c(){l=s("div"),W(e.$$.fragment),this.h()},l(t){l=i(t,"DIV",{id:!0,class:!0});var s=c(l);Y(e.$$.fragment,s),s.forEach(o),this.h()},h(){h(l,"id","settings-menu"),h(l,"class","svelte-10vtxxx")},m(t,s){d(t,l,s),X(e,l,null),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){t&&o(l),Q(e)}}}function fe(t){let l,e,n;return e=new bl({}),e.$on("search",t[25]),{c(){l=s("div"),W(e.$$.fragment),this.h()},l(t){l=i(t,"DIV",{id:!0,class:!0});var s=c(l);Y(e.$$.fragment,s),s.forEach(o),this.h()},h(){h(l,"id","search-menu"),h(l,"class","svelte-10vtxxx")},m(t,s){d(t,l,s),X(e,l,null),n=!0},p:m,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){t&&o(l),Q(e)}}}function ve(t){let l,e,n;return e=new Nl({}),e.$on("backendchange",t[26]),{c(){l=s("div"),W(e.$$.fragment),this.h()},l(t){l=i(t,"DIV",{id:!0,class:!0});var s=c(l);Y(e.$$.fragment,s),s.forEach(o),this.h()},h(){h(l,"id","backends-menu"),h(l,"class","svelte-10vtxxx")},m(t,s){d(t,l,s),X(e,l,null),n=!0},p:m,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){t&&o(l),Q(e)}}}function me(t){let l,e,n,a;return{c(){l=s("button"),e=s("i"),this.h()},l(t){l=i(t,"BUTTON",{id:!0,class:!0});var s=c(l);e=i(s,"I",{class:!0}),c(e).forEach(o),s.forEach(o),this.h()},h(){h(e,"class","ri-arrow-up-line text-2xl text-black"),h(l,"id","back-button"),h(l,"class","svelte-10vtxxx")},m(s,i){d(s,l,i),f(l,e),n||(a=_(l,"click",t[37]),n=!0)},p:m,d(t){t&&o(l),n=!1,a()}}}function ge(t){let l,e,n,r,m,g,p,x,E,b,$,y,T,I,A,N,L,O;w(t[32]);let S=t[3]&&se(t);function B(t,l){return t[8]?ae:ne}let k=B(t),U=k(t);function M(t,l){return t[3]?ce:ie}let P=M(t),V=P(t),C=t[7]&&re(t),D=t[4]&&t[2]&&ue(t),R=t[6]&&!t[2]&&!t[3]&&!t[8]&&!t[9]&&t[15]&&he(t),j=t[8]&&de(),F=t[3]&&fe(t),q=t[9]&&ve(t),z=t[12]&&!t[3]&&!t[2]&&me(t);return{c(){l=s("nav"),S&&S.c(),e=a(),n=s("div"),r=a(),m=s("div"),U.c(),g=a(),p=s("div"),V.c(),x=a(),C&&C.c(),E=a(),D&&D.c(),b=a(),R&&R.c(),$=a(),j&&j.c(),y=a(),F&&F.c(),T=a(),q&&q.c(),I=a(),z&&z.c(),A=gt(),this.h()},l(t){l=i(t,"NAV",{class:!0});var s=c(l);S&&S.l(s),e=u(s),n=i(s,"DIV",{class:!0}),c(n).forEach(o),r=u(s),m=i(s,"DIV",{id:!0,class:!0});var a=c(m);U.l(a),a.forEach(o),g=u(s),p=i(s,"DIV",{id:!0,class:!0});var h=c(p);V.l(h),h.forEach(o),s.forEach(o),x=u(t),C&&C.l(t),E=u(t),D&&D.l(t),b=u(t),R&&R.l(t),$=u(t),j&&j.l(t),y=u(t),F&&F.l(t),T=u(t),q&&q.l(t),I=u(t),z&&z.l(t),A=gt(),this.h()},h(){h(n,"class","flex-1"),h(m,"id","settings-icon"),h(m,"class","svelte-10vtxxx"),h(p,"id","search-icon"),h(p,"class","svelte-10vtxxx"),h(l,"class","flex flex-row items-center space-x-4 svelte-10vtxxx")},m(s,a){d(s,l,a),S&&S.m(l,null),f(l,e),f(l,n),f(l,r),f(l,m),U.m(m,null),f(l,g),f(l,p),V.m(p,null),d(s,x,a),C&&C.m(s,a),d(s,E,a),D&&D.m(s,a),d(s,b,a),R&&R.m(s,a),d(s,$,a),j&&j.m(s,a),d(s,y,a),F&&F.m(s,a),d(s,T,a),q&&q.m(s,a),d(s,I,a),z&&z.m(s,a),d(s,A,a),N=!0,L||(O=[_(le,"keyup",t[28]),_(le,"resize",t[32]),_(m,"click",t[22]),_(p,"click",t[23])],L=!0)},p(t,s){t[3]?S?(S.p(t,s),8&s[0]&&v(S,1)):(S=se(t),S.c(),v(S,1),S.m(l,e)):S&&(vt(),K(S,1,1,(()=>{S=null})),mt()),k!==(k=B(t))&&(U.d(1),U=k(t),U&&(U.c(),U.m(m,null))),P!==(P=M(t))&&(V.d(1),V=P(t),V&&(V.c(),V.m(p,null))),t[7]?C?(C.p(t,s),128&s[0]&&v(C,1)):(C=re(t),C.c(),v(C,1),C.m(E.parentNode,E)):C&&(vt(),K(C,1,1,(()=>{C=null})),mt()),t[4]&&t[2]?D?(D.p(t,s),20&s[0]&&v(D,1)):(D=ue(t),D.c(),v(D,1),D.m(b.parentNode,b)):D&&(vt(),K(D,1,1,(()=>{D=null})),mt()),!t[6]||t[2]||t[3]||t[8]||t[9]||!t[15]?R&&(R.d(1),R=null):R?R.p(t,s):(R=he(t),R.c(),R.m($.parentNode,$)),t[8]?j?256&s[0]&&v(j,1):(j=de(),j.c(),v(j,1),j.m(y.parentNode,y)):j&&(vt(),K(j,1,1,(()=>{j=null})),mt()),t[3]?F?(F.p(t,s),8&s[0]&&v(F,1)):(F=fe(t),F.c(),v(F,1),F.m(T.parentNode,T)):F&&(vt(),K(F,1,1,(()=>{F=null})),mt()),t[9]?q?(q.p(t,s),512&s[0]&&v(q,1)):(q=ve(t),q.c(),v(q,1),q.m(I.parentNode,I)):q&&(vt(),K(q,1,1,(()=>{q=null})),mt()),!t[12]||t[3]||t[2]?z&&(z.d(1),z=null):z?z.p(t,s):(z=me(t),z.c(),z.m(A.parentNode,A))},i(t){N||(v(S),v(C),v(D),v(j),v(F),v(q),N=!0)},o(t){K(S),K(C),K(D),K(j),K(F),K(q),N=!1},d(t){t&&o(l),S&&S.d(),U.d(),V.d(),t&&o(x),C&&C.d(t),t&&o(E),D&&D.d(t),t&&o(b),R&&R.d(t),t&&o($),j&&j.d(t),t&&o(y),F&&F.d(t),t&&o(T),q&&q.d(t),t&&o(I),z&&z.d(t),t&&o(A),L=!1,G(O)}}}const pe={SMALL:{width:"12rem",height:"16rem"},BASE:{width:"14rem",height:"20rem"},LARGE:{width:"16rem",height:"24rem"}},xe=t=>I(pe.BASE,t?pe[t]:null);function Ee(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}const we=$(0);function be(t,l,e){let s,n,a,i,c,r,o,u,h,d,f,v=m;R(t,_t,(t=>e(39,o=t))),R(t,Ut,(t=>e(13,u=t))),R(t,we,(t=>e(40,h=t))),R(t,Ft,(t=>e(15,f=t))),t.$$.on_destroy.push((()=>v()));const{navigate:p}=g("navigator");var x=!1;const E=Pt("backend");var w,b;R(t,E,(t=>e(14,d=t)));const $=Pt("galleryCols");R(t,$,(t=>e(30,c=t)));const y=Pt("galleryImageSize");var T;R(t,y,(t=>e(31,r=t)));var I=0,N=o,L=!1,O=!0,S=!1,B=!1,k=!1;const[U,_]=pt({duration:200,fallback:xt});function M(t){e(2,N=t),s||(e(7,O=!1),setTimeout((()=>p("Image")),210))}return t.$$.update=()=>{2&t.$$.dirty[0]&&e(4,s=b<=768),1073741840&t.$$.dirty[0]|1&t.$$.dirty[1]&&e(10,n=s?1/c*100+"vw":xe(r).width),1073741840&t.$$.dirty[0]|1&t.$$.dirty[1]&&e(11,a=s?Math.max(20,4/c*20)+"vh":xe(r).height),4&t.$$.dirty[0]&&tt(_t,o=N,o),536870913&t.$$.dirty[0]&&e(12,i=I>w),12&t.$$.dirty[0]&&document.body.classList.toggle("noscroll",B||null!==N)},[w,b,N,B,s,T,L,O,S,k,n,a,i,u,d,f,E,$,y,U,_,M,function(){e(9,k=!1),e(3,B=!1),setTimeout((()=>{e(8,S=!S)}),al)},function(){window.scrollTo(0,0),e(9,k=!1),e(8,S=!1),setTimeout((()=>{e(3,B=!B)}),al)},function(){k?(e(9,k=!1),e(3,B=!0)):(e(3,B=!1),setTimeout((()=>{e(9,k=!0)}),vl))},async function(t){const l=t.detail;T.getScrollElement().scrollTo(0,0),tt(Ut,u=[],u),await new Promise((t=>setTimeout(t,210))),await async function(t){if(A(Rt))return!1;const l=Gt[A(zt)];jt.set(0),Ft.set(!1),Ut.set([]),Rt.set(!0);const[e,s]=await l.fetchImages(t,{page:A(jt),limit:A(qt)});return Rt.set(!1),Mt.set(t),Ut.set(s),(null==s?void 0:s.length)>0&&Ft.set(!0),!0}(l)&&e(3,B=!1)},function(t){Vt("backend",null==t?void 0:t.detail),e(9,k=!1),e(3,B=!0)},function(t){function l(){e(29,I=T.getScrollElement().scrollTop);const t=T.getScrollElement().scrollHeight;Math.abs(window.innerHeight-Ee(6.5)+I-t)<Ee(6)||t>0&&t<window.innerHeight?e(6,L=!0):e(6,L=!1),tt(we,h=I,h)}e(5,T=new Et(t)),T.getScrollElement().scrollTop=h,T.getScrollElement().addEventListener("scroll",l),Ut.subscribe((async()=>{T.recalculate(),await wt(),l()}))},function(t){"Escape"===t.key&&(B&&e(3,B=!1),S?e(8,S=!1):async function(){if(x)return;x=!0,tt(Ut,u=[],u),e(8,S=!1),e(3,B=!1);const t=Math.max(200,S?200+al:0,B?200+vl:0);setTimeout((()=>p("Start")),t+10)}())},I,c,r,function(){e(1,b=le.innerWidth),e(0,w=le.innerHeight)},t=>M(t),t=>{const l=t.detail;e(2,N=l)},t=>{"DOWN"===t.detail&&e(2,N=null)},()=>{e(6,L=!1),async function(){if(!A(Ft))return!1;if(A(Rt))return!1;const t=Gt[A(zt)];Rt.set(!0),jt.update((t=>t+1));const[l,e]=await t.fetchImages(A(Mt),{page:A(jt),limit:A(qt)});e&&(null==e?void 0:e.length)<1&&Ft.set(!1),Rt.set(!1),Ut.set([...A(Ut),...e])}()},()=>{T.getScrollElement().scrollTo(0,0)}]}function $e(t,l,e){const s=t.slice();return s[9]=l[e],s}function ye(t){let l,e,n,a,c;function r(){return t[8](t[9])}return{c(){l=s("img"),this.h()},l(t){l=i(t,"IMG",{class:!0,alt:!0}),this.h()},h(){h(l,"class","object-contain transform hover:scale-110 svelte-h1s5j1"),h(l,"alt","adjacent")},m(s,i){d(s,l,i),a||(c=[M(e=el.call(null,l,[t[9]])),M(n=Ie.call(null,l,t[9]===t[1])),_(l,"click",r)],a=!0)},p(l,s){t=l,e&&V(e.update)&&4&s&&e.update.call(null,[t[9]]),n&&V(n.update)&&6&s&&n.update.call(null,t[9]===t[1])},d(t){t&&o(l),a=!1,G(c)}}}function Te(t){let l,e,n;w(t[7]);let a=t[2],r=[];for(let s=0;s<a.length;s+=1)r[s]=ye($e(t,a,s));return{c(){l=s("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){l=i(t,"DIV",{id:!0,class:!0});var e=c(l);for(let l=0;l<r.length;l+=1)r[l].l(e);e.forEach(o),this.h()},h(){h(l,"id","images"),h(l,"class","flex flex-row lg:flex-col rounded-lg svelte-h1s5j1")},m(s,a){d(s,l,a);for(let t=0;t<r.length;t+=1)r[t].m(l,null);e||(n=_(window,"resize",t[7]),e=!0)},p(t,[e]){if(22&e){let s;for(a=t[2],s=0;s<a.length;s+=1){const n=$e(t,a,s);r[s]?r[s].p(n,e):(r[s]=ye(n),r[s].c(),r[s].m(l,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}},i:m,o:m,d(t){t&&o(l),H(r,t),e=!1,n()}}}function Ie(t,l){return t.classList.toggle("active-queue-image",l),{update(l){t.classList.toggle("active-queue-image",l)}}}function Ae(t,l,e){let s,n,a;R(t,_t,(t=>e(1,n=t))),R(t,Ut,(t=>e(6,a=t)));const i=J();var c,r,o=[];return t.$$.update=()=>{if(1&t.$$.dirty&&e(5,s=r<1050?4:5),98&t.$$.dirty){const t=it(O(n))(a);let l=1,i=0,c=0;for(;l<a.length&&i+c<s&&(I(null,null==a?void 0:a[t+l])&&++c,i+c!==s);)I(null,null==a?void 0:a[t-l])&&++i,++l;c<=2&&(--i,++c);const r=ct(0,t-i),u=rt(a.length,t+c);e(2,o=bt(r,u,a))}},[r,n,o,c,i,s,a,function(){e(3,c=window.innerWidth),e(0,r=window.innerHeight)},t=>i("imagechange",t)]}class Ne extends t{constructor(t){super(),l(this,t,Ae,Te,e,{})}}function Le(t){let l,e,n,a;return e=new Ne({}),e.$on("imagechange",t[15]),{c(){l=s("div"),W(e.$$.fragment),this.h()},l(t){l=i(t,"DIV",{id:!0,class:!0});var s=c(l);Y(e.$$.fragment,s),s.forEach(o),this.h()},h(){h(l,"id","images-queue"),h(l,"class","svelte-10g3o0g")},m(t,s){d(t,l,s),X(e,l,null),a=!0},p(l,e){t=l},i(t){a||(v(e.$$.fragment,t),w((()=>{n||(n=$t(l,at,{delay:0,duration:Me,y:300},!0)),n.run(1)})),a=!0)},o(t){K(e.$$.fragment,t),n||(n=$t(l,at,{delay:0,duration:Me,y:300},!1)),n.run(0),a=!1},d(t){t&&o(l),Q(e),t&&n&&n.end()}}}function Oe(t){let l,e,n,a,r;return e=new ql({}),{c(){l=s("div"),W(e.$$.fragment),this.h()},l(t){l=i(t,"DIV",{id:!0,class:!0});var s=c(l);Y(e.$$.fragment,s),s.forEach(o),this.h()},h(){h(l,"id","image-info"),h(l,"class","svelte-10g3o0g")},m(t,s){d(t,l,s),X(e,l,null),r=!0},p(t,l){},i(t){r||(v(e.$$.fragment,t),w((()=>{a&&a.end(1),n||(n=b(l,at,{delay:Pe,duration:Ve,y:1e3})),n.start()})),r=!0)},o(t){K(e.$$.fragment,t),n&&n.invalidate(),a=D(l,at,{delay:0,duration:Ve,y:1e3}),r=!1},d(t){t&&o(l),Q(e),t&&a&&a.end()}}}function Se(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-line text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function Be(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-star-line text-3xl text-yellow-300")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function ke(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-information-line text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function Ue(t){let l;return{c(){l=s("i"),this.h()},l(t){l=i(t,"I",{class:!0}),c(l).forEach(o),this.h()},h(){h(l,"class","ri-close-line text-3xl")},m(t,e){d(t,l,e)},d(t){t&&o(l)}}}function _e(t){let l,e,m,g,p,x,E,$,y,T,I,A,N,L,O,S,B,k,U,D,R,j,F,q,z,H,W,Y,X,Q,J,Z,tt,lt,et,st,nt,at=t[7]+1+"",it=t[2].length+"";w(t[14]);let ct=t[4]&&!t[5]&&Le(t),rt=t[5]&&Oe();function ot(t,l){return t[6]?Be:Se}let ut=ot(t),ht=ut(t);function dt(t,l){return t[5]?Ue:ke}let ft=dt(t),gt=ft(t);return{c(){l=s("nav"),e=s("button"),m=s("i"),g=a(),p=s("p"),x=n("image"),E=a(),$=s("div"),y=a(),T=s("button"),I=s("i"),A=a(),N=s("button"),L=s("i"),O=a(),S=s("p"),B=n(at),k=n(" / "),U=n(it),D=a(),R=s("main"),j=s("img"),X=a(),ct&&ct.c(),Q=a(),rt&&rt.c(),J=a(),Z=s("button"),ht.c(),tt=a(),lt=s("button"),gt.c(),this.h()},l(t){l=i(t,"NAV",{class:!0});var s=c(l);e=i(s,"BUTTON",{class:!0});var n=c(e);m=i(n,"I",{class:!0}),c(m).forEach(o),g=u(n),p=i(n,"P",{class:!0});var a=c(p);x=r(a,"image"),a.forEach(o),n.forEach(o),E=u(s),$=i(s,"DIV",{class:!0}),c($).forEach(o),y=u(s),T=i(s,"BUTTON",{id:!0});var h=c(T);I=i(h,"I",{class:!0}),c(I).forEach(o),h.forEach(o),A=u(s),N=i(s,"BUTTON",{id:!0});var d=c(N);L=i(d,"I",{class:!0}),c(L).forEach(o),d.forEach(o),O=u(s),S=i(s,"P",{id:!0,class:!0});var f=c(S);B=r(f,at),k=r(f," / "),U=r(f,it),f.forEach(o),s.forEach(o),D=u(t),R=i(t,"MAIN",{class:!0});var v=c(R);j=i(v,"IMG",{id:!0,style:!0,width:!0,height:!0,src:!0,alt:!0,class:!0}),X=u(v),ct&&ct.l(v),Q=u(v),rt&&rt.l(v),J=u(v),Z=i(v,"BUTTON",{id:!0,class:!0});var w=c(Z);ht.l(w),w.forEach(o),tt=u(v),lt=i(v,"BUTTON",{id:!0,class:!0});var b=c(lt);gt.l(b),b.forEach(o),v.forEach(o),this.h()},h(){var s,n,a;h(m,"class","ri-arrow-left-s-line text-4xl md:text-5xl"),h(p,"class","text-4xl font-light md:text-5xl"),h(e,"class","flex flex-row items-center"),h($,"class","flex-1"),h(I,"class","ri-arrow-left-s-line text-4xl md:text-5xl"),h(T,"id","previous-image-button"),h(L,"class","ri-arrow-right-s-line text-4xl md:text-5xl"),h(N,"id","next-image-button"),h(S,"id","index-indicator"),h(S,"class","ml-4 text-3xl text-center svelte-10g3o0g"),h(l,"class","px-6 pt-2 h-20 flex flex-row items-center"),h(j,"id","main-image"),h(j,"style",F=t[5]?"filter: blur(12px)":""),h(j,"width",q=null==(s=t[1])?void 0:s.width),h(j,"height",z=null==(n=t[1])?void 0:n.height),j.src!==(H=null==(a=t[1])?void 0:a.thumbnail_url)&&h(j,"src",H),h(j,"alt","main"),h(j,"class","svelte-10g3o0g"),h(Z,"id","favorite-button"),h(Z,"class","absolute bottom-0 left-0 ml-6 mb-6 py-6 px-8 rounded-3xl svelte-10g3o0g"),h(lt,"id","info-button"),h(lt,"class","absolute bottom-0 right-0 mr-6 mb-6 py-6 px-8 rounded-3xl svelte-10g3o0g"),h(R,"class","flex flex-col lg:flex-row px-4 overflow-hidden svelte-10g3o0g")},m(s,n){d(s,l,n),f(l,e),f(e,m),f(e,g),f(e,p),f(p,x),f(l,E),f(l,$),f(l,y),f(l,T),f(T,I),f(l,A),f(l,N),f(N,L),f(l,O),f(l,S),f(S,B),f(S,k),f(S,U),d(s,D,n),d(s,R,n),f(R,j),f(R,X),ct&&ct.m(R,null),f(R,Q),rt&&rt.m(R,null),f(R,J),f(R,Z),ht.m(Z,null),f(R,tt),f(R,lt),gt.m(lt,null),et=!0,st||(nt=[_(window,"keyup",t[12]),_(window,"resize",t[14]),_(e,"click",t[9]),_(T,"click",t[11]),_(N,"click",t[10]),M(W=el.call(null,j,[t[1],!0])),_(Z,"click",t[16]),_(lt,"click",t[17])],st=!0)},p(t,[l]){var e,s,n;(!et||128&l)&&at!==(at=t[7]+1+"")&&P(B,at),(!et||4&l)&&it!==(it=t[2].length+"")&&P(U,it),(!et||32&l&&F!==(F=t[5]?"filter: blur(12px)":""))&&h(j,"style",F),(!et||2&l&&q!==(q=null==(e=t[1])?void 0:e.width))&&h(j,"width",q),(!et||2&l&&z!==(z=null==(s=t[1])?void 0:s.height))&&h(j,"height",z),(!et||2&l&&j.src!==(H=null==(n=t[1])?void 0:n.thumbnail_url))&&h(j,"src",H),W&&V(W.update)&&2&l&&W.update.call(null,[t[1],!0]),t[4]&&!t[5]?ct?(ct.p(t,l),48&l&&v(ct,1)):(ct=Le(t),ct.c(),v(ct,1),ct.m(R,Q)):ct&&(vt(),K(ct,1,1,(()=>{ct=null})),mt()),t[5]?rt?(rt.p(t,l),32&l&&v(rt,1)):(rt=Oe(),rt.c(),v(rt,1),rt.m(R,J)):rt&&(vt(),K(rt,1,1,(()=>{rt=null})),mt()),ut!==(ut=ot(t))&&(ht.d(1),ht=ut(t),ht&&(ht.c(),ht.m(Z,null))),ft!==(ft=dt(t))&&(gt.d(1),gt=ft(t),gt&&(gt.c(),gt.m(lt,null)))},i(t){et||(Y||w((()=>{Y=b(j,C,{}),Y.start()})),v(ct),v(rt),et=!0)},o(t){K(ct),K(rt),et=!1},d(t){t&&o(l),t&&o(D),t&&o(R),ct&&ct.d(),rt&&rt.d(),ht.d(),gt.d(),st=!1,G(nt)}}}const Me=200,Pe=300,Ve=200;function Ce(t,l,e){let s,n,a,i,c;R(t,_t,(t=>e(1,a=t))),R(t,Ut,(t=>e(2,c=t)));const{images:r}=kt;R(t,r,(t=>e(13,i=t)));const{navigate:o}=g("navigator");async function u(){e(5,v=!1),e(4,f=!1),setTimeout((()=>o("Gallery")),Me)}var h,d;g("events");var f=!0,v=!1;function m(){tt(_t,a=c[rt(n+1,c.length-1)],a)}function p(){tt(_t,a=c[ct(n-1,0)],a)}return t.$$.update=()=>{1&t.$$.dirty&&h<768&&u(),8194&t.$$.dirty&&e(6,s=void 0!==L(lt("id",a.id),i)),6&t.$$.dirty&&e(7,n=it(O(a))(c))},[h,a,c,d,f,v,s,n,r,u,m,p,function(t){const l=t.key;"Escape"===l&&u(),"ArrowLeft"!==l&&"j"!==l||p(),"ArrowRight"!==l&&"k"!==l||m()," "===l&&m()},i,function(){e(0,h=window.innerWidth),e(3,d=window.innerHeight)},t=>{tt(_t,a=t.detail,a)},()=>Sl(a),()=>{e(5,v=!v)}]}var De={Start:{COMPONENT:class extends t{constructor(t){super(),l(this,t,Ot,Lt,e,{})}}},Gallery:{COMPONENT:class extends t{constructor(t){super(),l(this,t,be,ge,e,{},[-1,-1])}}},Image:{COMPONENT:class extends t{constructor(t){super(),l(this,t,Ce,_e,e,{})}}}};const Ge=$(null),Re=$([]),je=$({}),Fe=$({}),qe=$({});function ze(t,l){if(A(Ge)){const l=Object.entries(A(je)),e=Object.entries(A(qe));for(const[t,n]of e)"function"==typeof n.clear&&n.clear();const s={};for(const[n,a]of l)s[n]=new He(t,a);qe.set(s)}l&&A(Re).push("StartView");const e=A(Fe);Ge.set(e[t])}class He{constructor(t,l){this.view=t,this.emitter=l,this.listeners=[]}on(t,l){this.listeners.push([t,l]),this.emitter.on(t,l)}clear(){const t=this.listeners;for(const[l,e]of t)this.emitter.removeListener(l,e)}}function We(t){var l;let e,n,a;var r=null==(l=t[0])?void 0:l.COMPONENT;return r&&(n=new r({})),{c(){e=s("main"),n&&W(n.$$.fragment),this.h()},l(t){e=i(t,"MAIN",{class:!0});var l=c(e);n&&Y(n.$$.fragment,l),l.forEach(o),this.h()},h(){h(e,"class","relative flex flex-col svelte-gbof4i")},m(t,l){d(t,e,l),n&&X(n,e,null),a=!0},p(t,[l]){var s;if(r!==(r=null==(s=t[0])?void 0:s.COMPONENT)){if(n){vt();const t=n;K(t.$$.fragment,1,0,(()=>{Q(t,1)})),mt()}r?(n=new r({}),W(n.$$.fragment),v(n.$$.fragment,1),X(n,e,null)):n=null}},i(t){a||(n&&v(n.$$.fragment,t),a=!0)},o(t){n&&K(n.$$.fragment,t),a=!1},d(t){t&&o(e),n&&Q(n)}}}function Ye(t,l,e){let s;var n,a;return R(t,Ge,(t=>e(0,s=t))),n=Tt,a=De,je.set(n),Fe.set(a),yt("navigator",{navigate:ze}),yt("events",qe),ze("Start"),[s]}new class extends t{constructor(t){super(),l(this,t,Ye,We,e,{})}}({target:document.getElementById("app")});
