var t=Object.defineProperty,e=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,c=(e,l,n)=>l in e?t(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n;import{S as o,i as r,s as a,e as u,a as d,b as f,c as m,t as p,n as v,d as g,g as h,f as x,o as b,h as w,j as $,k as y,l as k,w as A,m as E,p as L,q as z,r as S,u as T,v as M,H as _,x as C,y as N,z as O,A as j,B as I,C as q,D as F,E as P,F as B,G as H,I as G,J as R,K as U,L as D,M as V,N as W,O as Y,P as X,Q as K,R as Q,T as J,U as Z,V as tt,W as et,X as lt,Y as nt,Z as st,_ as it,$ as ct,a0 as ot,a1 as rt,a2 as at,a3 as ut,a4 as dt,a5 as ft,a6 as mt,a7 as pt,a8 as vt,a9 as gt,aa as ht,ab as xt,ac as bt,ad as wt,ae as $t,af as yt,ag as kt,ah as At,ai as Et,aj as Lt,ak as zt,al as St,am as Tt,an as Mt,ao as _t,ap as Ct,aq as Nt,ar as Ot,as as jt}from"./vendor.03c796df.js";var It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),qt="/assets/tippy.ac9e6991.png";function Ft(t){let e,l;return{c(){e=u("img"),f(e,"class","hidden"),w(e.src,l=qt)||f(e,"src","/assets/tippy.ac9e6991.png"),f(e,"alt","tippy-hidden")},m(t,l){m(t,e,l)},p:v,i:v,o:v,d(t){t&&g(e)}}}function Pt(t){let e,l,n;return{c(){e=u("img"),f(e,"class","self-center w-40 h-32"),w(e.src,l=qt)||f(e,"src","/assets/tippy.ac9e6991.png"),f(e,"alt","tippy")},m(t,l){m(t,e,l)},p:v,i(t){n||$((()=>{n=y(e,Ht,{}),n.start()}))},o:v,d(t){t&&g(e)}}}function Bt(t){let e,l,n,s,i,c,o,r;function a(t,e){return t[0]?Pt:Ft}let h=a(t),x=h(t);return{c(){e=u("nav"),e.innerHTML='<p class="flex-1 text-5xl font-light">chino</p> \n  <a href="https://github.com/the-rabbit-house/chino"><i class="ri-github-fill text-5xl"></i></a>',l=d(),n=u("div"),s=d(),x.c(),i=d(),c=u("div"),o=d(),r=u("p"),r.textContent="Brewing the coffee..",f(e,"class","px-6 pt-2 h-20 flex flex-row items-center"),f(n,"class","flex-1"),f(c,"class","flex-1"),f(r,"class","pb-6 text-2xl font-light text-center")},m(t,a){m(t,e,a),m(t,l,a),m(t,n,a),m(t,s,a),x.m(t,a),m(t,i,a),m(t,c,a),m(t,o,a),m(t,r,a)},p(t,[e]){h===(h=a(t))&&x?x.p(t,e):(x.d(1),x=h(t),x&&(x.c(),p(x,1),x.m(i.parentNode,i)))},i(t){p(x)},o:v,d(t){t&&g(e),t&&g(l),t&&g(n),t&&g(s),x.d(t),t&&g(i),t&&g(c),t&&g(o),t&&g(r)}}}function Ht(t,e){return{delay:0,duration:1e3,easing:k,css:(t,e)=>`transform: rotate(${360*t}deg);`}}function Gt(t,e,l){let n;const{navigate:s}=h("navigator");h("events");const{isNative:i}=h("screen");x(t,i,(t=>l(2,n=t)));var c=!1;return b((()=>{if(l(0,c=!0),n){document.querySelector("meta[name=viewport]").setAttribute("content",`width=device-width, height=${window.innerHeight}, initial-scale=1.0, user-scalable=0`)}setTimeout((()=>s("Gallery")),1e3)})),[c,i]}const Rt={backend:"danbooru",limit:20,throttle:1,galleryCols:3,galleryImageSize:"BASE",swipeDistance:.2,nsfw:!1},Ut=E("settings",Rt),Dt={tags:A([]),images:A([])},Vt=A([]),Wt=A(null),Yt=A([]),Xt=function(t){return L(Ut,(e=>z(Rt[t],null==e?void 0:e[t])))},Kt=function(t,o){const r=(a=((t,e)=>{for(var l in e||(e={}))s.call(e,l)&&c(t,l,e[l]);if(n)for(var l of n(e))i.call(e,l)&&c(t,l,e[l]);return t})({},S(Ut)),e(a,l({[t]:o})));var a;Ut.set(r)};function Qt(t=8e3){const e=new AbortController,l=e.signal;return setTimeout((()=>e.abort()),t),l}function Jt(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}const Zt=T([M("zip"),M("webm"),M("mp4")]);function te(t){const e=[];for(const l of t){if(!(null==l?void 0:l.file_url))continue;const t=null==l?void 0:l.file_ext,n={id:null==l?void 0:l.md5,file_name:(null==l?void 0:l.md5)+"."+(null==l?void 0:l.file_ext)||"",file_ext:t,source:null==l?void 0:l.source,artist:null==l?void 0:l.tag_string_artist,thumbnail_url:null==l?void 0:l.preview_file_url,file_url:Zt(t)?null==l?void 0:l.large_file_url:null==l?void 0:l.file_url,width:null==l?void 0:l.image_width,height:null==l?void 0:l.image_height,tags:null==l?void 0:l.tag_string.split(" "),data:l,video:Zt(t)};e.push(n)}return e}var ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"danbooru",PLATFORMS:["web","native"],fetchImages:async function(t,{page:e,limit:l}){try{return[!0,te((await _.request({method:"GET",url:"https://danbooru.donmai.us/posts.json?tags="+t.join("+")+"&page="+(e+1)+"&limit="+l,webFetchExtra:{signal:Qt()}})).data)]}catch(n){return[!1,[]]}}});const le=T([M("zip"),M("webm"),M("mp4")]);function ne(t){const e=[];for(const l of t){if(!(null==l?void 0:l.file_url))continue;const t=C(null==l?void 0:l.file_url.split(".")),n={id:null==l?void 0:l.hash,file_name:null==l?void 0:l.image,source:null==l?void 0:l.source,artist:null==l?void 0:l.owner,file_ext:t,video:le(t),thumbnail_url:`https://img3.gelbooru.com/thumbnails/${null==l?void 0:l.directory}/thumbnail_${null==l?void 0:l.hash}.jpg`,file_url:null==l?void 0:l.file_url,width:null==l?void 0:l.width,height:null==l?void 0:l.height,tags:null==l?void 0:l.tags.split(" "),data:l};e.push(n)}return e}var se={danbooru:ee,gelbooru:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"gelbooru",PLATFORMS:["native"],fetchImages:async function(t,{page:e,limit:l}){try{return[!0,ne((await _.request({method:"GET",url:"https://gelbooru.com/index.php?page=dapi&s=post&q=index&json=1&tags="+t.join("+")+"&pid="+e+"&limit="+l,webFetchExtra:{signal:Qt()}})).data)]}catch(n){return[!1,[]]}}})};const ie=A(!1),ce=A(0),oe=A(!1),re=Xt("limit"),ae=Xt("backend");function ue(t){let e=S(Yt);e=O(M(t),S(Yt))?I([t],e):j(t,e),Yt.set(e)}const de=t=>({}),fe=t=>({}),me=t=>({}),pe=t=>({});function ve(t){let e,l,n;const s=t[4].left,i=q(s,t,t[3],pe),c=i||function(t){let e,l,n,s,i,c,o,r=H(t[0].NAME)+"";return{c(){e=u("button"),l=u("i"),n=d(),s=u("p"),i=F(r),f(l,"id","arrow-button"),f(l,"class","ri-arrow-left-s-line svelte-1w9rlcm"),f(s,"id","screen-name"),f(s,"class","svelte-1w9rlcm"),f(e,"class","flex-1 flex flex-row items-center")},m(r,a){m(r,e,a),P(e,l),P(e,n),P(e,s),P(s,i),c||(o=B(e,"click",t[2]),c=!0)},p(t,e){1&e&&r!==(r=H(t[0].NAME)+"")&&G(i,r)},d(t){t&&g(e),c=!1,o()}}}(t),o=t[4].right,r=q(o,t,t[3],fe);return{c(){e=u("nav"),c&&c.c(),l=d(),r&&r.c(),f(e,"class","flex flex-row svelte-1w9rlcm")},m(t,s){m(t,e,s),c&&c.m(e,null),P(e,l),r&&r.m(e,null),n=!0},p(t,[e]){i?i.p&&(!n||8&e)&&R(i,s,t,t[3],n?D(s,t[3],e,me):U(t[3]),pe):c&&c.p&&(!n||1&e)&&c.p(t,n?e:-1),r&&r.p&&(!n||8&e)&&R(r,o,t,t[3],n?D(o,t[3],e,de):U(t[3]),fe)},i(t){n||(p(c,t),p(r,t),n=!0)},o(t){V(c,t),V(r,t),n=!1},d(t){t&&g(e),c&&c.d(t),r&&r.d(t)}}}function ge(t,e,l){let n,{$$slots:s={},$$scope:i}=e;const{currentScreen:c}=h("navigator");x(t,c,(t=>l(0,n=t)));const o=W();return t.$$set=t=>{"$$scope"in t&&l(3,i=t.$$scope)},[n,c,()=>o("back"),i,s]}class he extends o{constructor(t){super(),r(this,t,ge,ve,a,{})}}const xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",be=A({});function we(t){const e=S(be);return(null==e?void 0:e["thumbnail_"+(null==t?void 0:t.id)])?e["thumbnail_"+(null==t?void 0:t.id)]:xe}function $e(t){const e=S(be);return(null==e?void 0:e[null==t?void 0:t.id])?e[null==t?void 0:t.id]:(null==e?void 0:e["thumbnail_"+(null==t?void 0:t.id)])?e["thumbnail_"+(null==t?void 0:t.id)]:xe}const ye={image:null},ke=A([]),Ae=A([]);function Ee(t){ke.set(I([t],S(ke))),Ae.set(I([t],S(Ae)))}const Le=L([ke,Ae],(([t,e])=>[...t,...e])),ze=A([]);function Se(){var t,e;const l=z(1,null==(t=S(Ut))?void 0:t.throttle);if(S(ze).length>=l)return;if(S(Le).length<1)return;const[n,...s]=S(Le),[i,c,o=!1]=n;if(void 0!==O(M([i,o]),S(ze)))return void Ee(n);const r=o?"thumbnail_url":"file_url",a=o?"thumbnail_":"";if(!(null==(e=S(be))?void 0:e[a+(null==i?void 0:i.id)])){const t=[i,o];ze.set(j(t,S(ze))),async function(t,e,l){const n=await _.downloadFile({url:null==t?void 0:t[e],filePath:l+(null==t?void 0:t.file_name),fileDirectory:"CACHE",method:"GET"});let s=null;if(null==n?void 0:n.blob){const t=n.blob;s=URL.createObjectURL(t)}if(null==n?void 0:n.path){const t=await Y.getUri({path:n.path});s=X.convertFileSrc(t.uri)}return s?(S(be)[l+(null==t?void 0:t.id)]=s,be.set(S(be)),s):null}(i,r,a).then((e=>{(o||ye.image===i||(null==i?void 0:i.video))&&document.body.contains(c)&&(c.src=$e(i)),ze.set(I([t],S(ze)))}))}Ee(n)}function Te(t,[e,l=!1]){return l&&(ye.image=e),(null==e?void 0:e.video)||(t.src=$e(e)),ke.set([...S(ke),[e,t,!0]]),l&&Ae.set([[e,t,!1],...S(Ae)]),{update([e,l=!1]){l&&(ye.image=e),(null==e?void 0:e.video)||(t.src=$e(e)),ke.set([...S(ke),[e,t,!0]]),l&&Ae.set([[e,t,!1],...S(Ae)])}}}Le.subscribe(Se),ze.subscribe(Se);function Me(t,e,l){const n=t.slice();return n[15]=e[l],n}function _e(t){let e,l,n,s,i,c,o,r,a;function d(){return t[13](t[15])}return{c(){e=u("img"),f(e,"class","object-cover svelte-10i13kt"),f(e,"alt",""),w(e.src,l=we(t[15]))||f(e,"src",l),f(e,"style",n=`width:${t[2]}; height:${t[1]}`)},m(l,n){m(l,e,n),o=!0,r||(a=[K(s=Te.call(null,e,[t[15],!1])),B(e,"click",d)],r=!0)},p(i,c){t=i,(!o||8&c&&!w(e.src,l=we(t[15])))&&f(e,"src",l),(!o||6&c&&n!==(n=`width:${t[2]}; height:${t[1]}`))&&f(e,"style",n),s&&Q(s.update)&&8&c&&s.update.call(null,[t[15],!1])},i(l){o||($((()=>{c&&c.end(1),i=y(e,t[9],{key:t[15].id}),i.start()})),o=!0)},o(l){i&&i.invalidate(),c=J(e,t[8],{key:t[15].id}),o=!1},d(t){t&&g(e),t&&c&&c.end(),r=!1,Z(a)}}}function Ce(t){let e,l,n,s=t[3],i=[];for(let o=0;o<s.length;o+=1)i[o]=_e(Me(t,s,o));const c=t=>V(i[t],1,1,(()=>{i[t]=null}));return{c(){e=u("div");for(let t=0;t<i.length;t+=1)i[t].c();f(e,"id","images"),f(e,"class","flex flex-row flex-wrap justify-center md:justify-between svelte-10i13kt"),f(e,"style",l=t[0]?"filter: blur(20px)":null)},m(t,l){m(t,e,l);for(let n=0;n<i.length;n+=1)i[n].m(e,null);n=!0},p(t,[o]){if(30&o){let l;for(s=t[3],l=0;l<s.length;l+=1){const n=Me(t,s,l);i[l]?(i[l].p(n,o),p(i[l],1)):(i[l]=_e(n),i[l].c(),p(i[l],1),i[l].m(e,null))}for(tt(),l=s.length;l<i.length;l+=1)c(l);et()}(!n||1&o&&l!==(l=t[0]?"filter: blur(20px)":null))&&f(e,"style",l)},i(t){if(!n){for(let t=0;t<s.length;t+=1)p(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)V(i[e]);n=!1},d(t){t&&g(e),lt(i,t)}}}const Ne={SMALL:{width:"12rem",height:"16rem"},BASE:{width:"14rem",height:"20rem"},LARGE:{width:"16rem",height:"24rem"}},Oe=t=>z(Ne.BASE,t?Ne[t]:null);function je(t,e,l){let n,s,i,c,o,r;x(t,Vt,(t=>l(3,r=t)));const a=W();let{blur:u=!1}=e;const{height:d,isMobile:f}=h("screen");x(t,f,(t=>l(12,o=t)));const m=Xt("galleryCols");x(t,m,(t=>l(11,c=t)));const p=Xt("galleryImageSize");x(t,p,(t=>l(10,i=t)));const[v,g]=nt({duration:200,fallback:st});return t.$$set=t=>{"blur"in t&&l(0,u=t.blur)},t.$$.update=()=>{7168&t.$$.dirty&&l(2,n=o?1/c*100+"vw":Oe(i).width),7168&t.$$.dirty&&l(1,s=o?Math.max(20,4/c*20)+"vh":Oe(i).height)},[u,s,n,r,a,f,m,p,v,g,i,c,o,t=>a("imageclick",t)]}class Ie extends o{constructor(t){super(),r(this,t,je,Ce,a,{blur:0})}}function qe(t){let e,l,n,s,i,c,o,r,a,p,v,h,x,b,w,k,A,E,L,z,S,T,M,_,C,N,O,j,I,q,H,R,U,D,V,W,Y,X,tt,et,lt,nt,st,ot,rt,at,ut,dt,ft,mt,pt,vt,gt,ht,xt,bt,wt,$t,yt,kt,At,Et,Lt,zt,St,Tt,Mt,_t,Ct,Nt,Ot,jt,It,qt,Ft,Pt,Bt=t[5]?"SM":"SMALL",Ht=t[5]?"LG":"LARGE";return{c(){e=u("article"),l=u("section"),n=u("p"),n.innerHTML="Images <br/>per page",s=d(),i=u("button"),i.textContent="-",c=d(),o=u("button"),r=F(t[0]),a=d(),p=u("button"),p.textContent="+",v=d(),h=u("section"),x=u("p"),x.innerHTML="Load <br/>limit",b=d(),w=u("button"),w.textContent="-",k=d(),A=u("button"),E=F(t[1]),L=d(),z=u("button"),z.textContent="+",S=d(),T=u("section"),M=u("sup"),M.textContent="MOBILE ONLY",_=d(),C=u("p"),C.innerHTML="Grid<br/> columns",N=d(),O=u("button"),O.textContent="-",j=d(),I=u("button"),q=F(t[2]),H=d(),R=u("button"),R.textContent="+",U=d(),D=u("section"),V=u("sup"),V.textContent="MOBILE ONLY",W=d(),Y=u("p"),Y.innerHTML="Swipe <br/>distance",X=d(),tt=u("button"),tt.textContent="16.1%",lt=d(),nt=u("button"),nt.textContent="20%",ot=d(),rt=u("button"),rt.textContent="25%",ut=d(),dt=u("section"),ft=u("sup"),ft.textContent="TABLET+ ONLY",mt=d(),pt=u("p"),pt.innerHTML="Image <br/> size",vt=d(),gt=u("button"),ht=F(Bt),bt=d(),wt=u("button"),wt.textContent="BASE",yt=d(),kt=u("button"),At=F(Ht),Lt=d(),zt=u("section"),St=u("p"),St.innerHTML="NSFW<br/> mode",Tt=d(),Mt=u("button"),Mt.textContent="OFF",Ct=d(),Nt=u("button"),Nt.textContent="ON",f(n,"class","flex-1"),f(i,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(o,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),o.disabled=!0,f(p,"class","w-14 md:w-16 svelte-ddyzwm"),f(l,"class","px-2 py-4 svelte-ddyzwm"),f(x,"class","flex-1"),f(w,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(A,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),A.disabled=!0,f(z,"class","w-14 md:w-16 svelte-ddyzwm"),f(h,"class","px-2 py-4 svelte-ddyzwm"),f(M,"class","svelte-ddyzwm"),f(C,"class","flex-1"),f(O,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(I,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),I.disabled=!0,f(R,"class","w-14 md:w-16 svelte-ddyzwm"),f(T,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(V,"class","svelte-ddyzwm"),f(Y,"class","flex-1 text-wrap"),f(tt,"class","mr-1 svelte-ddyzwm"),f(nt,"class","mr-1 svelte-ddyzwm"),f(rt,"class","svelte-ddyzwm"),f(D,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(ft,"class","svelte-ddyzwm"),f(pt,"class","flex-1 text-wrap"),f(gt,"class","mr-1 svelte-ddyzwm"),f(wt,"class","mr-1 svelte-ddyzwm"),f(kt,"class","svelte-ddyzwm"),f(dt,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(St,"class","flex-1"),it(Mt,"flex-basis","6rem"),f(Mt,"class","svelte-ddyzwm"),f(Nt,"class","ml-1 svelte-ddyzwm"),it(Nt,"flex-basis","6rem"),f(zt,"class","px-2 py-4 svelte-ddyzwm"),f(e,"class","flex flex-col items-stretch overflow-y-auto svelte-ddyzwm")},m(u,d){m(u,e,d),P(e,l),P(l,n),P(l,s),P(l,i),P(l,c),P(l,o),P(o,r),P(l,a),P(l,p),P(e,v),P(e,h),P(h,x),P(h,b),P(h,w),P(h,k),P(h,A),P(A,E),P(h,L),P(h,z),P(e,S),P(e,T),P(T,M),P(T,_),P(T,C),P(T,N),P(T,O),P(T,j),P(T,I),P(I,q),P(T,H),P(T,R),P(e,U),P(e,D),P(D,V),P(D,W),P(D,Y),P(D,X),P(D,tt),P(D,lt),P(D,nt),P(D,ot),P(D,rt),P(e,ut),P(e,dt),P(dt,ft),P(dt,mt),P(dt,pt),P(dt,vt),P(dt,gt),P(gt,ht),P(dt,bt),P(dt,wt),P(dt,yt),P(dt,kt),P(kt,At),P(e,Lt),P(e,zt),P(zt,St),P(zt,Tt),P(zt,Mt),P(zt,Ct),P(zt,Nt),qt=!0,Ft||(Pt=[B(i,"click",t[14]),B(p,"click",t[15]),B(w,"click",t[16]),B(z,"click",t[17]),B(O,"click",t[18]),B(R,"click",t[19]),K(et=Be.call(null,tt,.161===t[3])),B(tt,"click",t[20]),K(st=Be.call(null,nt,.2===t[3])),B(nt,"click",t[21]),K(at=Be.call(null,rt,.25===t[3])),B(rt,"click",t[22]),K(xt=Be.call(null,gt,"SMALL"===t[4])),B(gt,"click",t[23]),K($t=Be.call(null,wt,"BASE"===t[4])),B(wt,"click",t[24]),K(Et=Be.call(null,kt,"LARGE"===t[4])),B(kt,"click",t[25]),K(_t=Be.call(null,Mt,!1===t[6])),B(Mt,"click",t[26]),K(Ot=Be.call(null,Nt,!0===t[6])),B(Nt,"click",t[27])],Ft=!0)},p(e,[l]){t=e,(!qt||1&l)&&G(r,t[0]),(!qt||2&l)&&G(E,t[1]),(!qt||4&l)&&G(q,t[2]),et&&Q(et.update)&&8&l&&et.update.call(null,.161===t[3]),st&&Q(st.update)&&8&l&&st.update.call(null,.2===t[3]),at&&Q(at.update)&&8&l&&at.update.call(null,.25===t[3]),(!qt||32&l)&&Bt!==(Bt=t[5]?"SM":"SMALL")&&G(ht,Bt),xt&&Q(xt.update)&&16&l&&xt.update.call(null,"SMALL"===t[4]),$t&&Q($t.update)&&16&l&&$t.update.call(null,"BASE"===t[4]),(!qt||32&l)&&Ht!==(Ht=t[5]?"LG":"LARGE")&&G(At,Ht),Et&&Q(Et.update)&&16&l&&Et.update.call(null,"LARGE"===t[4]),_t&&Q(_t.update)&&64&l&&_t.update.call(null,!1===t[6]),Ot&&Q(Ot.update)&&64&l&&Ot.update.call(null,!0===t[6])},i(t){qt||($((()=>{It&&It.end(1),jt=y(e,ct,{delay:Fe}),jt.start()})),qt=!0)},o(t){jt&&jt.invalidate(),It=J(e,ct,{delay:0,duration:Pe}),qt=!1},d(t){t&&g(e),t&&It&&It.end(),Ft=!1,Z(Pt)}}}const Fe=200,Pe=100;function Be(t,e){return t.classList.toggle("active-button",e),{update(e){t.classList.toggle("active-button",e)}}}function He(t,e,l){let n,s,i,c,o,r,a;const{isMobile:u}=h("screen");x(t,u,(t=>l(5,r=t)));const d=Xt("limit");x(t,d,(t=>l(0,n=t)));const f=Xt("throttle");x(t,f,(t=>l(1,s=t)));const m=Xt("galleryCols");x(t,m,(t=>l(2,i=t)));const p=Xt("galleryImageSize");x(t,p,(t=>l(4,o=t)));const v=Xt("swipeDistance");x(t,v,(t=>l(3,c=t)));const g=Xt("nsfw");x(t,g,(t=>l(6,a=t)));return[n,s,i,c,o,r,a,u,d,f,m,p,v,g,()=>{n>5&&Kt("limit",n-5)},()=>{n<95&&Kt("limit",n+5)},()=>{s>1&&Kt("throttle",s-1)},()=>{s<5&&Kt("throttle",s+1)},()=>{i>1&&Kt("galleryCols",ot(i))},()=>{i<5&&Kt("galleryCols",rt(i))},()=>Kt("swipeDistance",.161),()=>Kt("swipeDistance",.2),()=>Kt("swipeDistance",.25),()=>Kt("galleryImageSize","SMALL"),()=>Kt("galleryImageSize","BASE"),()=>Kt("galleryImageSize","LARGE"),()=>Kt("nsfw",!1),()=>Kt("nsfw",!0)]}class Ge extends o{constructor(t){super(),r(this,t,He,qe,a,{})}}function Re(t,e,l){const n=t.slice();return n[18]=e[l],n}function Ue(t){let e,l,n,s,i=t[2],c=[];for(let o=0;o<i.length;o+=1)c[o]=De(Re(t,i,o));return{c(){e=u("section"),l=u("p"),l.textContent="Favorites",n=d(),s=u("div");for(let t=0;t<c.length;t+=1)c[t].c();f(l,"class","text-4xl font-medium"),f(s,"id","favorites"),f(s,"class","flex flex-row flex-wrap svelte-oxphnz"),f(e,"class","svelte-oxphnz")},m(t,i){m(t,e,i),P(e,l),P(e,n),P(e,s);for(let e=0;e<c.length;e+=1)c[e].m(s,null)},p(t,e){if(1540&e){let l;for(i=t[2],l=0;l<i.length;l+=1){const n=Re(t,i,l);c[l]?c[l].p(n,e):(c[l]=De(n),c[l].c(),c[l].m(s,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=i.length}},d(t){t&&g(e),lt(c,t)}}}function De(t){let e,l,n,s,i,c=t[18]+"";function o(){return t[11](t[18])}function r(){return t[12](t[18])}return{c(){e=u("button"),l=F(c),n=d(),f(e,"class","select-none svelte-oxphnz")},m(t,c){m(t,e,c),P(e,l),P(e,n),s||(i=[K(Je.call(null,e)),K(Ze.call(null,e)),B(e,"longpress",o),B(e,"click",r)],s=!0)},p(e,n){t=e,4&n&&c!==(c=t[18]+"")&&G(l,c)},d(t){t&&g(e),s=!1,Z(i)}}}function Ve(t){let e,l,n,s,i,c,o,r,a,p,v;return{c(){e=u("div"),l=u("button"),l.textContent="SAFE",s=d(),i=u("button"),i.textContent="UNSAFE",o=d(),r=u("button"),r.textContent="EXPLICIT",f(l,"class","svelte-oxphnz"),f(i,"class","svelte-oxphnz"),f(r,"class","svelte-oxphnz"),f(e,"id","rating-buttons"),f(e,"class","flex flex-row items-center justify-between svelte-oxphnz")},m(u,d){m(u,e,d),P(e,l),P(e,s),P(e,i),P(e,o),P(e,r),p||(v=[K(n=tl.call(null,l,"SAFE"===t[1])),B(l,"click",t[13]),K(c=tl.call(null,i,"UNSAFE"===t[1])),B(i,"click",t[14]),K(a=tl.call(null,r,"EXPLICIT"===t[1])),B(r,"click",t[15])],p=!0)},p(t,e){n&&Q(n.update)&&2&e&&n.update.call(null,"SAFE"===t[1]),c&&Q(c.update)&&2&e&&c.update.call(null,"UNSAFE"===t[1]),a&&Q(a.update)&&2&e&&a.update.call(null,"EXPLICIT"===t[1])},d(t){t&&g(e),p=!1,Z(v)}}}function We(t){let e,l,n,s,i,c,o,r,a,v,h,x,b,w,k=!at(t[2]),A=t[4]?"Searching...":"Search";n=new ut({props:{tags:t[0],onlyUnique:!0,allowBlur:!0}});let E=k&&Ue(t),L=t[3]&&Ve(t);return{c(){e=u("main"),l=u("div"),dt(n.$$.fragment),s=d(),i=u("div"),E&&E.c(),c=d(),L&&L.c(),o=d(),r=u("button"),a=F(A),f(l,"id","tags-input"),f(l,"class","svelte-oxphnz"),f(i,"class","flex-1 rounded overflow-y-auto"),f(r,"id","search-button"),f(r,"class","py-2 text-4xl rounded-lg svelte-oxphnz"),f(e,"class","flex flex-col items-stretch space-y-2 svelte-oxphnz")},m(u,d){m(u,e,d),P(e,l),ft(n,l,null),P(e,s),P(e,i),E&&E.m(i,null),P(e,c),L&&L.m(e,null),P(e,o),P(e,r),P(r,a),x=!0,b||(w=B(r,"click",t[8]),b=!0)},p(l,[s]){t=l;const c={};1&s&&(c.tags=t[0]),n.$set(c),4&s&&(k=!at(t[2])),k?E?E.p(t,s):(E=Ue(t),E.c(),E.m(i,null)):E&&(E.d(1),E=null),t[3]?L?L.p(t,s):(L=Ve(t),L.c(),L.m(e,o)):L&&(L.d(1),L=null),(!x||16&s)&&A!==(A=t[4]?"Searching...":"Search")&&G(a,A)},i(t){x||(p(n.$$.fragment,t),$((()=>{h&&h.end(1),v=y(e,ct,{delay:Ye}),v.start()})),x=!0)},o(t){V(n.$$.fragment,t),v&&v.invalidate(),h=J(e,ct,{delay:0,duration:Xe}),x=!1},d(t){t&&g(e),mt(n),E&&E.d(),L&&L.d(),t&&h&&h.end(),b=!1,w()}}}const Ye=200,Xe=100,Ke={SAFE:"rating:safe",UNSAFE:"rating:questionable",EXPLICIT:"rating:explicit"},Qe=I(["","rating:safe","rating:questionable","rating:explicit"]);function Je(t,e=1500){function l(){const l=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),e),n=()=>{clearTimeout(l),t.removeEventListener("mousemove",n),t.removeEventListener("mouseup",n)};t.addEventListener("mousemove",n),t.addEventListener("mouseup",n)}function n(){const l=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),e),n=()=>{clearTimeout(l),t.removeEventListener("touchmove",n),t.removeEventListener("touchend",n)};t.addEventListener("touchmove",n),t.addEventListener("touchend",n)}return t.addEventListener("mousedown",l),t.addEventListener("touchstart",n),{destroy(){t.removeEventListener("mousedown",l),t.removeEventListener("touchstart",n)}}}function Ze(t){function e(t){return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1}return t.addEventListener("oncontextmenu",e),{destroy(){t.removeEventListener("oncontextmenu",e)}}}function tl(t,e){return t.classList.toggle("active-button",e),{update(e){t.classList.toggle("active-button",e)}}}function el(t,e,l){let n,s,i,c;x(t,ie,(t=>l(4,i=t))),x(t,Yt,(t=>l(16,c=t)));const{tags:o}=Dt;x(t,o,(t=>l(2,n=t)));const r=W(),a=Xt("nsfw");x(t,a,(t=>l(3,s=t)));var u=Qe(c),d="";function f(t){l(1,d=d!==t?t:"")}function m(t){pt(t,u)||l(0,u=j(t,u))}function p(t){pt(t,n)&&vt(o,n=I([t],n),n)}b((()=>{document.querySelector(".svelte-tags-input").focus()}));return[u,d,n,s,i,o,a,f,async function(){if(i)return;const t=d?null==Ke?void 0:Ke[d]:"";r("search",[...u,s?t:"rating:safe"])},m,p,t=>p(t),t=>m(t),()=>f("SAFE"),()=>f("UNSAFE"),()=>f("EXPLICIT")]}class ll extends o{constructor(t){super(),r(this,t,el,We,a,{})}}const nl={tags:E("favorites:tags",[]),images:E("favorites:images",[])};function sl(t){const e=S(nl.tags);let l=e;l=O(M(t),e)?I([t],l):j(t,l),nl.tags.set(l)}function il(t){const e=S(nl.images);let l=e;const n=z(null,O(gt("id",t.id),e));l=n?I([n],l):j(t,l),nl.images.set(l)}nl.tags.subscribe((t=>Dt.tags.set(t))),nl.images.subscribe((t=>Dt.images.set(t)));function cl(t,e,l){const n=t.slice();return n[25]=e[l],n}function ol(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function rl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-3xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function al(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-4xl md:text-5xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function ul(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function dl(t){let e,l,n,s,i,c,o=t[8]?"":"Add";function r(){return t[22](t[25])}return{c(){e=u("button"),l=F(o),n=d(),s=u("i"),f(s,"class","ri-add-line text-4xl md:text-5xl"),f(e,"class","icon-button svelte-1pzovkq")},m(t,o){m(t,e,o),P(e,l),P(e,n),P(e,s),i||(c=B(e,"click",r),i=!0)},p(e,n){t=e,256&n&&o!==(o=t[8]?"":"Add")&&G(l,o)},d(t){t&&g(e),i=!1,c()}}}function fl(t){let e,l,n,s,i,c,o=t[8]?"":"Remove";function r(){return t[21](t[25])}return{c(){e=u("button"),l=F(o),n=d(),s=u("i"),f(s,"class","ri-subtract-line text-4xl md:text-5xl"),f(e,"class","icon-button svelte-1pzovkq")},m(t,o){m(t,e,o),P(e,l),P(e,n),P(e,s),i||(c=B(e,"click",r),i=!0)},p(e,n){t=e,256&n&&o!==(o=t[8]?"":"Remove")&&G(l,o)},d(t){t&&g(e),i=!1,c()}}}function ml(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-4xl md:text-5xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function pl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function vl(t){let e,l,n,s,i,c,o,r,a,p,v,h=t[25]+"";function x(t,e){return(null==i||96&e)&&(i=!!t[5](t[25])),i?fl:dl}let b=x(t,-1),w=b(t);function $(t,e){return(null==r||72&e)&&(r=!!t[3](t[25])),r?pl:ml}let y=$(t,-1),k=y(t);function A(){return t[23](t[25])}return{c(){e=u("div"),l=u("p"),n=F(h),s=d(),w.c(),c=d(),o=u("button"),k.c(),a=d(),f(l,"class","truncate flex-1 md:text-lg font-light svelte-1pzovkq"),f(o,"class","icon-button svelte-1pzovkq"),f(e,"class","p-4 flex flex-row rounded-lg items-center svelte-1pzovkq")},m(t,i){m(t,e,i),P(e,l),P(l,n),P(e,s),w.m(e,null),P(e,c),P(e,o),k.m(o,null),P(e,a),p||(v=B(o,"click",A),p=!0)},p(l,s){t=l,64&s&&h!==(h=t[25]+"")&&G(n,h),b===(b=x(t,s))&&w?w.p(t,s):(w.d(1),w=b(t),w&&(w.c(),w.m(e,c))),y!==(y=$(t,s))&&(k.d(1),k=y(t),k&&(k.c(),k.m(o,null)))},d(t){t&&g(e),w.d(),k.d(),p=!1,v()}}}function gl(t){let e,l,n;return{c(){e=u("button"),e.textContent="CLOSE",f(e,"id","close-button"),f(e,"class","tracking-wider svelte-1pzovkq")},m(s,i){m(s,e,i),l||(n=B(e,"click",t[24]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function hl(t){var e;let l,n,s,i,c,o,r,a,p,h,x,b,w,$,y,k,A,E,L,z,S,T,M,_,C,N,O,j,I,q,H,R=(null==(e=t[1])?void 0:e.artist)+"";function U(t,e){return t[4]?rl:ol}let D=U(t),V=D(t);function W(t,e){var l;return(null==N||10&e)&&(N=!!t[3](null==(l=t[1])?void 0:l.artist)),N?ul:al}let Y=W(t,-1),X=Y(t),K=t[6],Q=[];for(let u=0;u<K.length;u+=1)Q[u]=vl(cl(t,K,u));let J=t[0]&&gl(t);return{c(){var e,m,v;l=u("article"),n=u("div"),s=u("button"),V.c(),i=d(),c=u("a"),o=u("button"),r=u("i"),x=d(),b=u("button"),b.innerHTML='<i class="ri-file-copy-fill text-4xl"></i>',w=d(),$=u("a"),y=u("i"),A=d(),E=u("section"),L=u("div"),z=u("p"),z.textContent="Artist:",S=d(),T=u("p"),M=F(R),_=d(),C=u("button"),X.c(),O=d(),j=u("div");for(let t=0;t<Q.length;t+=1)Q[t].c();I=d(),J&&J.c(),f(s,"class","icon-button svelte-1pzovkq"),f(r,"class","ri-download-fill text-4xl cursor-pointer"),ht(r,"ri-loader-4-line",t[2]),ht(r,"animate-spin",t[2]),f(o,"class","icon-button svelte-1pzovkq"),f(c,"href",a=t[7]?null:null==(e=t[1])?void 0:e.file_url),f(c,"target",p=t[7]?null:"_blank"),f(c,"download",h=null==(m=t[1])?void 0:m.file_name),f(b,"class","icon-button svelte-1pzovkq"),f(y,"class","ri-phone-find-line text-4xl"),f($,"class","icon-button svelte-1pzovkq"),f($,"href",k=null==(v=t[1])?void 0:v.source),f($,"target","_blank"),f(n,"class","p-2 flex flex-row justify-between space-x-4 svelte-1pzovkq"),f(z,"class","text-lg"),f(T,"class","text-xl font-light"),f(L,"class","flex-1 flex flex-col"),f(C,"class","icon-button svelte-1pzovkq"),f(E,"class","p-4 flex flex-row svelte-1pzovkq"),f(j,"id","tags"),f(j,"class","flex flex-col svelte-1pzovkq"),f(l,"class","flex flex-col space-y-2 svelte-1pzovkq")},m(e,a){m(e,l,a),P(l,n),P(n,s),V.m(s,null),P(n,i),P(n,c),P(c,o),P(o,r),P(n,x),P(n,b),P(n,w),P(n,$),P($,y),P(l,A),P(l,E),P(E,L),P(L,z),P(L,S),P(L,T),P(T,M),P(E,_),P(E,C),X.m(C,null),P(l,O),P(l,j);for(let t=0;t<Q.length;t+=1)Q[t].m(j,null);P(l,I),J&&J.m(l,null),q||(H=[B(s,"click",t[19]),B(r,"click",t[14]),B(b,"click",t[15]),B(C,"click",t[20])],q=!0)},p(t,[e]){var n,i,o,u;if(D!==(D=U(t))&&(V.d(1),V=D(t),V&&(V.c(),V.m(s,null))),4&e&&ht(r,"ri-loader-4-line",t[2]),4&e&&ht(r,"animate-spin",t[2]),130&e&&a!==(a=t[7]?null:null==(n=t[1])?void 0:n.file_url)&&f(c,"href",a),128&e&&p!==(p=t[7]?null:"_blank")&&f(c,"target",p),2&e&&h!==(h=null==(i=t[1])?void 0:i.file_name)&&f(c,"download",h),2&e&&k!==(k=null==(o=t[1])?void 0:o.source)&&f($,"href",k),2&e&&R!==(R=(null==(u=t[1])?void 0:u.artist)+"")&&G(M,R),Y!==(Y=W(t,e))&&(X.d(1),X=Y(t),X&&(X.c(),X.m(C,null))),360&e){let l;for(K=t[6],l=0;l<K.length;l+=1){const n=cl(t,K,l);Q[l]?Q[l].p(n,e):(Q[l]=vl(n),Q[l].c(),Q[l].m(j,null))}for(;l<Q.length;l+=1)Q[l].d(1);Q.length=K.length}t[0]?J?J.p(t,e):(J=gl(t),J.c(),J.m(l,null)):J&&(J.d(1),J=null)},i:v,o:v,d(t){t&&g(l),V.d(),X.d(),lt(Q,t),J&&J.d(),q=!1,Z(H)}}}function xl(t,e,l){let n,s,i,c,o,r,a,u,d,f;x(t,Wt,(t=>l(1,o=t))),x(t,Yt,(t=>l(18,d=t)));const{tags:m,images:p}=Dt;x(t,m,(t=>l(16,a=t))),x(t,p,(t=>l(17,u=t)));const{isMobile:v,isNative:g}=h("screen");x(t,v,(t=>l(8,f=t))),x(t,g,(t=>l(7,r=t)));const b=W();let{closable:w=!1}=e;var $=!1;return t.$$set=t=>{"closable"in t&&l(0,w=t.closable)},t.$$.update=()=>{2&t.$$.dirty&&l(6,n=z([],null==o?void 0:o.tags)),262144&t.$$.dirty&&l(5,s=t=>pt(t,d)),131074&t.$$.dirty&&l(4,i=void 0!==O(gt("id",null==o?void 0:o.id),u)),65536&t.$$.dirty&&l(3,c=t=>pt(t,a))},[w,o,$,c,i,s,n,r,f,m,p,v,g,b,async function(){if(!r||$)return;let t=await Y.checkPermissions();if("granted"===t.publicStorage||(t=await Y.requestPermissions(),"granted"===t.publicStorage)){l(2,$=!0);try{await _.downloadFile({url:o.file_url,filePath:o.file_name,fileDirectory:"DOWNLOADS",method:"GET"})}catch(e){console.log(e)}l(2,$=!1)}},function(){xt.write({url:null==o?void 0:o.file_url})},a,u,d,()=>il(o),()=>sl(null==o?void 0:o.artist),t=>ue(t),t=>ue(t),t=>sl(t),()=>b("close")]}class bl extends o{constructor(t){super(),r(this,t,xl,hl,a,{closable:0})}}function wl(t){let e,l,n,s,i;return{c(){e=u("img"),w(e.src,l=$e(t[0]))||f(e,"src",l),f(e,"alt","current"),f(e,"class","svelte-azo6by")},m(l,c){m(l,e,c),t[31](e),s||(i=K(n=Te.call(null,e,[t[0],!0])),s=!0)},p(t,s){1&s[0]&&!w(e.src,l=$e(t[0]))&&f(e,"src",l),n&&Q(n.update)&&1&s[0]&&n.update.call(null,[t[0],!0])},d(l){l&&g(e),t[31](null),s=!1,i()}}}function $l(t){let e,l=t[0],n=Al(t);return{c(){n.c(),e=zt()},m(t,l){n.m(t,l),m(t,e,l)},p(t,s){1&s[0]&&a(l,l=t[0])?(n.d(1),n=Al(t),n.c(),n.m(e.parentNode,e)):n.p(t,s)},d(t){t&&g(e),n.d(t)}}}function yl(t){let e,l,n,s,i;return{c(){e=u("img"),w(e.src,l=we(t[0]))||f(e,"src",l),f(e,"alt","current"),f(e,"class","svelte-azo6by")},m(l,c){m(l,e,c),t[30](e),s||(i=K(n=Te.call(null,e,[t[0],!0])),s=!0)},p(t,s){1&s[0]&&!w(e.src,l=we(t[0]))&&f(e,"src",l),n&&Q(n.update)&&1&s[0]&&n.update.call(null,[t[0],!0])},d(l){l&&g(e),t[30](null),s=!1,i()}}}function kl(t){let e,l,n,s,i,c,o,r,a,p,v,h,x,b,y,k,A,E,L,z,S,T,M=!1,_=Math.floor(t[8])+"",C=Math.floor(t[7])+"";function N(){cancelAnimationFrame(c),l.paused||(c=St(N),M=!0),t[27].call(l)}return{c(){e=u("div"),l=u("video"),n=u("track"),s=u("source"),o=d(),r=u("div"),a=u("button"),a.innerHTML='<i class="ri-play-line text-5xl"></i>',p=d(),v=u("button"),v.innerHTML='<i class="ri-skip-forward-line text-5xl"></i>',h=d(),x=u("button"),x.innerHTML='<i class="ri-skip-back-line text-5xl"></i>',b=d(),y=u("div"),k=d(),A=u("p"),E=F(_),L=F(" / "),z=F(C),n.default=!0,f(n,"kind","captions"),w(s.src,i=$e(t[0]))||f(s,"src",i),f(l,"class","relative h-screen bg-black"),f(l,"width",t[4]),f(l,"height",t[12]),l.loop=!0,void 0===t[7]&&$((()=>t[28].call(l))),f(a,"class","w-16 h-16 z-10"),f(v,"class","w-16 h-16 z-10"),f(x,"class","w-16 h-16 z-10"),f(y,"class","flex-1"),f(A,"class","pb-2"),f(r,"id","video-buttons"),f(r,"class","fixed flex flex-row items-center pl-2 pr-4 z-10 svelte-azo6by")},m(i,c){m(i,e,c),P(e,l),P(l,n),P(l,s),t[26](l),P(e,o),P(e,r),P(r,a),P(r,p),P(r,v),P(r,h),P(r,x),P(r,b),P(r,y),P(r,k),P(r,A),P(A,E),P(A,L),P(A,z),S||(T=[K(Cl.call(null,l)),B(l,"timeupdate",N),B(l,"durationchange",t[28]),B(l,"click",t[29]),B(a,"click",t[19]),B(a,"touchend",t[19],{passive:!0}),B(v,"click",t[20]),B(v,"touchend",t[20],{passive:!0}),B(x,"click",t[21]),B(x,"touchend",t[21],{passive:!0})],S=!0)},p(t,e){1&e[0]&&!w(s.src,i=$e(t[0]))&&f(s,"src",i),16&e[0]&&f(l,"width",t[4]),4096&e[0]&&f(l,"height",t[12]),!M&&256&e[0]&&!isNaN(t[8])&&(l.currentTime=t[8]),M=!1,256&e[0]&&_!==(_=Math.floor(t[8])+"")&&G(E,_),128&e[0]&&C!==(C=Math.floor(t[7])+"")&&G(z,C)},d(l){l&&g(e),t[26](null),S=!1,Z(T)}}}function Al(t){let e;function l(t,e){var l;return(null==(l=t[11])?void 0:l[t[0].id])?kl:yl}let n=l(t),s=n(t);return{c(){s.c(),e=zt()},m(t,l){s.m(t,l),m(t,e,l)},p(t,i){n===(n=l(t))&&s?s.p(t,i):(s.d(1),s=n(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&g(e)}}}function El(t){let e,l,n,s,i,c,o,r,a,v,h,x,b,k,A,E;function L(t,e){var l;return(null==(l=t[0])?void 0:l.video)?$l:wl}let z=L(t),S=z(t);return x=new bl({props:{closable:!0}}),x.$on("close",t[33]),{c(){e=u("div"),l=u("div"),n=u("img"),i=d(),S.c(),c=d(),o=u("img"),v=d(),h=u("div"),dt(x.$$.fragment),f(n,"class","invisible svelte-azo6by"),f(n,"alt","previous"),w(n.src,s=we(t[5]))||f(n,"src",s),f(o,"class","invisible svelte-azo6by"),w(o.src,r=we(t[6]))||f(o,"src",r),f(o,"alt","next"),f(l,"id","carousel"),f(l,"class","flex flex-row w-[300vw] svelte-azo6by"),it(l,"transform","translate("+(-t[4]+t[10])+"px,"+t[9]+"px)"),f(e,"class","fixed top-0 left-0"),f(h,"id","info-container"),f(h,"style",b=t[3]?"":`transform:translateY(${t[12]+1.75*t[9]}px`),f(h,"class","svelte-azo6by")},m(s,r){m(s,e,r),P(e,l),P(l,n),P(l,i),S.m(l,null),P(l,c),P(l,o),t[32](l),m(s,v,r),m(s,h,r),ft(x,h,null),k=!0,A||(E=[K(_l.call(null,n)),K(_l.call(null,o)),K(t[18].call(null,e))],A=!0)},p(t,e){(!k||32&e[0]&&!w(n.src,s=we(t[5])))&&f(n,"src",s),z===(z=L(t))&&S?S.p(t,e):(S.d(1),S=z(t),S&&(S.c(),S.m(l,c))),(!k||64&e[0]&&!w(o.src,r=we(t[6])))&&f(o,"src",r),(!k||1552&e[0])&&it(l,"transform","translate("+(-t[4]+t[10])+"px,"+t[9]+"px)"),(!k||4616&e[0]&&b!==(b=t[3]?"":`transform:translateY(${t[12]+1.75*t[9]}px`))&&f(h,"style",b)},i(t){k||(a||$((()=>{a=y(e,wt,{y:1e3}),a.start()})),p(x.$$.fragment,t),k=!0)},o(t){V(x.$$.fragment,t),k=!1},d(l){l&&g(e),S.d(),t[32](null),l&&g(v),l&&g(h),mt(x),A=!1,Z(E)}}}const Ll=bt(M(0),(()=>null)),zl=t=>t>200&&t<315,Sl=t=>t>120&&t<200,Tl=t=>t>0&&t<60||t>315&&t<=360,Ml=t=>t>60&&t<120;function _l(t){setTimeout((()=>{t.classList.remove("invisible")}),300)}function Cl(t){null==t||t.play()}function Nl(t,e,l){let n,s,i,c,o,r,a,u,d,f,m;x(t,Vt,(t=>l(24,a=t))),x(t,be,(t=>l(11,f=t)));const p=W();let{image:v=null}=e;const{width:g,height:b}=h("screen");x(t,g,(t=>l(4,d=t))),x(t,b,(t=>l(12,m=t)));var w=null;const $=Xt("swipeDistance");x(t,$,(t=>l(25,u=t)));var y=null,k=null,E=null,L=!1;const S=A(null);x(t,S,(t=>l(23,r=t)));const T=At(0,{duration:50});function _(){o>n&&("DOWN"===r&&vt(T,o=0,o),"UP"===r&&(vt(T,o=0,o),l(3,L=!0)),"LEFT"===r&&p("imagechange",E),"RIGHT"===r&&p("imagechange",k),p("swipe",r)),vt(S,r=null,r),vt(T,o=0,o)}x(t,T,(t=>l(22,o=t)));var C=null;var O=0,j=0;return t.$$set=t=>{"image"in t&&l(0,v=t.image)},t.$$.update=()=>{if(33554448&t.$$.dirty[0]&&(n=z(120,Ll(d*u))),33554448&t.$$.dirty[0]&&(s=z(450,Ll(d*u*3))),16777217&t.$$.dirty[0]){const t=$t(M(v))(a);l(5,k=a[yt(t-1,0)]),l(6,E=a[kt(t+1,N(a))])}var e,f,m;12582912&t.$$.dirty[0]&&l(10,i="RIGHT"===r?o:"LEFT"===r?-o:0),12582912&t.$$.dirty[0]&&l(9,c="DOWN"===r?o:"UP"===r?-o:0),14&t.$$.dirty[0]&&(e=y,f=w,m=L,C&&e&&(m?C.unbind(f,"pan"):(C.bind(f,"pan",(function(t){const e=t.detail.data[0].directionFromOrigin,l=t.detail.data[0].distanceFromOrigin;let n=null;zl(e)?n="DOWN":Sl(e)?n="LEFT":Tl(e)?n="RIGHT":Ml(e)&&(n="UP"),n!==r?(vt(S,r=n,r),vt(T,o=0,o)):vt(T,o=l,o),l>s&&_()})),window.addEventListener("touchend",_))))},[v,w,y,L,d,k,E,O,j,c,i,f,m,g,b,$,S,T,function(t){if(t&&!C)return C=Et.Region(t),{destroy(){C.unbind(w,"pan"),window.removeEventListener("touchend",_),C=null}}},function(){(null==v?void 0:v.video)&&void 0!==y.paused&&((null==y?void 0:y.paused)?null==y||y.play():null==y||y.pause())},function(){(null==v?void 0:v.video)&&(null==y||y.pause(),l(2,y.currentTime=Math.min((null==y?void 0:y.currentTime)+5,O),y),null==y||y.play())},function(){(null==v?void 0:v.video)&&(null==y||y.pause(),l(2,y.currentTime=Math.max((null==y?void 0:y.currentTime)-5,0),y),null==y||y.play())},o,r,a,u,function(t){Lt[t?"unshift":"push"]((()=>{l(2,y=t)}))},function(){j=this.currentTime,l(8,j)},function(){O=this.duration,l(7,O)},t=>y.play(),function(t){Lt[t?"unshift":"push"]((()=>{l(2,y=t)}))},function(t){Lt[t?"unshift":"push"]((()=>{l(2,y=t)}))},function(t){Lt[t?"unshift":"push"]((()=>{l(1,w=t)}))},()=>{l(3,L=!1)}]}class Ol extends o{constructor(t){super(),r(this,t,Nl,El,a,{image:0},null,[-1,-1])}}const{window:jl}=Tt;function Il(t){let e,l,n,s,i,c;function o(t,e){return t[9]?Fl:ql}let r=o(t),a=r(t);return{c(){e=u("button"),a.c(),f(e,"id","backend-button"),f(e,"class","svelte-xfq11j")},m(l,n){m(l,e,n),a.m(e,null),s=!0,i||(c=B(e,"click",t[25]),i=!0)},p(l,n){r===(r=o(t=l))&&a?a.p(t,n):(a.d(1),a=r(t),a&&(a.c(),a.m(e,null)))},i(t){s||($((()=>{n&&n.end(1),l=y(e,ct,{delay:Ye}),l.start()})),s=!0)},o(t){l&&l.invalidate(),n=J(e,ct,{duration:Xe}),s=!1},d(t){t&&g(e),a.d(),t&&n&&n.end(),i=!1,c()}}}function ql(t){let e;return{c(){e=F(t[10])},m(t,l){m(t,e,l)},p(t,l){1024&l[0]&&G(e,t[10])},d(t){t&&g(e)}}}function Fl(t){let e;return{c(){e=u("i"),f(e,"class","ri-gallery-line text-3xl")},m(t,l){m(t,e,l)},p:v,d(t){t&&g(e)}}}function Pl(t){let e,l,n=t[1]&&Il(t);return{c(){e=u("section"),n&&n.c(),f(e,"slot","left"),f(e,"class","flex-1 flex flex-row")},m(t,s){m(t,e,s),n&&n.m(e,null),l=!0},p(t,l){t[1]?n?(n.p(t,l),2&l[0]&&p(n,1)):(n=Il(t),n.c(),p(n,1),n.m(e,null)):n&&(tt(),V(n,1,1,(()=>{n=null})),et())},i(t){l||(p(n),l=!0)},o(t){V(n),l=!1},d(t){t&&g(e),n&&n.d()}}}function Bl(t){let e;return{c(){e=u("i"),f(e,"class","ri-settings-2-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Hl(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Gl(t){let e;return{c(){e=u("i"),f(e,"class","ri-search-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Rl(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Ul(t){let e,l,n,s,i,c;function o(t,e){return t[5]?Hl:Bl}let r=o(t),a=r(t);function p(t,e){return t[1]?Rl:Gl}let v=p(t),h=v(t);return{c(){e=u("section"),l=u("div"),a.c(),n=d(),s=u("div"),h.c(),f(l,"id","settings-icon"),f(l,"class","svelte-xfq11j"),f(s,"id","search-icon"),f(s,"class","svelte-xfq11j"),f(e,"slot","right"),f(e,"class","flex flex-row space-x-2")},m(o,r){m(o,e,r),P(e,l),a.m(l,null),P(e,n),P(e,s),h.m(s,null),i||(c=[B(l,"click",t[18]),B(s,"click",t[19])],i=!0)},p(t,e){r!==(r=o(t))&&(a.d(1),a=r(t),a&&(a.c(),a.m(l,null))),v!==(v=p(t))&&(h.d(1),h=v(t),h&&(h.c(),h.m(s,null)))},d(t){t&&g(e),a.d(),h.d(),i=!1,Z(c)}}}function Dl(t){let e,l;return e=new Ie({props:{blur:t[1]||t[5]}}),e.$on("imageclick",t[26]),{c(){dt(e.$$.fragment)},m(t,n){ft(e,t,n),l=!0},p(t,l){const n={};34&l[0]&&(n.blur=t[1]||t[5]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){mt(e,t)}}}function Vl(t){let e,l,n,s,i=t[4]&&Dl(t);return{c(){e=u("article"),i&&i.c(),f(e,"class","flex-1 flex flex-col items-stretch svelte-xfq11j")},m(c,o){m(c,e,o),i&&i.m(e,null),l=!0,n||(s=K(t[21].call(null,e)),n=!0)},p(t,l){t[4]?i?(i.p(t,l),16&l[0]&&p(i,1)):(i=Dl(t),i.c(),p(i,1),i.m(e,null)):i&&(tt(),V(i,1,1,(()=>{i=null})),et())},i(t){l||(p(i),l=!0)},o(t){V(i),l=!1},d(t){t&&g(e),i&&i.d(),n=!1,s()}}}function Wl(t){let e,l;return e=new Ol({props:{image:t[0]}}),e.$on("imagechange",t[27]),e.$on("swipe",t[28]),{c(){dt(e.$$.fragment)},m(t,n){ft(e,t,n),l=!0},p(t,l){const n={};1&l[0]&&(n.image=t[0]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){mt(e,t)}}}function Yl(t){let e;return{c(){e=u("p"),e.textContent="No more images...",f(e,"class","text-3xl text-center pb-2")},m(t,l){m(t,e,l)},p:v,d(t){t&&g(e)}}}function Xl(t){let e,l,n;return{c(){e=u("button"),e.textContent="More",f(e,"id","more-button"),f(e,"class","mb-2 svelte-xfq11j")},m(s,i){m(s,e,i),l||(n=B(e,"click",t[29]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function Kl(t){let e,l,n;return l=new Ge({}),{c(){e=u("div"),dt(l.$$.fragment),f(e,"id","settings-menu"),f(e,"class","svelte-xfq11j")},m(t,s){m(t,e,s),ft(l,e,null),n=!0},i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){V(l.$$.fragment,t),n=!1},d(t){t&&g(e),mt(l)}}}function Ql(t){let e,l,n;return l=new ll({}),l.$on("search",t[20]),{c(){e=u("div"),dt(l.$$.fragment),f(e,"id","search-menu"),f(e,"class","svelte-xfq11j")},m(t,s){m(t,e,s),ft(l,e,null),n=!0},p:v,i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){V(l.$$.fragment,t),n=!1},d(t){t&&g(e),mt(l)}}}function Jl(t){let e,l,n;return{c(){e=u("button"),e.innerHTML='<i class="ri-arrow-up-line text-2xl text-black"></i>',f(e,"id","back-button"),f(e,"class","svelte-xfq11j")},m(s,i){m(s,e,i),l||(n=B(e,"click",t[30]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function Zl(t){let e,l,n,s,i,c,o,r,u,f,h,x,b=t[8];e=new he({props:{$$slots:{right:[Ul],left:[Pl]},$$scope:{ctx:t}}});let w=Vl(t),$=t[9]&&t[0]&&Wl(t);function y(t,e){return!t[3]||t[0]||t[1]||t[5]||t[11]||!t[7]?((null==i||427&e[0])&&(i=!(!t[3]||t[0]||t[1]||t[5]||t[7]||at(t[8]))),i?Yl:void 0):Xl}let k=y(t,[-1,-1]),A=k&&k(t),E=t[5]&&Kl(),L=t[1]&&Ql(t),z=t[6]&&!t[0]&&!t[1]&&!t[5]&&Jl(t);return{c(){dt(e.$$.fragment),l=d(),w.c(),n=d(),$&&$.c(),s=d(),A&&A.c(),c=d(),E&&E.c(),o=d(),L&&L.c(),r=d(),z&&z.c(),u=zt()},m(i,a){ft(e,i,a),m(i,l,a),w.m(i,a),m(i,n,a),$&&$.m(i,a),m(i,s,a),A&&A.m(i,a),m(i,c,a),E&&E.m(i,a),m(i,o,a),L&&L.m(i,a),m(i,r,a),z&&z.m(i,a),m(i,u,a),f=!0,h||(x=B(jl,"keyup",t[22]),h=!0)},p(t,l){const i={};1570&l[0]|256&l[1]&&(i.$$scope={dirty:l,ctx:t}),e.$set(i),256&l[0]&&a(b,b=t[8])?(tt(),V(w,1,1,v),et(),w=Vl(t),w.c(),p(w),w.m(n.parentNode,n)):w.p(t,l),t[9]&&t[0]?$?($.p(t,l),513&l[0]&&p($,1)):($=Wl(t),$.c(),p($,1),$.m(s.parentNode,s)):$&&(tt(),V($,1,1,(()=>{$=null})),et()),k===(k=y(t,l))&&A?A.p(t,l):(A&&A.d(1),A=k&&k(t),A&&(A.c(),A.m(c.parentNode,c))),t[5]?E?32&l[0]&&p(E,1):(E=Kl(),E.c(),p(E,1),E.m(o.parentNode,o)):E&&(tt(),V(E,1,1,(()=>{E=null})),et()),t[1]?L?(L.p(t,l),2&l[0]&&p(L,1)):(L=Ql(t),L.c(),p(L,1),L.m(r.parentNode,r)):L&&(tt(),V(L,1,1,(()=>{L=null})),et()),!t[6]||t[0]||t[1]||t[5]?z&&(z.d(1),z=null):z?z.p(t,l):(z=Jl(t),z.c(),z.m(u.parentNode,u))},i(t){f||(p(e.$$.fragment,t),p(w),p($),p(E),p(L),f=!0)},o(t){V(e.$$.fragment,t),V(w),V($),V(E),V(L),f=!1},d(t){mt(e,t),t&&g(l),w.d(t),t&&g(n),$&&$.d(t),t&&g(s),A&&A.d(t),t&&g(c),E&&E.d(t),t&&g(o),L&&L.d(t),t&&g(r),z&&z.d(t),t&&g(u),h=!1,x()}}}const tn=A(0);function en(t,e,l){let n,s,i,c,o,r,a,u,d,f,m=v;x(t,tn,(t=>l(32,s=t))),x(t,Vt,(t=>l(33,i=t))),x(t,oe,(t=>l(7,c=t))),x(t,Yt,(t=>l(8,o=t))),x(t,Wt,(t=>l(35,u=t))),x(t,ie,(t=>l(11,f=t))),t.$$.on_destroy.push((()=>m()));const{images:p}=Dt;x(t,p,(t=>l(34,t)));const{height:g,isMobile:b}=h("screen");x(t,g,(t=>l(24,a=t))),x(t,b,(t=>l(9,r=t)));const{navigate:w}=h("navigator"),$=Xt("backend");x(t,$,(t=>l(10,d=t)));var y=!1,k=null,A=0,E=u,L=!1,z=!0,T=!1,M=!1;function _(t){l(4,z=!1),l(1,M=!1),l(5,T=!1),setTimeout((()=>w(t)),500)}function C(t){l(0,E=t),r||_("Image")}return t.$$.update=()=>{1&t.$$.dirty[0]&&vt(Wt,u=E,u),25165824&t.$$.dirty[0]&&l(6,n=A>a),3&t.$$.dirty[0]&&document.body.classList.toggle("noscroll",M||null!==E)},[E,M,k,L,z,T,n,c,o,r,d,f,p,g,b,$,_,C,function(){l(1,M=!1),setTimeout((()=>{l(5,T=!T)}),Pe)},function(){window.scrollTo(0,0),l(5,T=!1),setTimeout((()=>{l(1,M=!M)}),Pe)},async function(t){const e=t.detail;k.getScrollElement().scrollTop=0,vt(Vt,i=[],i),await async function(t){return new Promise((e=>setTimeout(e,t)))}(210),await async function(t){if(S(ie))return!1;const e=se[S(ae)];ce.set(0),oe.set(!1),Vt.set([]),ie.set(!0);const[l,n]=await e.fetchImages(t,{page:S(ce),limit:S(re)});return ie.set(!1),Yt.set(t),Vt.set(n),N(n)>0&&oe.set(!0),l}(e)&&l(1,M=!1)},function(t){function e(){l(23,A=k.getScrollElement().scrollTop);const t=k.getScrollElement().scrollHeight;Math.abs(window.innerHeight-Jt(6.5)+A-t)<Jt(6)||t>0&&t<window.innerHeight?l(3,L=!0):l(3,L=!1),vt(tn,s=A,s)}l(2,k=new Mt(t)),k.getScrollElement().scrollTop=s,k.getScrollElement().addEventListener("scroll",e),Vt.subscribe((async()=>{k.recalculate(),await _t(),e()}))},function(t){"Escape"===t.key&&(M&&l(1,M=!1),T?l(5,T=!1):async function(){if(y)return;y=!0,vt(Vt,i=[],i),l(5,T=!1),l(1,M=!1);const t=Math.max(200,T?200+Pe:0,M?200+Xe:0);setTimeout((()=>_("Start")),t+10)}())},A,a,()=>_("Backends"),t=>C(t.detail),t=>{const e=t.detail;l(0,E=e)},t=>{"DOWN"===t.detail&&l(0,E=null)},()=>{l(3,L=!1),async function(){if(!S(oe))return!1;if(S(ie))return!1;const t=se[S(ae)];ie.set(!0),ce.update((t=>t+1));const[e,l]=await t.fetchImages(S(Yt),{page:S(ce),limit:S(re)});l&&(null==l?void 0:l.length)<1&&oe.set(!1),ie.set(!1),Vt.set([...S(Vt),...l])}()},()=>{k.getScrollElement().scrollTo(0,0)}]}function ln(t,e,l){const n=t.slice();return n[8]=e[l],n}function nn(t){let e,l,n,s,i,c;function o(){return t[7](t[8])}return{c(){e=u("img"),f(e,"class","object-contain transform hover:scale-110 svelte-u94g43"),w(e.src,l=we(t[8]))||f(e,"src",l),f(e,"alt","adjacent")},m(l,r){m(l,e,r),i||(c=[K(n=Te.call(null,e,[t[8]])),K(s=cn.call(null,e,t[8]===t[0])),B(e,"click",o)],i=!0)},p(i,c){t=i,2&c&&!w(e.src,l=we(t[8]))&&f(e,"src",l),n&&Q(n.update)&&2&c&&n.update.call(null,[t[8]]),s&&Q(s.update)&&3&c&&s.update.call(null,t[8]===t[0])},d(t){t&&g(e),i=!1,Z(c)}}}function sn(t){let e,l=t[1],n=[];for(let s=0;s<l.length;s+=1)n[s]=nn(ln(t,l,s));return{c(){e=u("div");for(let t=0;t<n.length;t+=1)n[t].c();f(e,"id","images"),f(e,"class","flex flex-row lg:flex-col rounded-lg svelte-u94g43")},m(t,l){m(t,e,l);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(t,[s]){if(7&s){let i;for(l=t[1],i=0;i<l.length;i+=1){const c=ln(t,l,i);n[i]?n[i].p(c,s):(n[i]=nn(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},i:v,o:v,d(t){t&&g(e),lt(n,t)}}}function cn(t,e){return t.classList.toggle("active-queue-image",e),{update(e){t.classList.toggle("active-queue-image",e)}}}function on(t,e,l){let n,s,i,c;x(t,Vt,(t=>l(5,s=t))),x(t,Wt,(t=>l(0,i=t)));const o=W();var r=[];const{height:a}=h("screen");x(t,a,(t=>l(6,c=t)));return t.$$.update=()=>{if(64&t.$$.dirty&&l(4,n=c<1050?4:5),49&t.$$.dirty){const t=$t(M(i))(s);let e=1,c=0,o=0;for(;e<s.length&&c+o<n&&(z(null,null==s?void 0:s[t+e])&&++o,c+o!==n);)z(null,null==s?void 0:s[t-e])&&++c,++e;o<=2&&(--c,++o);const a=yt(0,t-c),u=kt(s.length,t+o);l(1,r=Ct(a,u,s))}},[i,r,o,a,n,s,c,t=>o("imagechange",t)]}class rn extends o{constructor(t){super(),r(this,t,on,sn,a,{})}}function an(t){let e,l,n,s,i,c,o,r,a,p,v,h=t[5]+1+"",x=t[2].length+"";return{c(){e=u("section"),l=u("button"),l.innerHTML='<i class="ri-arrow-left-s-line text-4xl md:text-5xl"></i>',n=d(),s=u("button"),s.innerHTML='<i class="ri-arrow-right-s-line text-4xl md:text-5xl"></i>',i=d(),c=u("p"),o=F(h),r=F(" / "),a=F(x),f(l,"id","previous-image-button"),f(s,"id","next-image-button"),f(c,"id","index-indicator"),f(c,"class","ml-4 text-3xl text-center svelte-19526fs"),f(e,"slot","right"),f(e,"class","flex flex-row items-center")},m(u,d){m(u,e,d),P(e,l),P(e,n),P(e,s),P(e,i),P(e,c),P(c,o),P(c,r),P(c,a),p||(v=[B(l,"click",t[12]),B(s,"click",t[11])],p=!0)},p(t,e){32&e&&h!==(h=t[5]+1+"")&&G(o,h),4&e&&x!==(x=t[2].length+"")&&G(a,x)},d(t){t&&g(e),p=!1,Z(v)}}}function un(t){let e,l,n,s,i,c,o,r,a;return{c(){var c,o,r;e=u("img"),f(e,"id","main-image"),f(e,"style",l=t[4]?"filter: blur(12px)":""),f(e,"width",n=null==(c=t[1])?void 0:c.width),f(e,"height",s=null==(o=t[1])?void 0:o.height),w(e.src,i=null==(r=t[1])?void 0:r.thumbnail_url)||f(e,"src",i),f(e,"alt","main"),f(e,"class","svelte-19526fs")},m(l,n){m(l,e,n),r||(a=K(c=Te.call(null,e,[t[1],!0])),r=!0)},p(t,o){var r,a,u;16&o&&l!==(l=t[4]?"filter: blur(12px)":"")&&f(e,"style",l),2&o&&n!==(n=null==(r=t[1])?void 0:r.width)&&f(e,"width",n),2&o&&s!==(s=null==(a=t[1])?void 0:a.height)&&f(e,"height",s),2&o&&!w(e.src,i=null==(u=t[1])?void 0:u.thumbnail_url)&&f(e,"src",i),c&&Q(c.update)&&2&o&&c.update.call(null,[t[1],!0])},i(t){o||$((()=>{o=y(e,ct,{}),o.start()}))},o:v,d(t){t&&g(e),r=!1,a()}}}function dn(t){let e,l,n,s,i,c;return{c(){var o,r;e=u("video"),l=u("track"),n=u("source"),l.default=!0,f(l,"kind","captions"),w(n.src,s=$e(t[1]))||f(n,"src",s),f(n,"type","video/webm"),f(e,"id","main-image"),f(e,"width",i=null==(o=t[1])?void 0:o.width),f(e,"height",c=null==(r=t[1])?void 0:r.height),e.controls=!0,f(e,"class","svelte-19526fs")},m(s,i){m(s,e,i),P(e,l),P(e,n),t[16](e)},p(t,l){var o,r;2&l&&!w(n.src,s=$e(t[1]))&&f(n,"src",s),2&l&&i!==(i=null==(o=t[1])?void 0:o.width)&&f(e,"width",i),2&l&&c!==(c=null==(r=t[1])?void 0:r.height)&&f(e,"height",c)},i:v,o:v,d(l){l&&g(e),t[16](null)}}}function fn(t){let e,l,n,s;return l=new rn({}),l.$on("imagechange",t[17]),{c(){e=u("div"),dt(l.$$.fragment),f(e,"id","images-queue"),f(e,"class","svelte-19526fs")},m(t,n){m(t,e,n),ft(l,e,null),s=!0},p(e,l){t=e},i(t){s||(p(l.$$.fragment,t),$((()=>{n||(n=Nt(e,wt,{delay:0,duration:bn,y:300},!0)),n.run(1)})),s=!0)},o(t){V(l.$$.fragment,t),n||(n=Nt(e,wt,{delay:0,duration:bn,y:300},!1)),n.run(0),s=!1},d(t){t&&g(e),mt(l),t&&n&&n.end()}}}function mn(t){let e,l,n,s,i;return l=new bl({}),{c(){e=u("div"),dt(l.$$.fragment),f(e,"id","image-info"),f(e,"class","svelte-19526fs")},m(t,n){m(t,e,n),ft(l,e,null),i=!0},p(t,e){},i(t){i||(p(l.$$.fragment,t),$((()=>{s&&s.end(1),n=y(e,wt,{delay:wn,duration:$n,y:1e3}),n.start()})),i=!0)},o(t){V(l.$$.fragment,t),n&&n.invalidate(),s=J(e,wt,{delay:0,duration:$n,y:1e3}),i=!1},d(t){t&&g(e),mt(l),t&&s&&s.end()}}}function pn(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function vn(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-3xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function gn(t){let e;return{c(){e=u("i"),f(e,"class","ri-information-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function hn(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function xn(t){let e,l,n,s,i,c,o,r,a,v,h,x;function b(t,e){var l,n,s;return(null==(l=t[1])?void 0:l.video)&&(null==(s=t[7])?void 0:s[null==(n=t[1])?void 0:n.id])?dn:un}e=new he({props:{$$slots:{right:[an]},$$scope:{ctx:t}}}),e.$on("back",t[9]);let w=b(t),$=w(t),y=t[3]&&!t[4]&&fn(t),k=t[4]&&mn();function A(t,e){return t[6]?vn:pn}let E=A(t),L=E(t);function z(t,e){return t[4]?hn:gn}let S=z(t),T=S(t);return{c(){dt(e.$$.fragment),l=d(),n=u("main"),$.c(),s=d(),y&&y.c(),i=d(),k&&k.c(),c=d(),o=u("button"),L.c(),r=d(),a=u("button"),T.c(),f(o,"id","favorite-button"),f(o,"class","absolute bottom-0 left-0 ml-6 mb-6 py-6 px-8 rounded-3xl svelte-19526fs"),f(a,"id","info-button"),f(a,"class","absolute bottom-0 right-0 mr-6 mb-6 py-6 px-8 rounded-3xl svelte-19526fs"),f(n,"class","flex flex-col lg:flex-row px-4 overflow-hidden svelte-19526fs")},m(u,d){ft(e,u,d),m(u,l,d),m(u,n,d),$.m(n,null),P(n,s),y&&y.m(n,null),P(n,i),k&&k.m(n,null),P(n,c),P(n,o),L.m(o,null),P(n,r),P(n,a),T.m(a,null),v=!0,h||(x=[B(window,"keyup",t[13]),B(o,"click",t[18]),B(a,"click",t[19])],h=!0)},p(t,[l]){const r={};4194340&l&&(r.$$scope={dirty:l,ctx:t}),e.$set(r),w===(w=b(t))&&$?$.p(t,l):($.d(1),$=w(t),$&&($.c(),p($,1),$.m(n,s))),t[3]&&!t[4]?y?(y.p(t,l),24&l&&p(y,1)):(y=fn(t),y.c(),p(y,1),y.m(n,i)):y&&(tt(),V(y,1,1,(()=>{y=null})),et()),t[4]?k?(k.p(t,l),16&l&&p(k,1)):(k=mn(),k.c(),p(k,1),k.m(n,c)):k&&(tt(),V(k,1,1,(()=>{k=null})),et()),E!==(E=A(t))&&(L.d(1),L=E(t),L&&(L.c(),L.m(o,null))),S!==(S=z(t))&&(T.d(1),T=S(t),T&&(T.c(),T.m(a,null)))},i(t){v||(p(e.$$.fragment,t),p($),p(y),p(k),v=!0)},o(t){V(e.$$.fragment,t),V(y),V(k),v=!1},d(t){mt(e,t),t&&g(l),t&&g(n),$.d(),y&&y.d(),k&&k.d(),L.d(),T.d(),h=!1,Z(x)}}}const bn=200,wn=300,$n=200;function yn(t,e,l){let n,s,i,c,o,r,a;x(t,Wt,(t=>l(1,i=t))),x(t,Vt,(t=>l(2,c=t))),x(t,be,(t=>l(7,a=t)));const{images:u}=Dt;x(t,u,(t=>l(14,o=t)));const{navigate:d}=h("navigator");async function f(){l(4,v=!1),l(3,p=!1),setTimeout((()=>{vt(Wt,i=null,i),d("Gallery")}),bn)}h("events");const{isMobile:m}=h("screen");x(t,m,(t=>l(15,r=t)));var p=!0,v=!1;function g(){vt(Wt,i=c[kt(s+1,c.length-1)],i)}function b(){vt(Wt,i=c[yt(s-1,0)],i)}var w=null;return t.$$.update=()=>{32768&t.$$.dirty&&r&&f(),16386&t.$$.dirty&&l(6,n=void 0!==O(gt("id",null==i?void 0:i.id),o)),6&t.$$.dirty&&l(5,s=$t(M(i))(c)),3&t.$$.dirty&&(null==i?void 0:i.video)&&(null==w||w.load())},[w,i,c,p,v,s,n,a,u,f,m,g,b,function(t){const e=t.key;"Escape"===e&&f(),"ArrowLeft"!==e&&"j"!==e||b(),"ArrowRight"!==e&&"k"!==e||g()," "===e&&g()},o,r,function(t){Lt[t?"unshift":"push"]((()=>{l(0,w=t)}))},t=>{vt(Wt,i=t.detail,i)},()=>il(i),()=>{l(4,v=!v)}]}function kn(t,e,l){const n=t.slice();return n[5]=e[l][0],n[6]=e[l][1],n}function An(t){let e,l,n,s,i,c,o,r,a,p,v,h,x,b,w,$,y,k,A,E,L,z=Ln(t[6],t[0])?"AVAILABLE":"UNAVAILABLE",S=t[5]+"",T=Ln(t[6],"web")?"✓":"✗",M=Ln(t[6],"native")?"✓":"✗";function _(){return t[3](t[5])}return{c(){e=u("button"),l=u("p"),n=F(z),s=d(),i=u("p"),c=F(S),o=d(),r=u("p"),r.textContent="Supported platforms:",a=d(),p=u("div"),v=u("p"),h=F("WEB: "),x=F(T),b=d(),w=u("p"),$=F("NATIVE: "),y=F(M),k=d(),f(l,"class","absolute top-0 right-0 pt-6 pr-6"),f(i,"class","pb-2 text-2xl"),f(r,"class","text-lg"),f(p,"class","pt-1 flex flex-row space-x-4"),f(e,"data-supported",A=Ln(t[6],t[0])),f(e,"class","svelte-1vjqs3k")},m(t,u){m(t,e,u),P(e,l),P(l,n),P(e,s),P(e,i),P(i,c),P(e,o),P(e,r),P(e,a),P(e,p),P(p,v),P(v,h),P(v,x),P(p,b),P(p,w),P(w,$),P(w,y),P(e,k),E||(L=B(e,"click",_),E=!0)},p(l,s){t=l,1&s&&z!==(z=Ln(t[6],t[0])?"AVAILABLE":"UNAVAILABLE")&&G(n,z),1&s&&A!==(A=Ln(t[6],t[0]))&&f(e,"data-supported",A)},d(t){t&&g(e),E=!1,L()}}}function En(t){let e,l,n,s,i,c,o;e=new he({}),e.$on("back",t[1]);let r=Object.entries(se),a=[];for(let u=0;u<r.length;u+=1)a[u]=An(kn(t,r,u));return{c(){dt(e.$$.fragment),l=d(),n=u("main"),s=u("div");for(let t=0;t<a.length;t+=1)a[t].c();i=d(),c=u("button"),c.textContent="Help",f(s,"id","backends"),f(s,"class","flex flex-col space-y-2 svelte-1vjqs3k"),f(c,"class","text-2xl svelte-1vjqs3k"),f(n,"class","flex flex-col svelte-1vjqs3k")},m(t,r){ft(e,t,r),m(t,l,r),m(t,n,r),P(n,s);for(let e=0;e<a.length;e+=1)a[e].m(s,null);P(n,i),P(n,c),o=!0},p(t,[e]){if(5&e){let l;for(r=Object.entries(se),l=0;l<r.length;l+=1){const n=kn(t,r,l);a[l]?a[l].p(n,e):(a[l]=An(n),a[l].c(),a[l].m(s,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=r.length}},i(t){o||(p(e.$$.fragment,t),o=!0)},o(t){V(e.$$.fragment,t),o=!1},d(t){mt(e,t),t&&g(l),t&&g(n),lt(a,t)}}}const Ln=(t,e)=>pt(e,z([],null==t?void 0:t.PLATFORMS));function zn(t,e,l){const{navigate:n}=h("navigator");let s=null;function i(){n("Gallery")}function c(t){Kt("backend",t),i()}b((async()=>{"web"===(await Ot.getInfo()).platform?l(0,s="web"):l(0,s="native")}));return[s,i,c,t=>c(t)]}var Sn={Start:{NAME:"Start",COMPONENT:class extends o{constructor(t){super(),r(this,t,Gt,Bt,a,{})}}},Gallery:{NAME:"Gallery",COMPONENT:class extends o{constructor(t){super(),r(this,t,en,Zl,a,{},null,[-1,-1])}}},Image:{NAME:"Image",COMPONENT:class extends o{constructor(t){super(),r(this,t,yn,xn,a,{})}}},Backends:{NAME:"Backends",COMPONENT:class extends o{constructor(t){super(),r(this,t,zn,En,a,{})}}}};const Tn=A(null),Mn=A([]),_n=A({}),Cn=A({}),Nn=A({});function On(t,e){if(S(Tn)){const e=Object.entries(S(_n)),l=Object.entries(S(Nn));for(const[t,s]of l)"function"==typeof s.clear&&s.clear();const n={};for(const[s,i]of e)n[s]=new jn(t,i);Nn.set(n)}e&&S(Mn).push("StartView");const l=S(Cn);Tn.set(l[t])}class jn{constructor(t,e){this.view=t,this.emitter=e,this.listeners=[]}on(t,e){this.listeners.push([t,e]),this.emitter.on(t,e)}clear(){const t=this.listeners;for(const[e,l]of t)this.emitter.removeListener(e,l)}}function In(t){var e;let l,n,s,i,c;$(t[6]);var o=null==(e=t[2])?void 0:e.COMPONENT;return o&&(n=new o({})),{c(){l=u("main"),n&&dt(n.$$.fragment),f(l,"class","relative flex flex-col svelte-15zbi46")},m(e,o){m(e,l,o),n&&ft(n,l,null),s=!0,i||(c=B(window,"resize",t[6]),i=!0)},p(t,[e]){var s;if(o!==(o=null==(s=t[2])?void 0:s.COMPONENT)){if(n){tt();const t=n;V(t.$$.fragment,1,0,(()=>{mt(t,1)})),et()}o?(n=new o({}),dt(n.$$.fragment),p(n.$$.fragment,1),ft(n,l,null)):n=null}},i(t){s||(n&&p(n.$$.fragment,t),s=!0)},o(t){n&&V(n.$$.fragment,t),s=!1},d(t){t&&g(l),n&&mt(n),i=!1,c()}}}function qn(t,e,l){let n,s,i,c;var o,r;x(t,Tn,(t=>l(2,c=t))),o=It,r=Sn,_n.set(o),Cn.set(r);const a=A(0);x(t,a,(t=>l(0,n=t)));const u=A(0);x(t,u,(t=>l(1,i=t)));const d=A(!1);x(t,d,(t=>l(7,s=t)));const f=A(!1);return jt("screen",{width:a,height:u,isMobile:d,isNative:f}),jt("navigator",{currentScreen:Tn,navigate:On}),jt("events",Nn),b((async()=>{const t=await Ot.getInfo();"android"===(null==t?void 0:t.operatingSystem)&&f.set(!0),On("Start")})),t.$$.update=()=>{1&t.$$.dirty&&vt(d,s=n<768,s)},[n,i,c,a,u,d,function(){a.set(n=window.innerWidth),u.set(i=window.innerHeight)}]}new class extends o{constructor(t){super(),r(this,t,qn,In,a,{})}}({target:document.getElementById("app")});
