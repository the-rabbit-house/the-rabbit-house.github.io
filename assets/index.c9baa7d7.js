var t=Object.defineProperty,e=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,c=(e,l,n)=>l in e?t(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n;import{S as o,i as a,s as r,e as u,a as d,b as f,c as m,t as p,n as v,d as g,g as h,f as x,o as b,h as w,j as y,k as $,l as k,w as E,m as z,p as A,q as L,r as S,u as T,v as _,H as M,x as C,y as q,z as N,A as O,B as j,C as I,D as F,E as P,F as H,G as B,I as G,J as R,K as U,L as D,M as Y,N as W,O as Q,P as V,Q as X,R as K,T as J,U as Z,V as tt,W as et,X as lt,Y as nt,Z as st,_ as it,$ as ct,a0 as ot,a1 as at,a2 as rt,a3 as ut,a4 as dt,a5 as ft,a6 as mt,a7 as pt,a8 as vt,a9 as gt,aa as ht,ab as xt,ac as bt,ad as wt,ae as yt,af as $t,ag as kt,ah as Et,ai as zt,aj as At,ak as Lt,al as St,am as Tt,an as _t,ao as Mt,ap as Ct,aq as qt,ar as Nt,as as Ot,at as jt,au as It,av as Ft,aw as Pt,ax as Ht}from"./vendor.157fa2b5.js";var Bt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),Gt="/assets/tippy.ac9e6991.png";function Rt(t){let e,l;return{c(){e=u("img"),f(e,"class","hidden"),w(e.src,l=Gt)||f(e,"src","/assets/tippy.ac9e6991.png"),f(e,"alt","tippy-hidden")},m(t,l){m(t,e,l)},p:v,i:v,o:v,d(t){t&&g(e)}}}function Ut(t){let e,l,n;return{c(){e=u("img"),f(e,"class","self-center w-40 h-32"),w(e.src,l=Gt)||f(e,"src","/assets/tippy.ac9e6991.png"),f(e,"alt","tippy")},m(t,l){m(t,e,l)},p:v,i(t){n||y((()=>{n=$(e,Yt,{}),n.start()}))},o:v,d(t){t&&g(e)}}}function Dt(t){let e,l,n,s,i,c,o,a;function r(t,e){return t[0]?Ut:Rt}let h=r(t),x=h(t);return{c(){e=u("nav"),e.innerHTML='<p class="flex-1 text-5xl font-light">chino</p> \n  <a href="https://github.com/the-rabbit-house/chino"><i class="ri-github-fill text-5xl"></i></a>',l=d(),n=u("div"),s=d(),x.c(),i=d(),c=u("div"),o=d(),a=u("p"),a.textContent="Brewing the coffee..",f(e,"class","px-6 pt-2 h-20 flex flex-row items-center"),f(n,"class","flex-1"),f(c,"class","flex-1"),f(a,"class","pb-6 text-2xl font-light text-center")},m(t,r){m(t,e,r),m(t,l,r),m(t,n,r),m(t,s,r),x.m(t,r),m(t,i,r),m(t,c,r),m(t,o,r),m(t,a,r)},p(t,[e]){h===(h=r(t))&&x?x.p(t,e):(x.d(1),x=h(t),x&&(x.c(),p(x,1),x.m(i.parentNode,i)))},i(t){p(x)},o:v,d(t){t&&g(e),t&&g(l),t&&g(n),t&&g(s),x.d(t),t&&g(i),t&&g(c),t&&g(o),t&&g(a)}}}function Yt(t,e){return{delay:0,duration:1e3,easing:k,css:(t,e)=>`transform: rotate(${360*t}deg);`}}function Wt(t,e,l){let n;const{navigate:s}=h("navigator"),{isNative:i}=h("screen");x(t,i,(t=>l(2,n=t)));var c=!1;return b((()=>{if(l(0,c=!0),n){document.querySelector("meta[name=viewport]").setAttribute("content",`width=device-width, height=${window.innerHeight}, initial-scale=1.0, user-scalable=0`)}setTimeout((()=>s("Gallery")),1e3)})),[c,i]}const Qt={backend:"danbooru",limit:20,throttle:1,galleryCols:3,galleryImageSize:"BASE",swipeDistance:.2,useSourceQuality:!1,nsfw:!1},Vt=z("settings",Qt),Xt={tags:E([]),images:E([])},Kt=E([]),Jt=E(null),Zt=E([]),te=E([]),ee=function(t){return A(Vt,(e=>L(Qt[t],null==e?void 0:e[t])))},le=function(t,o){const a=(r=((t,e)=>{for(var l in e||(e={}))s.call(e,l)&&c(t,l,e[l]);if(n)for(var l of n(e))i.call(e,l)&&c(t,l,e[l]);return t})({},S(Vt)),e(r,l({[t]:o})));var r;Vt.set(a)};function ne(t=8e3){const e=new AbortController,l=e.signal;return setTimeout((()=>e.abort()),t),l}function se(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}const ie=T([_("zip"),_("webm"),_("mp4")]);function ce(t){const e=[];for(const l of t){if(!(null==l?void 0:l.file_url))continue;const t=null==l?void 0:l.file_ext,n={id:null==l?void 0:l.md5,file_name:(null==l?void 0:l.md5)+"."+(null==l?void 0:l.file_ext)||"",file_ext:t,source:null==l?void 0:l.source,artist:null==l?void 0:l.tag_string_artist,thumbnail_url:null==l?void 0:l.preview_file_url,file_url:ie(t)?null==l?void 0:l.large_file_url:null==l?void 0:l.file_url,sample_url:null==l?void 0:l.large_file_url,width:null==l?void 0:l.image_width,height:null==l?void 0:l.image_height,tags:null==l?void 0:l.tag_string.split(" "),data:l,video:ie(t)};e.push(n)}return e}var oe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"danbooru",PLATFORMS:["web","native"],fetchImages:async function(t,{page:e,limit:l}){try{return[!0,ce((await M.request({method:"GET",url:"https://danbooru.donmai.us//posts.json?tags="+t.join("+")+"&page="+(e+1)+"&limit="+l,connectTimeout:8e3,webFetchExtra:{signal:ne()}})).data)]}catch(n){return[!1,[]]}},fetchTags:async function(t){return[!1,[]]}});const ae="https://gelbooru.com/index.php";const re=T([_("zip"),_("webm"),_("mp4")]);function ue(t){const e=[],l="https://img3.gelbooru.com";for(const n of t){if(!(null==n?void 0:n.file_url))continue;const t=q(null==n?void 0:n.file_url.split(".")),s={id:null==n?void 0:n.hash,file_name:null==n?void 0:n.image,source:null==n?void 0:n.source,artist:null==n?void 0:n.owner,file_ext:t,video:re(t),thumbnail_url:`${l}/thumbnails/${null==n?void 0:n.directory}/thumbnail_${null==n?void 0:n.hash}.jpg`,file_url:null==n?void 0:n.file_url,sample_url:`${l}//samples/${null==n?void 0:n.directory}/sample_${null==n?void 0:n.hash}.jpg`,width:null==n?void 0:n.width,height:null==n?void 0:n.height,tags:null==n?void 0:n.tags.split(" "),data:n};e.push(s)}return e}var de={danbooru:oe,gelbooru:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"gelbooru",PLATFORMS:["native"],fetchImages:async function(t,{page:e,limit:l}){try{return[!0,ue((await M.request({method:"GET",url:ae,params:{page:"dapi",s:"post",q:"index",pid:e,json:1,tags:t.join("+"),limit:l},connectTimeout:8e3,webFetchExtra:{signal:ne()}})).data)]}catch(n){return[!1,[]]}},fetchTags:async function(t){const e=C("tag");try{return[!0,e((await M.request({method:"GET",url:ae,params:{page:"dapi",s:"tag",q:"index",json:1,name_pattern:t+"%"},connectTimeout:8e3,webFetchExtra:{signal:ne()}})).data)]}catch(l){return[!1,[]]}}})};const fe=E(!1),me=E(0),pe=E(!1),ve=ee("limit"),ge=ee("backend");function he(t){let e=S(Zt);e=O(_(t),S(Zt))?I([t],e):j(t,e),Zt.set(e)}const xe=t=>({}),be=t=>({}),we=t=>({}),ye=t=>({});function $e(t){let e,l,n;const s=t[4].left,i=P(s,t,t[3],ye),c=i||function(t){let e,l,n,s,i,c,o,a=R(t[0].NAME)+"";return{c(){e=u("button"),l=u("i"),n=d(),s=u("p"),i=H(a),f(l,"id","arrow-button"),f(l,"class","ri-arrow-left-s-line svelte-1w9rlcm"),f(s,"id","screen-name"),f(s,"class","svelte-1w9rlcm"),f(e,"class","flex-1 flex flex-row items-center")},m(a,r){m(a,e,r),B(e,l),B(e,n),B(e,s),B(s,i),c||(o=G(e,"click",t[2]),c=!0)},p(t,e){1&e&&a!==(a=R(t[0].NAME)+"")&&U(i,a)},d(t){t&&g(e),c=!1,o()}}}(t),o=t[4].right,a=P(o,t,t[3],be);return{c(){e=u("nav"),c&&c.c(),l=d(),a&&a.c(),f(e,"class","flex flex-row svelte-1w9rlcm")},m(t,s){m(t,e,s),c&&c.m(e,null),B(e,l),a&&a.m(e,null),n=!0},p(t,[e]){i?i.p&&(!n||8&e)&&D(i,s,t,t[3],n?W(s,t[3],e,we):Y(t[3]),ye):c&&c.p&&(!n||1&e)&&c.p(t,n?e:-1),a&&a.p&&(!n||8&e)&&D(a,o,t,t[3],n?W(o,t[3],e,xe):Y(t[3]),be)},i(t){n||(p(c,t),p(a,t),n=!0)},o(t){Q(c,t),Q(a,t),n=!1},d(t){t&&g(e),c&&c.d(t),a&&a.d(t)}}}function ke(t,e,l){let n,{$$slots:s={},$$scope:i}=e;const{currentScreen:c}=h("navigator");x(t,c,(t=>l(0,n=t)));const o=V();return t.$$set=t=>{"$$scope"in t&&l(3,i=t.$$scope)},[n,c,()=>o("back"),i,s]}class Ee extends o{constructor(t){super(),a(this,t,ke,$e,r,{})}}const ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",Ae=E({});function Le(t){const e=S(Ae);return(null==e?void 0:e["thumbnail_"+(null==t?void 0:t.id)])?e["thumbnail_"+(null==t?void 0:t.id)]:ze}function Se(t){const e=S(Ae);return(null==e?void 0:e[null==t?void 0:t.id])?e[null==t?void 0:t.id]:(null==e?void 0:e["thumbnail_"+(null==t?void 0:t.id)])?e["thumbnail_"+(null==t?void 0:t.id)]:ze}const Te={image:null},_e=E([]),Me=E([]);function Ce(t){_e.set(I([t],S(_e))),Me.set(I([t],S(Me)))}const qe=A([_e,Me],(([t,e])=>[...t,...e])),Ne=E([]);function Oe(){var t;const e=L(1,S(ee("throttle")));if(S(Ne).length>=e)return;if(S(qe).length<1)return;const[l,...n]=S(qe),[s,i,c=!1]=l;if(void 0!==O(_([s,c]),S(Ne)))return void Ce(l);const o=S(ee("useSourceQuality")),a=c?"thumbnail_url":o?"file_url":"sample_url",r=c?"thumbnail_":"";if(!(null==(t=S(Ae))?void 0:t[r+(null==s?void 0:s.id)])){const t=[s,c];Ne.set(j(t,S(Ne))),async function(t,e,l){const n=await M.downloadFile({url:null==t?void 0:t[e],filePath:l+(null==t?void 0:t.file_name),fileDirectory:"CACHE",method:"GET"});let s=null;if(null==n?void 0:n.blob){const t=n.blob;s=URL.createObjectURL(t)}if(null==n?void 0:n.path){const t=await X.getUri({path:n.path});s=K.convertFileSrc(t.uri)}return s?(S(Ae)[l+(null==t?void 0:t.id)]=s,Ae.set(S(Ae)),s):null}(s,a,r).then((e=>{(c||Te.image===s||(null==s?void 0:s.video))&&document.body.contains(i)&&(i.src=Se(s)),Ne.set(I([t],S(Ne)))}))}Ce(l)}function je(t,[e,l=!1]){return l&&(Te.image=e),(null==e?void 0:e.video)||(t.src=Se(e)),_e.set([...S(_e),[e,t,!0]]),l&&Me.set([[e,t,!1],...S(Me)]),{update([e,l=!1]){l&&(Te.image=e),(null==e?void 0:e.video)||(t.src=Se(e)),_e.set([...S(_e),[e,t,!0]]),l&&Me.set([[e,t,!1],...S(Me)])}}}qe.subscribe(Oe),Ne.subscribe(Oe);function Ie(t,e,l){const n=t.slice();return n[15]=e[l],n}function Fe(t){let e,l,n,s,i,c,o,a,r;function d(){return t[13](t[15])}return{c(){e=u("img"),f(e,"class","object-cover svelte-10i13kt"),f(e,"alt",""),w(e.src,l=Le(t[15]))||f(e,"src",l),f(e,"style",n=`width:${t[2]}; height:${t[1]}`)},m(l,n){m(l,e,n),o=!0,a||(r=[J(s=je.call(null,e,[t[15],!1])),G(e,"click",d)],a=!0)},p(i,c){t=i,(!o||8&c&&!w(e.src,l=Le(t[15])))&&f(e,"src",l),(!o||6&c&&n!==(n=`width:${t[2]}; height:${t[1]}`))&&f(e,"style",n),s&&Z(s.update)&&8&c&&s.update.call(null,[t[15],!1])},i(l){o||(y((()=>{c&&c.end(1),i=$(e,t[9],{key:t[15].id}),i.start()})),o=!0)},o(l){i&&i.invalidate(),c=tt(e,t[8],{key:t[15].id}),o=!1},d(t){t&&g(e),t&&c&&c.end(),a=!1,et(r)}}}function Pe(t){let e,l,n,s=t[3],i=[];for(let o=0;o<s.length;o+=1)i[o]=Fe(Ie(t,s,o));const c=t=>Q(i[t],1,1,(()=>{i[t]=null}));return{c(){e=u("div");for(let t=0;t<i.length;t+=1)i[t].c();f(e,"id","images"),f(e,"class","flex flex-row flex-wrap justify-center md:justify-between svelte-10i13kt"),f(e,"style",l=t[0]?"filter: blur(20px)":null)},m(t,l){m(t,e,l);for(let n=0;n<i.length;n+=1)i[n].m(e,null);n=!0},p(t,[o]){if(30&o){let l;for(s=t[3],l=0;l<s.length;l+=1){const n=Ie(t,s,l);i[l]?(i[l].p(n,o),p(i[l],1)):(i[l]=Fe(n),i[l].c(),p(i[l],1),i[l].m(e,null))}for(lt(),l=s.length;l<i.length;l+=1)c(l);nt()}(!n||1&o&&l!==(l=t[0]?"filter: blur(20px)":null))&&f(e,"style",l)},i(t){if(!n){for(let t=0;t<s.length;t+=1)p(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Q(i[e]);n=!1},d(t){t&&g(e),st(i,t)}}}const He={SMALL:{width:"12rem",height:"16rem"},BASE:{width:"14rem",height:"20rem"},LARGE:{width:"16rem",height:"24rem"}},Be=t=>L(He.BASE,t?He[t]:null);function Ge(t,e,l){let n,s,i,c,o,a;x(t,Kt,(t=>l(3,a=t)));const r=V();let{blur:u=!1}=e;const{height:d,isMobile:f}=h("screen");x(t,f,(t=>l(12,o=t)));const m=ee("galleryCols");x(t,m,(t=>l(11,c=t)));const p=ee("galleryImageSize");x(t,p,(t=>l(10,i=t)));const[v,g]=it({duration:200,fallback:ct});return t.$$set=t=>{"blur"in t&&l(0,u=t.blur)},t.$$.update=()=>{7168&t.$$.dirty&&l(2,n=o?1/c*100+"vw":Be(i).width),7168&t.$$.dirty&&l(1,s=o?Math.max(20,4/c*20)+"vh":Be(i).height)},[u,s,n,a,r,f,m,p,v,g,i,c,o,t=>r("imageclick",t)]}class Re extends o{constructor(t){super(),a(this,t,Ge,Pe,r,{blur:0})}}function Ue(t){let e,l,n,s,i,c,o,a,r,p,v,h,x,b,w,k,E,z,A,L,S,T,_,M,C,q,N,O,j,I,F,P,R,D,Y,W,Q,V,X,K,lt,nt,st,it,ct,rt,ut,dt,ft,mt,pt,vt,gt,ht,xt,bt,wt,yt,$t,kt,Et,zt,At,Lt,St,Tt,_t,Mt,Ct,qt,Nt,Ot,jt,It,Ft,Pt,Ht,Bt,Gt,Rt,Ut,Dt,Yt,Wt,Qt,Vt=t[6]?"SM":"SMALL",Xt=t[6]?"LG":"LARGE";return{c(){e=u("article"),l=u("section"),n=u("p"),n.innerHTML="Images <br/>per page",s=d(),i=u("button"),i.textContent="-",c=d(),o=u("button"),a=H(t[0]),r=d(),p=u("button"),p.textContent="+",v=d(),h=u("section"),x=u("p"),x.innerHTML="Load <br/>limit",b=d(),w=u("button"),w.textContent="-",k=d(),E=u("button"),z=H(t[1]),A=d(),L=u("button"),L.textContent="+",S=d(),T=u("section"),_=u("p"),_.innerHTML="Use source <br/> quality",M=d(),C=u("button"),C.textContent="YES",N=d(),O=u("button"),O.textContent="NO",I=d(),F=u("section"),P=u("sup"),P.textContent="MOBILE ONLY",R=d(),D=u("p"),D.innerHTML="Grid<br/> columns",Y=d(),W=u("button"),W.textContent="-",Q=d(),V=u("button"),X=H(t[3]),K=d(),lt=u("button"),lt.textContent="+",nt=d(),st=u("section"),it=u("sup"),it.textContent="MOBILE ONLY",ct=d(),rt=u("p"),rt.innerHTML="Swipe <br/>distance",ut=d(),dt=u("button"),dt.textContent="16.1%",mt=d(),pt=u("button"),pt.textContent="20%",gt=d(),ht=u("button"),ht.textContent="25%",bt=d(),wt=u("section"),yt=u("sup"),yt.textContent="TABLET+ ONLY",$t=d(),kt=u("p"),kt.innerHTML="Image <br/> size",Et=d(),zt=u("button"),At=H(Vt),St=d(),Tt=u("button"),Tt.textContent="BASE",Mt=d(),Ct=u("button"),qt=H(Xt),Ot=d(),jt=u("section"),It=u("p"),It.innerHTML="NSFW<br/> mode",Ft=d(),Pt=u("button"),Pt.textContent="OFF",Bt=d(),Gt=u("button"),Gt.textContent="ON",f(n,"class","flex-1"),f(i,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(o,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),o.disabled=!0,f(p,"class","w-14 md:w-16 svelte-ddyzwm"),f(l,"class","px-2 py-4 svelte-ddyzwm"),f(x,"class","flex-1"),f(w,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(E,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),E.disabled=!0,f(L,"class","w-14 md:w-16 svelte-ddyzwm"),f(h,"class","px-2 py-4 svelte-ddyzwm"),f(_,"class","flex-1 text-wrap"),f(C,"class","mr-1 w-24 svelte-ddyzwm"),f(O,"class","mr-1 w-24 svelte-ddyzwm"),f(T,"class","px-2 py-4 svelte-ddyzwm"),f(P,"class","svelte-ddyzwm"),f(D,"class","flex-1"),f(W,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(V,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),V.disabled=!0,f(lt,"class","w-14 md:w-16 svelte-ddyzwm"),f(F,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(it,"class","svelte-ddyzwm"),f(rt,"class","flex-1 text-wrap"),f(dt,"class","mr-1 svelte-ddyzwm"),f(pt,"class","mr-1 svelte-ddyzwm"),f(ht,"class","svelte-ddyzwm"),f(st,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(yt,"class","svelte-ddyzwm"),f(kt,"class","flex-1 text-wrap"),f(zt,"class","mr-1 svelte-ddyzwm"),f(Tt,"class","mr-1 svelte-ddyzwm"),f(Ct,"class","svelte-ddyzwm"),f(wt,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(It,"class","flex-1"),ot(Pt,"flex-basis","6rem"),f(Pt,"class","svelte-ddyzwm"),f(Gt,"class","ml-1 svelte-ddyzwm"),ot(Gt,"flex-basis","6rem"),f(jt,"class","px-2 py-4 svelte-ddyzwm"),f(e,"class","flex flex-col items-stretch overflow-y-auto svelte-ddyzwm")},m(u,d){m(u,e,d),B(e,l),B(l,n),B(l,s),B(l,i),B(l,c),B(l,o),B(o,a),B(l,r),B(l,p),B(e,v),B(e,h),B(h,x),B(h,b),B(h,w),B(h,k),B(h,E),B(E,z),B(h,A),B(h,L),B(e,S),B(e,T),B(T,_),B(T,M),B(T,C),B(T,N),B(T,O),B(e,I),B(e,F),B(F,P),B(F,R),B(F,D),B(F,Y),B(F,W),B(F,Q),B(F,V),B(V,X),B(F,K),B(F,lt),B(e,nt),B(e,st),B(st,it),B(st,ct),B(st,rt),B(st,ut),B(st,dt),B(st,mt),B(st,pt),B(st,gt),B(st,ht),B(e,bt),B(e,wt),B(wt,yt),B(wt,$t),B(wt,kt),B(wt,Et),B(wt,zt),B(zt,At),B(wt,St),B(wt,Tt),B(wt,Mt),B(wt,Ct),B(Ct,qt),B(e,Ot),B(e,jt),B(jt,It),B(jt,Ft),B(jt,Pt),B(jt,Bt),B(jt,Gt),Yt=!0,Wt||(Qt=[G(i,"click",t[16]),G(p,"click",t[17]),G(w,"click",t[18]),G(L,"click",t[19]),J(q=We.call(null,C,t[2])),G(C,"click",t[20]),J(j=We.call(null,O,!t[2])),G(O,"click",t[21]),G(W,"click",t[22]),G(lt,"click",t[23]),J(ft=We.call(null,dt,.161===t[4])),G(dt,"click",t[24]),J(vt=We.call(null,pt,.2===t[4])),G(pt,"click",t[25]),J(xt=We.call(null,ht,.25===t[4])),G(ht,"click",t[26]),J(Lt=We.call(null,zt,"SMALL"===t[5])),G(zt,"click",t[27]),J(_t=We.call(null,Tt,"BASE"===t[5])),G(Tt,"click",t[28]),J(Nt=We.call(null,Ct,"LARGE"===t[5])),G(Ct,"click",t[29]),J(Ht=We.call(null,Pt,!1===t[7])),G(Pt,"click",t[30]),J(Rt=We.call(null,Gt,!0===t[7])),G(Gt,"click",t[31])],Wt=!0)},p(e,l){t=e,(!Yt||1&l[0])&&U(a,t[0]),(!Yt||2&l[0])&&U(z,t[1]),q&&Z(q.update)&&4&l[0]&&q.update.call(null,t[2]),j&&Z(j.update)&&4&l[0]&&j.update.call(null,!t[2]),(!Yt||8&l[0])&&U(X,t[3]),ft&&Z(ft.update)&&16&l[0]&&ft.update.call(null,.161===t[4]),vt&&Z(vt.update)&&16&l[0]&&vt.update.call(null,.2===t[4]),xt&&Z(xt.update)&&16&l[0]&&xt.update.call(null,.25===t[4]),(!Yt||64&l[0])&&Vt!==(Vt=t[6]?"SM":"SMALL")&&U(At,Vt),Lt&&Z(Lt.update)&&32&l[0]&&Lt.update.call(null,"SMALL"===t[5]),_t&&Z(_t.update)&&32&l[0]&&_t.update.call(null,"BASE"===t[5]),(!Yt||64&l[0])&&Xt!==(Xt=t[6]?"LG":"LARGE")&&U(qt,Xt),Nt&&Z(Nt.update)&&32&l[0]&&Nt.update.call(null,"LARGE"===t[5]),Ht&&Z(Ht.update)&&128&l[0]&&Ht.update.call(null,!1===t[7]),Rt&&Z(Rt.update)&&128&l[0]&&Rt.update.call(null,!0===t[7])},i(t){Yt||(y((()=>{Dt&&Dt.end(1),Ut=$(e,at,{delay:De}),Ut.start()})),Yt=!0)},o(t){Ut&&Ut.invalidate(),Dt=tt(e,at,{delay:0,duration:Ye}),Yt=!1},d(t){t&&g(e),t&&Dt&&Dt.end(),Wt=!1,et(Qt)}}}const De=200,Ye=100;function We(t,e){return t.classList.toggle("active-button",e),{update(e){t.classList.toggle("active-button",e)}}}function Qe(t,e,l){let n,s,i,c,o,a,r,u;const{isMobile:d}=h("screen");x(t,d,(t=>l(6,r=t)));const f=ee("limit");x(t,f,(t=>l(0,n=t)));const m=ee("throttle");x(t,m,(t=>l(1,s=t)));const p=ee("galleryCols");x(t,p,(t=>l(3,c=t)));const v=ee("galleryImageSize");x(t,v,(t=>l(5,a=t)));const g=ee("swipeDistance");x(t,g,(t=>l(4,o=t)));const b=ee("useSourceQuality");x(t,b,(t=>l(2,i=t)));const w=ee("nsfw");x(t,w,(t=>l(7,u=t)));return[n,s,i,c,o,a,r,u,d,f,m,p,v,g,b,w,()=>{n>5&&le("limit",n-5)},()=>{n<95&&le("limit",n+5)},()=>{s>1&&le("throttle",s-1)},()=>{s<5&&le("throttle",s+1)},()=>le("useSourceQuality",!0),()=>le("useSourceQuality",!1),()=>{c>1&&le("galleryCols",rt(c))},()=>{c<5&&le("galleryCols",ut(c))},()=>le("swipeDistance",.161),()=>le("swipeDistance",.2),()=>le("swipeDistance",.25),()=>le("galleryImageSize","SMALL"),()=>le("galleryImageSize","BASE"),()=>le("galleryImageSize","LARGE"),()=>le("nsfw",!1),()=>le("nsfw",!0)]}class Ve extends o{constructor(t){super(),a(this,t,Qe,Ue,r,{},null,[-1,-1])}}function Xe(t,e,l){const n=t.slice();return n[24]=e[l],n}function Ke(t,e,l){const n=t.slice();return n[24]=e[l],n}function Je(t){let e,l,n,s,i=t[3],c=[];for(let o=0;o<i.length;o+=1)c[o]=Ze(Ke(t,i,o));return{c(){e=u("section"),l=u("p"),l.textContent="Suggested",n=d(),s=u("div");for(let t=0;t<c.length;t+=1)c[t].c();f(l,"class","text-4xl font-medium"),f(s,"id","suggestions"),f(s,"class","flex flex-row flex-wrap svelte-z8y7qz"),f(e,"class","svelte-z8y7qz")},m(t,i){m(t,e,i),B(e,l),B(e,n),B(e,s);for(let e=0;e<c.length;e+=1)c[e].m(s,null)},p(t,e){if(2059&e){let l;for(i=t[3],l=0;l<i.length;l+=1){const n=Ke(t,i,l);c[l]?c[l].p(n,e):(c[l]=Ze(n),c[l].c(),c[l].m(s,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=i.length}},d(t){t&&g(e),st(c,t)}}}function Ze(t){let e,l,n,s,i,c=t[24]+"";function o(){return t[14](t[24])}return{c(){e=u("button"),l=H(c),n=d(),f(e,"class","select-none svelte-z8y7qz")},m(t,c){m(t,e,c),B(e,l),B(e,n),s||(i=G(e,"click",o),s=!0)},p(e,n){t=e,8&n&&c!==(c=t[24]+"")&&U(l,c)},d(t){t&&g(e),s=!1,i()}}}function tl(t){let e,l,n,s,i=t[4],c=[];for(let o=0;o<i.length;o+=1)c[o]=el(Xe(t,i,o));return{c(){e=u("section"),l=u("p"),l.textContent="Favorites",n=d(),s=u("div");for(let t=0;t<c.length;t+=1)c[t].c();f(l,"class","text-4xl font-medium"),f(s,"id","favorites"),f(s,"class","flex flex-row flex-wrap svelte-z8y7qz"),f(e,"class","svelte-z8y7qz")},m(t,i){m(t,e,i),B(e,l),B(e,n),B(e,s);for(let e=0;e<c.length;e+=1)c[e].m(s,null)},p(t,e){if(6160&e){let l;for(i=t[4],l=0;l<i.length;l+=1){const n=Xe(t,i,l);c[l]?c[l].p(n,e):(c[l]=el(n),c[l].c(),c[l].m(s,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=i.length}},d(t){t&&g(e),st(c,t)}}}function el(t){let e,l,n,s,i,c=t[24]+"";function o(){return t[15](t[24])}function a(){return t[16](t[24])}return{c(){e=u("button"),l=H(c),n=d(),f(e,"class","select-none svelte-z8y7qz")},m(t,c){m(t,e,c),B(e,l),B(e,n),s||(i=[J(al.call(null,e)),J(rl.call(null,e)),G(e,"longpress",o),G(e,"click",a)],s=!0)},p(e,n){t=e,16&n&&c!==(c=t[24]+"")&&U(l,c)},d(t){t&&g(e),s=!1,et(i)}}}function ll(t){let e,l,n,s,i,c,o,a,r,p,v;return{c(){e=u("div"),l=u("button"),l.textContent="SAFE",s=d(),i=u("button"),i.textContent="UNSAFE",o=d(),a=u("button"),a.textContent="EXPLICIT",f(l,"class","svelte-z8y7qz"),f(i,"class","svelte-z8y7qz"),f(a,"class","svelte-z8y7qz"),f(e,"id","rating-buttons"),f(e,"class","flex flex-row items-center justify-between svelte-z8y7qz")},m(u,d){m(u,e,d),B(e,l),B(e,s),B(e,i),B(e,o),B(e,a),p||(v=[J(n=ul.call(null,l,"SAFE"===t[2])),G(l,"click",t[17]),J(c=ul.call(null,i,"UNSAFE"===t[2])),G(i,"click",t[18]),J(r=ul.call(null,a,"EXPLICIT"===t[2])),G(a,"click",t[19])],p=!0)},p(t,e){n&&Z(n.update)&&4&e&&n.update.call(null,"SAFE"===t[2]),c&&Z(c.update)&&4&e&&c.update.call(null,"UNSAFE"===t[2]),r&&Z(r.update)&&4&e&&r.update.call(null,"EXPLICIT"===t[2])},d(t){t&&g(e),p=!1,et(v)}}}function nl(t){let e,l,n,s,i,c,o,a,r,v,h,x,b,w,k,E,z,A,L=!dt(t[3]),S=!dt(t[4]),T=t[6]?"Searching...":"Search";n=new ft({props:{tags:t[1],onlyUnique:!0,allowBlur:!0}}),n.$on("tags",t[13]);let _=L&&Je(t),M=S&&tl(t),C=t[5]&&ll(t);return{c(){e=u("main"),l=u("div"),mt(n.$$.fragment),s=d(),i=u("div"),_&&_.c(),c=d(),o=u("div"),M&&M.c(),a=d(),r=u("div"),v=d(),C&&C.c(),h=d(),x=u("button"),b=H(T),f(l,"id","tags-input"),f(l,"class","svelte-z8y7qz"),f(i,"class","rounded overflow-y-auto"),f(o,"class","rounded overflow-y-auto"),f(r,"class","flex-1"),f(x,"id","search-button"),f(x,"class","py-2 text-4xl rounded-lg svelte-z8y7qz"),f(e,"class","flex flex-col items-stretch space-y-2 svelte-z8y7qz")},m(u,d){m(u,e,d),B(e,l),pt(n,l,null),B(e,s),B(e,i),_&&_.m(i,null),B(e,c),B(e,o),M&&M.m(o,null),B(e,a),B(e,r),B(e,v),C&&C.m(e,null),B(e,h),B(e,x),B(x,b),E=!0,z||(A=G(x,"click",t[10]),z=!0)},p(l,[s]){t=l;const c={};2&s&&(c.tags=t[1]),n.$set(c),8&s&&(L=!dt(t[3])),L?_?_.p(t,s):(_=Je(t),_.c(),_.m(i,null)):_&&(_.d(1),_=null),16&s&&(S=!dt(t[4])),S?M?M.p(t,s):(M=tl(t),M.c(),M.m(o,null)):M&&(M.d(1),M=null),t[5]?C?C.p(t,s):(C=ll(t),C.c(),C.m(e,h)):C&&(C.d(1),C=null),(!E||64&s)&&T!==(T=t[6]?"Searching...":"Search")&&U(b,T)},i(t){E||(p(n.$$.fragment,t),y((()=>{k&&k.end(1),w=$(e,at,{delay:sl}),w.start()})),E=!0)},o(t){Q(n.$$.fragment,t),w&&w.invalidate(),k=tt(e,at,{delay:0,duration:il}),E=!1},d(t){t&&g(e),vt(n),_&&_.d(),M&&M.d(),C&&C.d(),t&&k&&k.end(),z=!1,A()}}}const sl=200,il=100,cl={SAFE:"rating:safe",UNSAFE:"rating:questionable",EXPLICIT:"rating:explicit"},ol=I(["","rating:safe","rating:questionable","rating:explicit"]);function al(t,e=1500){function l(){const l=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),e),n=()=>{clearTimeout(l),t.removeEventListener("mousemove",n),t.removeEventListener("mouseup",n)};t.addEventListener("mousemove",n),t.addEventListener("mouseup",n)}function n(){const l=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),e),n=()=>{clearTimeout(l),t.removeEventListener("touchmove",n),t.removeEventListener("touchend",n)};t.addEventListener("touchmove",n),t.addEventListener("touchend",n)}return t.addEventListener("mousedown",l),t.addEventListener("touchstart",n),{destroy(){t.removeEventListener("mousedown",l),t.removeEventListener("touchstart",n)}}}function rl(t){function e(t){return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1}return t.addEventListener("oncontextmenu",e),{destroy(){t.removeEventListener("oncontextmenu",e)}}}function ul(t,e){return t.classList.toggle("active-button",e),{update(e){t.classList.toggle("active-button",e)}}}function dl(t,e,l){let n,s,i,c,o;x(t,te,(t=>l(3,n=t))),x(t,fe,(t=>l(6,c=t))),x(t,Zt,(t=>l(22,o=t)));const{tags:a}=Xt;x(t,a,(t=>l(4,s=t)));const r=V(),u=ee("nsfw");x(t,u,(t=>l(5,i=t)));var d=null,f=null,m=ol(o),p="";function v(t){l(2,p=p!==t?t:"")}function g(t){ht(t,m)||l(1,m=j(t,m))}function h(t){ht(t,s)&&xt(a,s=I([t],s),s)}var w=null;function y(){const t=q(bt(" ",d.value));clearTimeout(f),dt(t)||w===t||(xt(te,n=[],n),w=t,l(0,f=setTimeout((()=>async function(t){const e=de[S(ge)],[l,n]=await e.fetchTags(t);return te.set(F(10,n)),l}(t)),1e3)))}b((()=>{(d=document.querySelector(".svelte-tags-input")).addEventListener("input",y),d.focus()})),gt((()=>{d.removeEventListener("input",y)}));return[f,m,p,n,s,i,c,a,u,v,async function(){if(c)return;const t=p?null==cl?void 0:cl[p]:"";r("search",[...m,i?t:"rating:safe"])},g,h,y,async t=>{clearTimeout(f),await wt(),l(1,m=yt(1,m)),g(t),console.log(m),xt(te,n=[],n)},t=>h(t),t=>g(t),()=>v("SAFE"),()=>v("UNSAFE"),()=>v("EXPLICIT")]}class fl extends o{constructor(t){super(),a(this,t,dl,nl,r,{})}}const ml={tags:z("favorites:tags",[]),images:z("favorites:images",[])};function pl(t){const e=S(ml.tags);let l=e;l=O(_(t),e)?I([t],l):j(t,l),ml.tags.set(l)}function vl(t){const e=S(ml.images);let l=e;const n=L(null,O($t("id",t.id),e));l=n?I([n],l):j(t,l),ml.images.set(l)}ml.tags.subscribe((t=>Xt.tags.set(t))),ml.images.subscribe((t=>Xt.images.set(t)));function gl(t,e,l){const n=t.slice();return n[25]=e[l],n}function hl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function xl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-3xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function bl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-4xl md:text-5xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function wl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function yl(t){let e,l,n,s,i,c,o=t[8]?"":"Add";function a(){return t[22](t[25])}return{c(){e=u("button"),l=H(o),n=d(),s=u("i"),f(s,"class","ri-add-line text-4xl md:text-5xl"),f(e,"class","icon-button svelte-1pzovkq")},m(t,o){m(t,e,o),B(e,l),B(e,n),B(e,s),i||(c=G(e,"click",a),i=!0)},p(e,n){t=e,256&n&&o!==(o=t[8]?"":"Add")&&U(l,o)},d(t){t&&g(e),i=!1,c()}}}function $l(t){let e,l,n,s,i,c,o=t[8]?"":"Remove";function a(){return t[21](t[25])}return{c(){e=u("button"),l=H(o),n=d(),s=u("i"),f(s,"class","ri-subtract-line text-4xl md:text-5xl"),f(e,"class","icon-button svelte-1pzovkq")},m(t,o){m(t,e,o),B(e,l),B(e,n),B(e,s),i||(c=G(e,"click",a),i=!0)},p(e,n){t=e,256&n&&o!==(o=t[8]?"":"Remove")&&U(l,o)},d(t){t&&g(e),i=!1,c()}}}function kl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-4xl md:text-5xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function El(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function zl(t){let e,l,n,s,i,c,o,a,r,p,v,h=t[25]+"";function x(t,e){return(null==i||96&e)&&(i=!!t[5](t[25])),i?$l:yl}let b=x(t,-1),w=b(t);function y(t,e){return(null==a||72&e)&&(a=!!t[3](t[25])),a?El:kl}let $=y(t,-1),k=$(t);function E(){return t[23](t[25])}return{c(){e=u("div"),l=u("p"),n=H(h),s=d(),w.c(),c=d(),o=u("button"),k.c(),r=d(),f(l,"class","truncate flex-1 md:text-lg font-light svelte-1pzovkq"),f(o,"class","icon-button svelte-1pzovkq"),f(e,"class","p-4 flex flex-row rounded-lg items-center svelte-1pzovkq")},m(t,i){m(t,e,i),B(e,l),B(l,n),B(e,s),w.m(e,null),B(e,c),B(e,o),k.m(o,null),B(e,r),p||(v=G(o,"click",E),p=!0)},p(l,s){t=l,64&s&&h!==(h=t[25]+"")&&U(n,h),b===(b=x(t,s))&&w?w.p(t,s):(w.d(1),w=b(t),w&&(w.c(),w.m(e,c))),$!==($=y(t,s))&&(k.d(1),k=$(t),k&&(k.c(),k.m(o,null)))},d(t){t&&g(e),w.d(),k.d(),p=!1,v()}}}function Al(t){let e,l,n;return{c(){e=u("button"),e.textContent="CLOSE",f(e,"id","close-button"),f(e,"class","tracking-wider svelte-1pzovkq")},m(s,i){m(s,e,i),l||(n=G(e,"click",t[24]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function Ll(t){var e;let l,n,s,i,c,o,a,r,p,h,x,b,w,y,$,k,E,z,A,L,S,T,_,M,C,q,N,O,j,I,F,P=(null==(e=t[1])?void 0:e.artist)+"";function R(t,e){return t[4]?xl:hl}let D=R(t),Y=D(t);function W(t,e){var l;return(null==q||10&e)&&(q=!!t[3](null==(l=t[1])?void 0:l.artist)),q?wl:bl}let Q=W(t,-1),V=Q(t),X=t[6],K=[];for(let u=0;u<X.length;u+=1)K[u]=zl(gl(t,X,u));let J=t[0]&&Al(t);return{c(){var e,m,v;l=u("article"),n=u("div"),s=u("button"),Y.c(),i=d(),c=u("a"),o=u("button"),a=u("i"),x=d(),b=u("button"),b.innerHTML='<i class="ri-file-copy-fill text-4xl"></i>',w=d(),y=u("a"),$=u("i"),E=d(),z=u("section"),A=u("div"),L=u("p"),L.textContent="Artist:",S=d(),T=u("p"),_=H(P),M=d(),C=u("button"),V.c(),N=d(),O=u("div");for(let t=0;t<K.length;t+=1)K[t].c();j=d(),J&&J.c(),f(s,"class","icon-button svelte-1pzovkq"),f(a,"class","ri-download-fill text-4xl cursor-pointer"),kt(a,"ri-loader-4-line",t[2]),kt(a,"animate-spin",t[2]),f(o,"class","icon-button svelte-1pzovkq"),f(c,"href",r=t[7]?null:null==(e=t[1])?void 0:e.file_url),f(c,"target",p=t[7]?null:"_blank"),f(c,"download",h=null==(m=t[1])?void 0:m.file_name),f(b,"class","icon-button svelte-1pzovkq"),f($,"class","ri-phone-find-line text-4xl"),f(y,"class","icon-button svelte-1pzovkq"),f(y,"href",k=null==(v=t[1])?void 0:v.source),f(y,"target","_blank"),f(n,"class","p-2 flex flex-row justify-between space-x-4 svelte-1pzovkq"),f(L,"class","text-lg"),f(T,"class","text-xl font-light"),f(A,"class","flex-1 flex flex-col"),f(C,"class","icon-button svelte-1pzovkq"),f(z,"class","p-4 flex flex-row svelte-1pzovkq"),f(O,"id","tags"),f(O,"class","flex flex-col svelte-1pzovkq"),f(l,"class","flex flex-col space-y-2 svelte-1pzovkq")},m(e,r){m(e,l,r),B(l,n),B(n,s),Y.m(s,null),B(n,i),B(n,c),B(c,o),B(o,a),B(n,x),B(n,b),B(n,w),B(n,y),B(y,$),B(l,E),B(l,z),B(z,A),B(A,L),B(A,S),B(A,T),B(T,_),B(z,M),B(z,C),V.m(C,null),B(l,N),B(l,O);for(let t=0;t<K.length;t+=1)K[t].m(O,null);B(l,j),J&&J.m(l,null),I||(F=[G(s,"click",t[19]),G(a,"click",t[14]),G(b,"click",t[15]),G(C,"click",t[20])],I=!0)},p(t,[e]){var n,i,o,u;if(D!==(D=R(t))&&(Y.d(1),Y=D(t),Y&&(Y.c(),Y.m(s,null))),4&e&&kt(a,"ri-loader-4-line",t[2]),4&e&&kt(a,"animate-spin",t[2]),130&e&&r!==(r=t[7]?null:null==(n=t[1])?void 0:n.file_url)&&f(c,"href",r),128&e&&p!==(p=t[7]?null:"_blank")&&f(c,"target",p),2&e&&h!==(h=null==(i=t[1])?void 0:i.file_name)&&f(c,"download",h),2&e&&k!==(k=null==(o=t[1])?void 0:o.source)&&f(y,"href",k),2&e&&P!==(P=(null==(u=t[1])?void 0:u.artist)+"")&&U(_,P),Q!==(Q=W(t,e))&&(V.d(1),V=Q(t),V&&(V.c(),V.m(C,null))),360&e){let l;for(X=t[6],l=0;l<X.length;l+=1){const n=gl(t,X,l);K[l]?K[l].p(n,e):(K[l]=zl(n),K[l].c(),K[l].m(O,null))}for(;l<K.length;l+=1)K[l].d(1);K.length=X.length}t[0]?J?J.p(t,e):(J=Al(t),J.c(),J.m(l,null)):J&&(J.d(1),J=null)},i:v,o:v,d(t){t&&g(l),Y.d(),V.d(),st(K,t),J&&J.d(),I=!1,et(F)}}}function Sl(t,e,l){let n,s,i,c,o,a,r,u,d,f;x(t,Jt,(t=>l(1,o=t))),x(t,Zt,(t=>l(18,d=t)));const{tags:m,images:p}=Xt;x(t,m,(t=>l(16,r=t))),x(t,p,(t=>l(17,u=t)));const{isMobile:v,isNative:g}=h("screen");x(t,v,(t=>l(8,f=t))),x(t,g,(t=>l(7,a=t)));const b=V();let{closable:w=!1}=e;var y=!1;return t.$$set=t=>{"closable"in t&&l(0,w=t.closable)},t.$$.update=()=>{2&t.$$.dirty&&l(6,n=L([],null==o?void 0:o.tags)),262144&t.$$.dirty&&l(5,s=t=>ht(t,d)),131074&t.$$.dirty&&l(4,i=void 0!==O($t("id",null==o?void 0:o.id),u)),65536&t.$$.dirty&&l(3,c=t=>ht(t,r))},[w,o,y,c,i,s,n,a,f,m,p,v,g,b,async function(){if(!a||y)return;let t=await X.checkPermissions();if("granted"===t.publicStorage||(t=await X.requestPermissions(),"granted"===t.publicStorage)){l(2,y=!0);try{await M.downloadFile({url:o.file_url,filePath:o.file_name,fileDirectory:"DOWNLOADS",method:"GET"})}catch(e){}l(2,y=!1)}},function(){Et.write({url:null==o?void 0:o.file_url})},r,u,d,()=>vl(o),()=>pl(null==o?void 0:o.artist),t=>he(t),t=>he(t),t=>pl(t),()=>b("close")]}class Tl extends o{constructor(t){super(),a(this,t,Sl,Ll,r,{closable:0})}}function _l(t){let e,l,n,s,i;return{c(){e=u("img"),w(e.src,l=Se(t[0]))||f(e,"src",l),f(e,"alt","current"),f(e,"class","svelte-azo6by")},m(l,c){m(l,e,c),t[31](e),s||(i=J(n=je.call(null,e,[t[0],!0])),s=!0)},p(t,s){1&s[0]&&!w(e.src,l=Se(t[0]))&&f(e,"src",l),n&&Z(n.update)&&1&s[0]&&n.update.call(null,[t[0],!0])},d(l){l&&g(e),t[31](null),s=!1,i()}}}function Ml(t){let e,l=t[0],n=Nl(t);return{c(){n.c(),e=qt()},m(t,l){n.m(t,l),m(t,e,l)},p(t,s){1&s[0]&&r(l,l=t[0])?(n.d(1),n=Nl(t),n.c(),n.m(e.parentNode,e)):n.p(t,s)},d(t){t&&g(e),n.d(t)}}}function Cl(t){let e,l,n,s,i;return{c(){e=u("img"),w(e.src,l=Le(t[0]))||f(e,"src",l),f(e,"alt","current"),f(e,"class","svelte-azo6by")},m(l,c){m(l,e,c),t[30](e),s||(i=J(n=je.call(null,e,[t[0],!0])),s=!0)},p(t,s){1&s[0]&&!w(e.src,l=Le(t[0]))&&f(e,"src",l),n&&Z(n.update)&&1&s[0]&&n.update.call(null,[t[0],!0])},d(l){l&&g(e),t[30](null),s=!1,i()}}}function ql(t){let e,l,n,s,i,c,o,a,r,p,v,h,x,b,$,k,E,z,A,L,S,T,_=!1,M=Math.floor(t[8])+"",C=Math.floor(t[7])+"";function q(){cancelAnimationFrame(c),l.paused||(c=Nt(q),_=!0),t[27].call(l)}return{c(){e=u("div"),l=u("video"),n=u("track"),s=u("source"),o=d(),a=u("div"),r=u("button"),r.innerHTML='<i class="ri-play-line text-5xl"></i>',p=d(),v=u("button"),v.innerHTML='<i class="ri-skip-forward-line text-5xl"></i>',h=d(),x=u("button"),x.innerHTML='<i class="ri-skip-back-line text-5xl"></i>',b=d(),$=u("div"),k=d(),E=u("p"),z=H(M),A=H(" / "),L=H(C),n.default=!0,f(n,"kind","captions"),w(s.src,i=Se(t[0]))||f(s,"src",i),f(l,"class","relative h-screen bg-black"),f(l,"width",t[4]),f(l,"height",t[12]),l.loop=!0,void 0===t[7]&&y((()=>t[28].call(l))),f(r,"class","w-16 h-16 z-10"),f(v,"class","w-16 h-16 z-10"),f(x,"class","w-16 h-16 z-10"),f($,"class","flex-1"),f(E,"class","pb-2"),f(a,"id","video-buttons"),f(a,"class","fixed flex flex-row items-center pl-2 pr-4 z-10 svelte-azo6by")},m(i,c){m(i,e,c),B(e,l),B(l,n),B(l,s),t[26](l),B(e,o),B(e,a),B(a,r),B(a,p),B(a,v),B(a,h),B(a,x),B(a,b),B(a,$),B(a,k),B(a,E),B(E,z),B(E,A),B(E,L),S||(T=[J(Gl.call(null,l)),G(l,"timeupdate",q),G(l,"durationchange",t[28]),G(l,"click",t[29]),G(r,"click",t[19]),G(r,"touchend",t[19],{passive:!0}),G(v,"click",t[20]),G(v,"touchend",t[20],{passive:!0}),G(x,"click",t[21]),G(x,"touchend",t[21],{passive:!0})],S=!0)},p(t,e){1&e[0]&&!w(s.src,i=Se(t[0]))&&f(s,"src",i),16&e[0]&&f(l,"width",t[4]),4096&e[0]&&f(l,"height",t[12]),!_&&256&e[0]&&!isNaN(t[8])&&(l.currentTime=t[8]),_=!1,256&e[0]&&M!==(M=Math.floor(t[8])+"")&&U(z,M),128&e[0]&&C!==(C=Math.floor(t[7])+"")&&U(L,C)},d(l){l&&g(e),t[26](null),S=!1,et(T)}}}function Nl(t){let e;function l(t,e){var l;return(null==(l=t[11])?void 0:l[t[0].id])?ql:Cl}let n=l(t),s=n(t);return{c(){s.c(),e=qt()},m(t,l){s.m(t,l),m(t,e,l)},p(t,i){n===(n=l(t))&&s?s.p(t,i):(s.d(1),s=n(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&g(e)}}}function Ol(t){let e,l,n,s,i,c,o,a,r,v,h,x,b,k,E,z;function A(t,e){var l;return(null==(l=t[0])?void 0:l.video)?Ml:_l}let L=A(t),S=L(t);return x=new Tl({props:{closable:!0}}),x.$on("close",t[33]),{c(){e=u("div"),l=u("div"),n=u("img"),i=d(),S.c(),c=d(),o=u("img"),v=d(),h=u("div"),mt(x.$$.fragment),f(n,"class","invisible svelte-azo6by"),ot(n,"transform","translateX(-1px)"),w(n.src,s=Le(t[5]))||f(n,"src",s),f(n,"alt","previous"),f(o,"class","invisible svelte-azo6by"),ot(o,"transform","translateX(1px)"),w(o.src,a=Le(t[6]))||f(o,"src",a),f(o,"alt","next"),f(l,"id","carousel"),f(l,"class","flex flex-row w-[300vw] bg-black svelte-azo6by"),ot(l,"transform","translate("+(-t[4]+t[10])+"px,"+t[9]+"px)"),f(e,"class","fixed top-0 left-0"),f(h,"id","info-container"),f(h,"style",b=t[3]?"":`transform:translateY(${t[12]+1.75*t[9]}px`),f(h,"class","svelte-azo6by")},m(s,a){m(s,e,a),B(e,l),B(l,n),B(l,i),S.m(l,null),B(l,c),B(l,o),t[32](l),m(s,v,a),m(s,h,a),pt(x,h,null),k=!0,E||(z=[J(Bl.call(null,n)),J(Bl.call(null,o)),J(t[18].call(null,e))],E=!0)},p(t,e){(!k||32&e[0]&&!w(n.src,s=Le(t[5])))&&f(n,"src",s),L===(L=A(t))&&S?S.p(t,e):(S.d(1),S=L(t),S&&(S.c(),S.m(l,c))),(!k||64&e[0]&&!w(o.src,a=Le(t[6])))&&f(o,"src",a),(!k||1552&e[0])&&ot(l,"transform","translate("+(-t[4]+t[10])+"px,"+t[9]+"px)"),(!k||4616&e[0]&&b!==(b=t[3]?"":`transform:translateY(${t[12]+1.75*t[9]}px`))&&f(h,"style",b)},i(t){k||(r||y((()=>{r=$(e,At,{y:1e3}),r.start()})),p(x.$$.fragment,t),k=!0)},o(t){Q(x.$$.fragment,t),k=!1},d(l){l&&g(e),S.d(),t[32](null),l&&g(v),l&&g(h),vt(x),E=!1,et(z)}}}const jl=zt(_(0),(()=>null)),Il=t=>t>200&&t<315,Fl=t=>t>120&&t<200,Pl=t=>t>0&&t<60||t>315&&t<=360,Hl=t=>t>60&&t<120;function Bl(t){setTimeout((()=>{t.classList.remove("invisible")}),300)}function Gl(t){null==t||t.play()}function Rl(t,e,l){let n,s,i,c,o,a,r,u,d,f,m;x(t,Kt,(t=>l(24,r=t))),x(t,Ae,(t=>l(11,f=t)));const p=V();let{image:v=null}=e;const{width:g,height:b}=h("screen");x(t,g,(t=>l(4,d=t))),x(t,b,(t=>l(12,m=t)));var w=null;const y=ee("swipeDistance");x(t,y,(t=>l(25,u=t)));var $=null,k=null,z=null,A=!1;const S=E(null);x(t,S,(t=>l(23,a=t)));const T=_t(0,{duration:50});function M(){o>n&&("DOWN"===a&&xt(T,o=0,o),"UP"===a&&(xt(T,o=0,o),l(3,A=!0)),"LEFT"===a&&p("imagechange",z),"RIGHT"===a&&p("imagechange",k),p("swipe",a)),xt(S,a=null,a),xt(T,o=0,o)}x(t,T,(t=>l(22,o=t)));var C=null;var q=0,O=0;return t.$$set=t=>{"image"in t&&l(0,v=t.image)},t.$$.update=()=>{if(33554448&t.$$.dirty[0]&&(n=L(120,jl(d*u))),33554448&t.$$.dirty[0]&&(s=L(450,jl(d*u*3))),16777217&t.$$.dirty[0]){const t=Lt(_(v))(r);l(5,k=r[St(t-1,0)]),l(6,z=r[Tt(t+1,N(r))])}var e,f,m;12582912&t.$$.dirty[0]&&l(10,i="RIGHT"===a?o:"LEFT"===a?-o:0),12582912&t.$$.dirty[0]&&l(9,c="DOWN"===a?o:"UP"===a?-o:0),14&t.$$.dirty[0]&&(e=$,f=w,m=A,C&&e&&(m?C.unbind(f,"pan"):(C.bind(f,"pan",(function(t){const e=t.detail.data[0].directionFromOrigin,l=t.detail.data[0].distanceFromOrigin;let n=null;Il(e)?n="DOWN":Fl(e)?n="LEFT":Pl(e)?n="RIGHT":Hl(e)&&(n="UP"),n!==a?(xt(S,a=n,a),xt(T,o=0,o)):xt(T,o=l,o),l>s&&M()})),window.addEventListener("touchend",M))))},[v,w,$,A,d,k,z,q,O,c,i,f,m,g,b,y,S,T,function(t){if(t&&!C)return C=Mt.Region(t),{destroy(){C.unbind(w,"pan"),window.removeEventListener("touchend",M),C=null}}},function(){(null==v?void 0:v.video)&&void 0!==$.paused&&((null==$?void 0:$.paused)?null==$||$.play():null==$||$.pause())},function(){(null==v?void 0:v.video)&&(null==$||$.pause(),l(2,$.currentTime=Math.min((null==$?void 0:$.currentTime)+5,q),$),null==$||$.play())},function(){(null==v?void 0:v.video)&&(null==$||$.pause(),l(2,$.currentTime=Math.max((null==$?void 0:$.currentTime)-5,0),$),null==$||$.play())},o,a,r,u,function(t){Ct[t?"unshift":"push"]((()=>{l(2,$=t)}))},function(){O=this.currentTime,l(8,O)},function(){q=this.duration,l(7,q)},t=>$.play(),function(t){Ct[t?"unshift":"push"]((()=>{l(2,$=t)}))},function(t){Ct[t?"unshift":"push"]((()=>{l(2,$=t)}))},function(t){Ct[t?"unshift":"push"]((()=>{l(1,w=t)}))},()=>{l(3,A=!1)}]}class Ul extends o{constructor(t){super(),a(this,t,Rl,Ol,r,{image:0},null,[-1,-1])}}const{window:Dl}=Ot;function Yl(t){let e,l,n,s,i,c;function o(t,e){return t[9]?Ql:Wl}let a=o(t),r=a(t);return{c(){e=u("button"),r.c(),f(e,"id","backend-button"),f(e,"class","svelte-xfq11j")},m(l,n){m(l,e,n),r.m(e,null),s=!0,i||(c=G(e,"click",t[25]),i=!0)},p(l,n){a===(a=o(t=l))&&r?r.p(t,n):(r.d(1),r=a(t),r&&(r.c(),r.m(e,null)))},i(t){s||(y((()=>{n&&n.end(1),l=$(e,at,{delay:sl}),l.start()})),s=!0)},o(t){l&&l.invalidate(),n=tt(e,at,{duration:il}),s=!1},d(t){t&&g(e),r.d(),t&&n&&n.end(),i=!1,c()}}}function Wl(t){let e;return{c(){e=H(t[10])},m(t,l){m(t,e,l)},p(t,l){1024&l[0]&&U(e,t[10])},d(t){t&&g(e)}}}function Ql(t){let e;return{c(){e=u("i"),f(e,"class","ri-gallery-line text-3xl")},m(t,l){m(t,e,l)},p:v,d(t){t&&g(e)}}}function Vl(t){let e,l,n=t[1]&&Yl(t);return{c(){e=u("section"),n&&n.c(),f(e,"slot","left"),f(e,"class","flex-1 flex flex-row")},m(t,s){m(t,e,s),n&&n.m(e,null),l=!0},p(t,l){t[1]?n?(n.p(t,l),2&l[0]&&p(n,1)):(n=Yl(t),n.c(),p(n,1),n.m(e,null)):n&&(lt(),Q(n,1,1,(()=>{n=null})),nt())},i(t){l||(p(n),l=!0)},o(t){Q(n),l=!1},d(t){t&&g(e),n&&n.d()}}}function Xl(t){let e;return{c(){e=u("i"),f(e,"class","ri-settings-2-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Kl(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Jl(t){let e;return{c(){e=u("i"),f(e,"class","ri-search-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Zl(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function tn(t){let e,l,n,s,i,c;function o(t,e){return t[5]?Kl:Xl}let a=o(t),r=a(t);function p(t,e){return t[1]?Zl:Jl}let v=p(t),h=v(t);return{c(){e=u("section"),l=u("div"),r.c(),n=d(),s=u("div"),h.c(),f(l,"id","settings-icon"),f(l,"class","svelte-xfq11j"),f(s,"id","search-icon"),f(s,"class","svelte-xfq11j"),f(e,"slot","right"),f(e,"class","flex flex-row space-x-2")},m(o,a){m(o,e,a),B(e,l),r.m(l,null),B(e,n),B(e,s),h.m(s,null),i||(c=[G(l,"click",t[18]),G(s,"click",t[19])],i=!0)},p(t,e){a!==(a=o(t))&&(r.d(1),r=a(t),r&&(r.c(),r.m(l,null))),v!==(v=p(t))&&(h.d(1),h=v(t),h&&(h.c(),h.m(s,null)))},d(t){t&&g(e),r.d(),h.d(),i=!1,et(c)}}}function en(t){let e,l;return e=new Re({props:{blur:t[1]||t[5]}}),e.$on("imageclick",t[26]),{c(){mt(e.$$.fragment)},m(t,n){pt(e,t,n),l=!0},p(t,l){const n={};34&l[0]&&(n.blur=t[1]||t[5]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){Q(e.$$.fragment,t),l=!1},d(t){vt(e,t)}}}function ln(t){let e,l,n,s,i=t[4]&&en(t);return{c(){e=u("article"),i&&i.c(),f(e,"class","flex-1 flex flex-col items-stretch svelte-xfq11j")},m(c,o){m(c,e,o),i&&i.m(e,null),l=!0,n||(s=J(t[21].call(null,e)),n=!0)},p(t,l){t[4]?i?(i.p(t,l),16&l[0]&&p(i,1)):(i=en(t),i.c(),p(i,1),i.m(e,null)):i&&(lt(),Q(i,1,1,(()=>{i=null})),nt())},i(t){l||(p(i),l=!0)},o(t){Q(i),l=!1},d(t){t&&g(e),i&&i.d(),n=!1,s()}}}function nn(t){let e,l;return e=new Ul({props:{image:t[0]}}),e.$on("imagechange",t[27]),e.$on("swipe",t[28]),{c(){mt(e.$$.fragment)},m(t,n){pt(e,t,n),l=!0},p(t,l){const n={};1&l[0]&&(n.image=t[0]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){Q(e.$$.fragment,t),l=!1},d(t){vt(e,t)}}}function sn(t){let e;return{c(){e=u("p"),e.textContent="No more images...",f(e,"class","text-3xl text-center pb-2")},m(t,l){m(t,e,l)},p:v,d(t){t&&g(e)}}}function cn(t){let e,l,n;return{c(){e=u("button"),e.textContent="More",f(e,"id","more-button"),f(e,"class","mb-2 svelte-xfq11j")},m(s,i){m(s,e,i),l||(n=G(e,"click",t[29]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function on(t){let e,l,n;return l=new Ve({}),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","settings-menu"),f(e,"class","svelte-xfq11j")},m(t,s){m(t,e,s),pt(l,e,null),n=!0},i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){Q(l.$$.fragment,t),n=!1},d(t){t&&g(e),vt(l)}}}function an(t){let e,l,n;return l=new fl({}),l.$on("search",t[20]),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","search-menu"),f(e,"class","svelte-xfq11j")},m(t,s){m(t,e,s),pt(l,e,null),n=!0},p:v,i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){Q(l.$$.fragment,t),n=!1},d(t){t&&g(e),vt(l)}}}function rn(t){let e,l,n;return{c(){e=u("button"),e.innerHTML='<i class="ri-arrow-up-line text-2xl text-black"></i>',f(e,"id","back-button"),f(e,"class","svelte-xfq11j")},m(s,i){m(s,e,i),l||(n=G(e,"click",t[30]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function un(t){let e,l,n,s,i,c,o,a,u,f,h,x,b=t[8];e=new Ee({props:{$$slots:{right:[tn],left:[Vl]},$$scope:{ctx:t}}});let w=ln(t),y=t[9]&&t[0]&&nn(t);function $(t,e){return!t[3]||t[0]||t[1]||t[5]||t[11]||!t[7]?((null==i||427&e[0])&&(i=!(!t[3]||t[0]||t[1]||t[5]||t[7]||dt(t[8]))),i?sn:void 0):cn}let k=$(t,[-1,-1]),E=k&&k(t),z=t[5]&&on(),A=t[1]&&an(t),L=t[6]&&!t[0]&&!t[1]&&!t[5]&&rn(t);return{c(){mt(e.$$.fragment),l=d(),w.c(),n=d(),y&&y.c(),s=d(),E&&E.c(),c=d(),z&&z.c(),o=d(),A&&A.c(),a=d(),L&&L.c(),u=qt()},m(i,r){pt(e,i,r),m(i,l,r),w.m(i,r),m(i,n,r),y&&y.m(i,r),m(i,s,r),E&&E.m(i,r),m(i,c,r),z&&z.m(i,r),m(i,o,r),A&&A.m(i,r),m(i,a,r),L&&L.m(i,r),m(i,u,r),f=!0,h||(x=G(Dl,"keyup",t[22]),h=!0)},p(t,l){const i={};1570&l[0]|256&l[1]&&(i.$$scope={dirty:l,ctx:t}),e.$set(i),256&l[0]&&r(b,b=t[8])?(lt(),Q(w,1,1,v),nt(),w=ln(t),w.c(),p(w),w.m(n.parentNode,n)):w.p(t,l),t[9]&&t[0]?y?(y.p(t,l),513&l[0]&&p(y,1)):(y=nn(t),y.c(),p(y,1),y.m(s.parentNode,s)):y&&(lt(),Q(y,1,1,(()=>{y=null})),nt()),k===(k=$(t,l))&&E?E.p(t,l):(E&&E.d(1),E=k&&k(t),E&&(E.c(),E.m(c.parentNode,c))),t[5]?z?32&l[0]&&p(z,1):(z=on(),z.c(),p(z,1),z.m(o.parentNode,o)):z&&(lt(),Q(z,1,1,(()=>{z=null})),nt()),t[1]?A?(A.p(t,l),2&l[0]&&p(A,1)):(A=an(t),A.c(),p(A,1),A.m(a.parentNode,a)):A&&(lt(),Q(A,1,1,(()=>{A=null})),nt()),!t[6]||t[0]||t[1]||t[5]?L&&(L.d(1),L=null):L?L.p(t,l):(L=rn(t),L.c(),L.m(u.parentNode,u))},i(t){f||(p(e.$$.fragment,t),p(w),p(y),p(z),p(A),f=!0)},o(t){Q(e.$$.fragment,t),Q(w),Q(y),Q(z),Q(A),f=!1},d(t){vt(e,t),t&&g(l),w.d(t),t&&g(n),y&&y.d(t),t&&g(s),E&&E.d(t),t&&g(c),z&&z.d(t),t&&g(o),A&&A.d(t),t&&g(a),L&&L.d(t),t&&g(u),h=!1,x()}}}const dn=E(0);function fn(t,e,l){let n,s,i,c,o,a,r,u,d,f,m=v;x(t,dn,(t=>l(32,s=t))),x(t,Kt,(t=>l(33,i=t))),x(t,pe,(t=>l(7,c=t))),x(t,Zt,(t=>l(8,o=t))),x(t,Jt,(t=>l(35,u=t))),x(t,fe,(t=>l(11,f=t))),t.$$.on_destroy.push((()=>m()));const{images:p}=Xt;x(t,p,(t=>l(34,t)));const{height:g,isMobile:b}=h("screen");x(t,g,(t=>l(24,r=t))),x(t,b,(t=>l(9,a=t)));const{navigate:w}=h("navigator"),y=ee("backend");x(t,y,(t=>l(10,d=t)));var $=!1,k=null,E=0,z=u,A=!1,L=!0,T=!1,_=!1;function M(t){l(4,L=!1),l(1,_=!1),l(5,T=!1),setTimeout((()=>w(t)),500)}function C(t){l(0,z=t),a||M("Image")}return t.$$.update=()=>{1&t.$$.dirty[0]&&xt(Jt,u=z,u),25165824&t.$$.dirty[0]&&l(6,n=E>r),3&t.$$.dirty[0]&&document.body.classList.toggle("noscroll",_||null!==z)},[z,_,k,A,L,T,n,c,o,a,d,f,p,g,b,y,M,C,function(){l(1,_=!1),setTimeout((()=>{l(5,T=!T)}),Ye)},function(){window.scrollTo(0,0),l(5,T=!1),setTimeout((()=>{l(1,_=!_)}),Ye)},async function(t){const e=t.detail;k.getScrollElement().scrollTop=0,xt(Kt,i=[],i),await async function(t){return new Promise((e=>setTimeout(e,t)))}(210),await async function(t){if(S(fe))return!1;const e=de[S(ge)];me.set(0),pe.set(!1),Kt.set([]),fe.set(!0);const[l,n]=await e.fetchImages(t,{page:S(me),limit:S(ve)});return fe.set(!1),Zt.set(t),Kt.set(n),N(n)>0&&pe.set(!0),l}(e)&&l(1,_=!1)},function(t){function e(){l(23,E=k.getScrollElement().scrollTop);const t=k.getScrollElement().scrollHeight;Math.abs(window.innerHeight-se(6.5)+E-t)<se(6)||t>0&&t<window.innerHeight?l(3,A=!0):l(3,A=!1),xt(dn,s=E,s)}l(2,k=new jt(t)),k.getScrollElement().scrollTop=s,k.getScrollElement().addEventListener("scroll",e),Kt.subscribe((async()=>{k.recalculate(),await wt(),e()}))},function(t){"Escape"===t.key&&(_&&l(1,_=!1),T?l(5,T=!1):async function(){if($)return;$=!0,xt(Kt,i=[],i),l(5,T=!1),l(1,_=!1);const t=Math.max(200,T?200+Ye:0,_?200+il:0);setTimeout((()=>M("Start")),t+10)}())},E,r,()=>M("Backends"),t=>C(t.detail),t=>{const e=t.detail;l(0,z=e)},t=>{"DOWN"===t.detail&&l(0,z=null)},()=>{l(3,A=!1),async function(){if(!S(pe))return!1;if(S(fe))return!1;const t=de[S(ge)];fe.set(!0),me.update((t=>t+1));const[e,l]=await t.fetchImages(S(Zt),{page:S(me),limit:S(ve)});l&&(null==l?void 0:l.length)<1&&pe.set(!1),fe.set(!1),Kt.set([...S(Kt),...l])}()},()=>{k.getScrollElement().scrollTo(0,0)}]}function mn(t,e,l){const n=t.slice();return n[8]=e[l],n}function pn(t){let e,l,n,s,i,c;function o(){return t[7](t[8])}return{c(){e=u("img"),f(e,"class","object-contain transform hover:scale-110 svelte-u94g43"),w(e.src,l=Le(t[8]))||f(e,"src",l),f(e,"alt","adjacent")},m(l,a){m(l,e,a),i||(c=[J(n=je.call(null,e,[t[8]])),J(s=gn.call(null,e,t[8]===t[0])),G(e,"click",o)],i=!0)},p(i,c){t=i,2&c&&!w(e.src,l=Le(t[8]))&&f(e,"src",l),n&&Z(n.update)&&2&c&&n.update.call(null,[t[8]]),s&&Z(s.update)&&3&c&&s.update.call(null,t[8]===t[0])},d(t){t&&g(e),i=!1,et(c)}}}function vn(t){let e,l=t[1],n=[];for(let s=0;s<l.length;s+=1)n[s]=pn(mn(t,l,s));return{c(){e=u("div");for(let t=0;t<n.length;t+=1)n[t].c();f(e,"id","images"),f(e,"class","flex flex-row lg:flex-col rounded-lg svelte-u94g43")},m(t,l){m(t,e,l);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(t,[s]){if(7&s){let i;for(l=t[1],i=0;i<l.length;i+=1){const c=mn(t,l,i);n[i]?n[i].p(c,s):(n[i]=pn(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},i:v,o:v,d(t){t&&g(e),st(n,t)}}}function gn(t,e){return t.classList.toggle("active-queue-image",e),{update(e){t.classList.toggle("active-queue-image",e)}}}function hn(t,e,l){let n,s,i,c;x(t,Kt,(t=>l(5,s=t))),x(t,Jt,(t=>l(0,i=t)));const o=V();var a=[];const{height:r}=h("screen");x(t,r,(t=>l(6,c=t)));return t.$$.update=()=>{if(64&t.$$.dirty&&l(4,n=c<1050?4:5),49&t.$$.dirty){const t=Lt(_(i))(s);let e=1,c=0,o=0;for(;e<s.length&&c+o<n&&(L(null,null==s?void 0:s[t+e])&&++o,c+o!==n);)L(null,null==s?void 0:s[t-e])&&++c,++e;o<=2&&(--c,++o);const r=St(0,t-c),u=Tt(s.length,t+o);l(1,a=It(r,u,s))}},[i,a,o,r,n,s,c,t=>o("imagechange",t)]}class xn extends o{constructor(t){super(),a(this,t,hn,vn,r,{})}}function bn(t){let e,l,n,s,i,c,o,a,r,p,v,h=t[5]+1+"",x=t[2].length+"";return{c(){e=u("section"),l=u("button"),l.innerHTML='<i class="ri-arrow-left-s-line text-4xl md:text-5xl"></i>',n=d(),s=u("button"),s.innerHTML='<i class="ri-arrow-right-s-line text-4xl md:text-5xl"></i>',i=d(),c=u("p"),o=H(h),a=H(" / "),r=H(x),f(l,"id","previous-image-button"),f(s,"id","next-image-button"),f(c,"id","index-indicator"),f(c,"class","ml-4 text-3xl text-center svelte-19526fs"),f(e,"slot","right"),f(e,"class","flex flex-row items-center")},m(u,d){m(u,e,d),B(e,l),B(e,n),B(e,s),B(e,i),B(e,c),B(c,o),B(c,a),B(c,r),p||(v=[G(l,"click",t[12]),G(s,"click",t[11])],p=!0)},p(t,e){32&e&&h!==(h=t[5]+1+"")&&U(o,h),4&e&&x!==(x=t[2].length+"")&&U(r,x)},d(t){t&&g(e),p=!1,et(v)}}}function wn(t){let e,l,n,s,i,c,o,a,r;return{c(){var c,o,a;e=u("img"),f(e,"id","main-image"),f(e,"style",l=t[4]?"filter: blur(12px)":""),f(e,"width",n=null==(c=t[1])?void 0:c.width),f(e,"height",s=null==(o=t[1])?void 0:o.height),w(e.src,i=null==(a=t[1])?void 0:a.thumbnail_url)||f(e,"src",i),f(e,"alt","main"),f(e,"class","svelte-19526fs")},m(l,n){m(l,e,n),a||(r=J(c=je.call(null,e,[t[1],!0])),a=!0)},p(t,o){var a,r,u;16&o&&l!==(l=t[4]?"filter: blur(12px)":"")&&f(e,"style",l),2&o&&n!==(n=null==(a=t[1])?void 0:a.width)&&f(e,"width",n),2&o&&s!==(s=null==(r=t[1])?void 0:r.height)&&f(e,"height",s),2&o&&!w(e.src,i=null==(u=t[1])?void 0:u.thumbnail_url)&&f(e,"src",i),c&&Z(c.update)&&2&o&&c.update.call(null,[t[1],!0])},i(t){o||y((()=>{o=$(e,at,{}),o.start()}))},o:v,d(t){t&&g(e),a=!1,r()}}}function yn(t){let e,l,n,s,i,c;return{c(){var o,a;e=u("video"),l=u("track"),n=u("source"),l.default=!0,f(l,"kind","captions"),w(n.src,s=Se(t[1]))||f(n,"src",s),f(n,"type","video/webm"),f(e,"id","main-image"),f(e,"width",i=null==(o=t[1])?void 0:o.width),f(e,"height",c=null==(a=t[1])?void 0:a.height),e.controls=!0,f(e,"class","svelte-19526fs")},m(s,i){m(s,e,i),B(e,l),B(e,n),t[16](e)},p(t,l){var o,a;2&l&&!w(n.src,s=Se(t[1]))&&f(n,"src",s),2&l&&i!==(i=null==(o=t[1])?void 0:o.width)&&f(e,"width",i),2&l&&c!==(c=null==(a=t[1])?void 0:a.height)&&f(e,"height",c)},i:v,o:v,d(l){l&&g(e),t[16](null)}}}function $n(t){let e,l,n,s;return l=new xn({}),l.$on("imagechange",t[17]),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","images-queue"),f(e,"class","svelte-19526fs")},m(t,n){m(t,e,n),pt(l,e,null),s=!0},p(e,l){t=e},i(t){s||(p(l.$$.fragment,t),y((()=>{n||(n=Ft(e,At,{delay:0,duration:Tn,y:300},!0)),n.run(1)})),s=!0)},o(t){Q(l.$$.fragment,t),n||(n=Ft(e,At,{delay:0,duration:Tn,y:300},!1)),n.run(0),s=!1},d(t){t&&g(e),vt(l),t&&n&&n.end()}}}function kn(t){let e,l,n,s,i;return l=new Tl({}),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","image-info"),f(e,"class","svelte-19526fs")},m(t,n){m(t,e,n),pt(l,e,null),i=!0},p(t,e){},i(t){i||(p(l.$$.fragment,t),y((()=>{s&&s.end(1),n=$(e,At,{delay:_n,duration:Mn,y:1e3}),n.start()})),i=!0)},o(t){Q(l.$$.fragment,t),n&&n.invalidate(),s=tt(e,At,{delay:0,duration:Mn,y:1e3}),i=!1},d(t){t&&g(e),vt(l),t&&s&&s.end()}}}function En(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function zn(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-3xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function An(t){let e;return{c(){e=u("i"),f(e,"class","ri-information-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Ln(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Sn(t){let e,l,n,s,i,c,o,a,r,v,h,x;function b(t,e){var l,n,s;return(null==(l=t[1])?void 0:l.video)&&(null==(s=t[7])?void 0:s[null==(n=t[1])?void 0:n.id])?yn:wn}e=new Ee({props:{$$slots:{right:[bn]},$$scope:{ctx:t}}}),e.$on("back",t[9]);let w=b(t),y=w(t),$=t[3]&&!t[4]&&$n(t),k=t[4]&&kn();function E(t,e){return t[6]?zn:En}let z=E(t),A=z(t);function L(t,e){return t[4]?Ln:An}let S=L(t),T=S(t);return{c(){mt(e.$$.fragment),l=d(),n=u("main"),y.c(),s=d(),$&&$.c(),i=d(),k&&k.c(),c=d(),o=u("button"),A.c(),a=d(),r=u("button"),T.c(),f(o,"id","favorite-button"),f(o,"class","absolute bottom-0 left-0 ml-6 mb-6 py-6 px-8 rounded-3xl svelte-19526fs"),f(r,"id","info-button"),f(r,"class","absolute bottom-0 right-0 mr-6 mb-6 py-6 px-8 rounded-3xl svelte-19526fs"),f(n,"class","flex flex-col lg:flex-row px-4 overflow-hidden svelte-19526fs")},m(u,d){pt(e,u,d),m(u,l,d),m(u,n,d),y.m(n,null),B(n,s),$&&$.m(n,null),B(n,i),k&&k.m(n,null),B(n,c),B(n,o),A.m(o,null),B(n,a),B(n,r),T.m(r,null),v=!0,h||(x=[G(window,"keyup",t[13]),G(o,"click",t[18]),G(r,"click",t[19])],h=!0)},p(t,[l]){const a={};4194340&l&&(a.$$scope={dirty:l,ctx:t}),e.$set(a),w===(w=b(t))&&y?y.p(t,l):(y.d(1),y=w(t),y&&(y.c(),p(y,1),y.m(n,s))),t[3]&&!t[4]?$?($.p(t,l),24&l&&p($,1)):($=$n(t),$.c(),p($,1),$.m(n,i)):$&&(lt(),Q($,1,1,(()=>{$=null})),nt()),t[4]?k?(k.p(t,l),16&l&&p(k,1)):(k=kn(),k.c(),p(k,1),k.m(n,c)):k&&(lt(),Q(k,1,1,(()=>{k=null})),nt()),z!==(z=E(t))&&(A.d(1),A=z(t),A&&(A.c(),A.m(o,null))),S!==(S=L(t))&&(T.d(1),T=S(t),T&&(T.c(),T.m(r,null)))},i(t){v||(p(e.$$.fragment,t),p(y),p($),p(k),v=!0)},o(t){Q(e.$$.fragment,t),Q($),Q(k),v=!1},d(t){vt(e,t),t&&g(l),t&&g(n),y.d(),$&&$.d(),k&&k.d(),A.d(),T.d(),h=!1,et(x)}}}const Tn=200,_n=300,Mn=200;function Cn(t,e,l){let n,s,i,c,o,a,r;x(t,Jt,(t=>l(1,i=t))),x(t,Kt,(t=>l(2,c=t))),x(t,Ae,(t=>l(7,r=t)));const{images:u}=Xt;x(t,u,(t=>l(14,o=t)));const{navigate:d}=h("navigator");async function f(){l(4,v=!1),l(3,p=!1),setTimeout((()=>{xt(Jt,i=null,i),d("Gallery")}),Tn)}h("events");const{isMobile:m}=h("screen");x(t,m,(t=>l(15,a=t)));var p=!0,v=!1;function g(){xt(Jt,i=c[Tt(s+1,c.length-1)],i)}function b(){xt(Jt,i=c[St(s-1,0)],i)}var w=null;return t.$$.update=()=>{32768&t.$$.dirty&&a&&f(),16386&t.$$.dirty&&l(6,n=void 0!==O($t("id",null==i?void 0:i.id),o)),6&t.$$.dirty&&l(5,s=Lt(_(i))(c)),3&t.$$.dirty&&(null==i?void 0:i.video)&&(null==w||w.load())},[w,i,c,p,v,s,n,r,u,f,m,g,b,function(t){const e=t.key;"Escape"===e&&f(),"ArrowLeft"!==e&&"j"!==e||b(),"ArrowRight"!==e&&"k"!==e||g()," "===e&&g()},o,a,function(t){Ct[t?"unshift":"push"]((()=>{l(0,w=t)}))},t=>{xt(Jt,i=t.detail,i)},()=>vl(i),()=>{l(4,v=!v)}]}function qn(t,e,l){const n=t.slice();return n[9]=e[l][0],n[10]=e[l][1],n}function Nn(t){let e,l,n,s,i,c,o,a,r,p,v,h,x,b,w,y,$,k,E,z,A=jn(t[10],t[3])?"AVAILABLE":"UNAVAILABLE",L=t[9]+"",S=jn(t[10],"web")?"✓":"✗",T=jn(t[10],"native")?"✓":"✗";function _(){return t[6](t[9])}return{c(){e=u("button"),l=u("p"),n=H(A),s=d(),i=u("p"),c=H(L),o=d(),a=u("p"),a.textContent="Supported platforms:",r=d(),p=u("div"),v=u("p"),h=H("WEB: "),x=H(S),b=d(),w=u("p"),y=H("NATIVE: "),$=H(T),k=d(),f(l,"class","absolute top-0 right-0 pt-6 pr-6"),f(i,"class","pb-2 text-2xl"),kt(i,"text-green-400",t[0]===t[9]),f(a,"class","text-lg"),f(p,"class","pt-1 flex flex-row space-x-4"),f(e,"data-supported",jn(t[10],t[3])),f(e,"class","svelte-1vjqs3k")},m(t,u){m(t,e,u),B(e,l),B(l,n),B(e,s),B(e,i),B(i,c),B(e,o),B(e,a),B(e,r),B(e,p),B(p,v),B(v,h),B(v,x),B(p,b),B(p,w),B(w,y),B(w,$),B(e,k),E||(z=G(e,"click",_),E=!0)},p(e,l){t=e,1&l&&kt(i,"text-green-400",t[0]===t[9])},d(t){t&&g(e),E=!1,z()}}}function On(t){let e,l,n,s,i,c,o;e=new Ee({}),e.$on("back",t[4]);let a=Object.entries(de),r=[];for(let u=0;u<a.length;u+=1)r[u]=Nn(qn(t,a,u));return{c(){mt(e.$$.fragment),l=d(),n=u("main"),s=u("div");for(let t=0;t<r.length;t+=1)r[t].c();i=d(),c=u("button"),c.textContent="Help",f(s,"id","backends"),f(s,"class","flex flex-col space-y-2 svelte-1vjqs3k"),f(c,"class","text-2xl svelte-1vjqs3k"),f(n,"class","flex flex-col svelte-1vjqs3k")},m(t,a){pt(e,t,a),m(t,l,a),m(t,n,a),B(n,s);for(let e=0;e<r.length;e+=1)r[e].m(s,null);B(n,i),B(n,c),o=!0},p(t,[e]){if(41&e){let l;for(a=Object.entries(de),l=0;l<a.length;l+=1){const n=qn(t,a,l);r[l]?r[l].p(n,e):(r[l]=Nn(n),r[l].c(),r[l].m(s,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=a.length}},i(t){o||(p(e.$$.fragment,t),o=!0)},o(t){Q(e.$$.fragment,t),o=!1},d(t){vt(e,t),t&&g(l),t&&g(n),st(r,t)}}}const jn=(t,e)=>ht(e,L([],null==t?void 0:t.PLATFORMS));function In(t,e,l){let n,s;const{navigate:i}=h("navigator"),{isNative:c}=h("screen");x(t,c,(t=>l(7,n=t)));const o=ee("backend");x(t,o,(t=>l(0,s=t)));function a(){i("Gallery")}function r(t){le("backend",t),a()}return[s,c,o,n?"native":"web",a,r,t=>r(t)]}var Fn={Start:{NAME:"Start",COMPONENT:class extends o{constructor(t){super(),a(this,t,Wt,Dt,r,{})}}},Gallery:{NAME:"Gallery",COMPONENT:class extends o{constructor(t){super(),a(this,t,fn,un,r,{},null,[-1,-1])}}},Image:{NAME:"Image",COMPONENT:class extends o{constructor(t){super(),a(this,t,Cn,Sn,r,{})}}},Backends:{NAME:"Backends",COMPONENT:class extends o{constructor(t){super(),a(this,t,In,On,r,{})}}}};const Pn=E(null),Hn=E([]),Bn=E({}),Gn=E({}),Rn=E({});function Un(t,e){if(S(Pn)){const e=Object.entries(S(Bn)),l=Object.entries(S(Rn));for(const[t,s]of l)"function"==typeof s.clear&&s.clear();const n={};for(const[s,i]of e)n[s]=new Dn(t,i);Rn.set(n)}e&&S(Hn).push("StartView");const l=S(Gn);Pn.set(l[t])}class Dn{constructor(t,e){this.view=t,this.emitter=e,this.listeners=[]}on(t,e){this.listeners.push([t,e]),this.emitter.on(t,e)}clear(){const t=this.listeners;for(const[e,l]of t)this.emitter.removeListener(e,l)}}function Yn(t){var e;let l,n,s,i,c;y(t[6]);var o=null==(e=t[2])?void 0:e.COMPONENT;return o&&(n=new o({})),{c(){l=u("main"),n&&mt(n.$$.fragment),f(l,"class","relative flex flex-col svelte-15zbi46")},m(e,o){m(e,l,o),n&&pt(n,l,null),s=!0,i||(c=G(window,"resize",t[6]),i=!0)},p(t,[e]){var s;if(o!==(o=null==(s=t[2])?void 0:s.COMPONENT)){if(n){lt();const t=n;Q(t.$$.fragment,1,0,(()=>{vt(t,1)})),nt()}o?(n=new o({}),mt(n.$$.fragment),p(n.$$.fragment,1),pt(n,l,null)):n=null}},i(t){s||(n&&p(n.$$.fragment,t),s=!0)},o(t){n&&Q(n.$$.fragment,t),s=!1},d(t){t&&g(l),n&&vt(n),i=!1,c()}}}function Wn(t,e,l){let n,s,i,c;var o,a;x(t,Pn,(t=>l(2,c=t))),o=Bt,a=Fn,Bn.set(o),Gn.set(a);const r=E(0);x(t,r,(t=>l(0,n=t)));const u=E(0);x(t,u,(t=>l(1,i=t)));const d=E(!1);x(t,d,(t=>l(7,s=t)));const f=E(!1);return Pt("screen",{width:r,height:u,isMobile:d,isNative:f}),Pt("navigator",{currentScreen:Pn,navigate:Un}),Pt("events",Rn),b((async()=>{const t=await Ht.getInfo();"android"===(null==t?void 0:t.operatingSystem)&&f.set(!0),Un("Start")})),t.$$.update=()=>{1&t.$$.dirty&&xt(d,s=n<768,s)},[n,i,c,r,u,d,function(){r.set(n=window.innerWidth),u.set(i=window.innerHeight)}]}new class extends o{constructor(t){super(),a(this,t,Wn,Yn,r,{})}}({target:document.getElementById("app")});
