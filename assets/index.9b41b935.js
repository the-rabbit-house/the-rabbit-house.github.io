var t=Object.defineProperty,e=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(e,l,n)=>l in e?t(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n;import{S as r,i as c,s as a,e as u,a as d,b as f,c as m,t as p,n as v,d as g,g as x,f as h,o as b,h as y,j as w,k as $,l as k,w as E,m as L,p as A,q as T,r as z,u as S,v as M,H as _,x as N,y as C,z as O,A as q,B as I,C as j,D as F,E as P,F as B,G as H,I as G,J as R,K as U,L as D,M as Y,N as Q,O as W,P as V,Q as X,R as K,T as J,U as Z,V as tt,W as et,X as lt,Y as nt,Z as st,_ as it,$ as ot,a0 as rt,a1 as ct,a2 as at,a3 as ut,a4 as dt,a5 as ft,a6 as mt,a7 as pt,a8 as vt,a9 as gt,aa as xt,ab as ht,ac as bt,ad as yt,ae as wt,af as $t,ag as kt,ah as Et,ai as Lt,aj as At,ak as Tt,al as zt,am as St,an as Mt,ao as _t,ap as Nt,aq as Ct,ar as Ot,as as qt,at as It,au as jt,av as Ft,aw as Pt,ax as Bt,ay as Ht,az as Gt,aA as Rt,aB as Ut,aC as Dt}from"./vendor.57b0de71.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const l of t)if("childList"===l.type)for(const t of l.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var Yt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),Qt="/assets/tippy.ac9e6991.png";function Wt(t){let e,l;return{c(){e=u("img"),f(e,"class","hidden"),y(e.src,l=Qt)||f(e,"src","/assets/tippy.ac9e6991.png"),f(e,"alt","tippy-hidden")},m(t,l){m(t,e,l)},p:v,i:v,o:v,d(t){t&&g(e)}}}function Vt(t){let e,l,n;return{c(){e=u("img"),f(e,"class","self-center w-40 h-32"),y(e.src,l=Qt)||f(e,"src","/assets/tippy.ac9e6991.png"),f(e,"alt","tippy")},m(t,l){m(t,e,l)},p:v,i(t){n||w((()=>{n=$(e,Kt,{}),n.start()}))},o:v,d(t){t&&g(e)}}}function Xt(t){let e,l,n,s,i,o,r,c;function a(t,e){return t[0]?Vt:Wt}let x=a(t),h=x(t);return{c(){e=u("nav"),e.innerHTML='<p class="flex-1 text-5xl font-light">chino</p> \n  <a href="https://github.com/the-rabbit-house/chino"><i class="ri-github-fill text-5xl"></i></a>',l=d(),n=u("div"),s=d(),h.c(),i=d(),o=u("div"),r=d(),c=u("p"),c.textContent="Brewing the coffee..",f(e,"class","px-6 pt-2 h-20 flex flex-row items-center"),f(n,"class","flex-1"),f(o,"class","flex-1"),f(c,"class","pb-6 text-2xl font-light text-center")},m(t,a){m(t,e,a),m(t,l,a),m(t,n,a),m(t,s,a),h.m(t,a),m(t,i,a),m(t,o,a),m(t,r,a),m(t,c,a)},p(t,[e]){x===(x=a(t))&&h?h.p(t,e):(h.d(1),h=x(t),h&&(h.c(),p(h,1),h.m(i.parentNode,i)))},i(t){p(h)},o:v,d(t){t&&g(e),t&&g(l),t&&g(n),t&&g(s),h.d(t),t&&g(i),t&&g(o),t&&g(r),t&&g(c)}}}function Kt(t,e){return{delay:0,duration:1e3,easing:k,css:(t,e)=>`transform: rotate(${360*t}deg);`}}function Jt(t,e,l){let n;const{navigate:s}=x("navigator"),{isNative:i}=x("screen");h(t,i,(t=>l(2,n=t)));var o=!1;return b((()=>{if(l(0,o=!0),n){document.querySelector("meta[name=viewport]").setAttribute("content",`width=device-width, height=${window.innerHeight}, initial-scale=1.0, user-scalable=0`)}setTimeout((()=>s("Gallery")),1e3)})),[o,i]}const Zt={backend:"danbooru",limit:20,throttle:1,galleryCols:3,galleryImageSize:"BASE",swipeDistance:.2,useSourceQuality:!1,nsfw:!1},te=E("settings",Zt),ee=L([]),le=L(null),ne=L([]),se=L([]),ie={tags:L([]),images:L([]),bookmarks:L({})},oe=L([]),re=function(t){return A(te,(e=>T(Zt[t],null==e?void 0:e[t])))},ce=function(t,r){const c=(a=((t,e)=>{for(var l in e||(e={}))s.call(e,l)&&o(t,l,e[l]);if(n)for(var l of n(e))i.call(e,l)&&o(t,l,e[l]);return t})({},z(te)),e(a,l({[t]:r})));var a;te.set(c)};function ae(t=8e3){const e=new AbortController,l=e.signal;return setTimeout((()=>e.abort()),t),l}function ue(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}const de=S([M("zip"),M("webm"),M("mp4")]);function fe(t){const e=[];for(const l of t){if(!(null==l?void 0:l.file_url))continue;const t=null==l?void 0:l.file_ext,n={id:null==l?void 0:l.md5,file_name:(null==l?void 0:l.md5)+"."+(null==l?void 0:l.file_ext)||"",file_ext:t,source:null==l?void 0:l.source,artist:null==l?void 0:l.tag_string_artist,thumbnail_url:null==l?void 0:l.preview_file_url,file_url:de(t)?null==l?void 0:l.large_file_url:null==l?void 0:l.file_url,sample_url:null==l?void 0:l.large_file_url,width:null==l?void 0:l.image_width,height:null==l?void 0:l.image_height,tags:null==l?void 0:l.tag_string.split(" "),data:l,video:de(t)};e.push(n)}return e}var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"danbooru",PLATFORMS:["web","native"],fetchImages:async function(t,{page:e,limit:l}){try{return[!0,fe((await _.request({method:"GET",url:"https://danbooru.donmai.us//posts.json?tags="+t.join("+")+"&page="+(e+1)+"&limit="+l,connectTimeout:8e3,webFetchExtra:{signal:ae()}})).data)]}catch(n){return[!1,[]]}},fetchTags:async function(t){return[!1,[]]}});const pe="https://gelbooru.com/index.php";const ve=S([M("zip"),M("webm"),M("mp4")]);function ge(t){const e=[],l="https://img3.gelbooru.com";for(const n of t){if(!(null==n?void 0:n.file_url))continue;const t=C(null==n?void 0:n.file_url.split(".")),s={id:null==n?void 0:n.hash,file_name:null==n?void 0:n.image,source:null==n?void 0:n.source,artist:null==n?void 0:n.owner,file_ext:t,video:ve(t),thumbnail_url:`${l}/thumbnails/${null==n?void 0:n.directory}/thumbnail_${null==n?void 0:n.hash}.jpg`,file_url:null==n?void 0:n.file_url,sample_url:`${l}//samples/${null==n?void 0:n.directory}/sample_${null==n?void 0:n.hash}.jpg`,width:null==n?void 0:n.width,height:null==n?void 0:n.height,tags:null==n?void 0:n.tags.split(" "),data:n};e.push(s)}return e}const xe={danbooru:me,gelbooru:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NAME:"gelbooru",PLATFORMS:["native"],fetchImages:async function(t,{page:e,limit:l}){try{return[!0,ge((await _.request({method:"GET",url:pe,params:{page:"dapi",s:"post",q:"index",pid:e,json:1,tags:t.join("+"),limit:l},connectTimeout:8e3,webFetchExtra:{signal:ae()}})).data)]}catch(n){return[!1,[]]}},fetchTags:async function(t){const e=N("tag");try{return[!0,e((await _.request({method:"GET",url:pe,params:{page:"dapi",s:"tag",q:"index",json:1,name_pattern:t+"%"},connectTimeout:8e3,webFetchExtra:{signal:ae()}})).data)]}catch(l){return[!1,[]]}}})},he=L(!1),be=L(0),ye=L(!1),we=re("limit"),$e=re("backend");function ke(t){let e=z(ne);e=q(M(t),z(ne))?j([t],e):I(t,e),ne.set(e)}const Ee=t=>({}),Le=t=>({}),Ae=t=>({}),Te=t=>({});function ze(t){let e,l,n;const s=t[4].left,i=P(s,t,t[3],Te),o=i||function(t){let e,l,n,s,i,o,r;return{c(){e=u("button"),l=u("i"),n=d(),s=u("p"),i=Q(t[0]),f(l,"id","arrow-button"),f(l,"class","ri-arrow-left-s-line svelte-pnxj3y"),f(s,"id","screen-name"),f(s,"class","svelte-pnxj3y"),f(e,"class","flex-1 flex flex-row items-center")},m(c,a){m(c,e,a),B(e,l),B(e,n),B(e,s),B(s,i),o||(r=W(e,"click",t[2]),o=!0)},p(t,e){1&e&&V(i,t[0])},d(t){t&&g(e),o=!1,r()}}}(t),r=t[4].right,c=P(r,t,t[3],Le);return{c(){e=u("nav"),o&&o.c(),l=d(),c&&c.c(),f(e,"class","flex flex-row svelte-pnxj3y")},m(t,s){m(t,e,s),o&&o.m(e,null),B(e,l),c&&c.m(e,null),n=!0},p(t,[e]){i?i.p&&(!n||8&e)&&H(i,s,t,t[3],n?R(s,t[3],e,Ae):G(t[3]),Te):o&&o.p&&(!n||1&e)&&o.p(t,n?e:-1),c&&c.p&&(!n||8&e)&&H(c,r,t,t[3],n?R(r,t[3],e,Ee):G(t[3]),Le)},i(t){n||(p(o,t),p(c,t),n=!0)},o(t){U(o,t),U(c,t),n=!1},d(t){t&&g(e),o&&o.d(t),c&&c.d(t)}}}function Se(t,e,l){let n,{$$slots:s={},$$scope:i}=e;const{currentScreen:o}=x("navigator");h(t,o,(t=>l(5,n=t)));let{title:r=D(n.NAME)}=e;const c=Y();return t.$$set=t=>{"title"in t&&l(0,r=t.title),"$$scope"in t&&l(3,i=t.$$scope)},[r,o,()=>c("back"),i,s]}class Me extends r{constructor(t){super(),c(this,t,Se,ze,a,{title:0})}}const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",Ne=L({});function Ce(t){const e=z(Ne);return(null==e?void 0:e["thumbnail_"+(null==t?void 0:t.id)])?e["thumbnail_"+(null==t?void 0:t.id)]:_e}function Oe(t){const e=z(Ne);return(null==e?void 0:e[null==t?void 0:t.id])?e[null==t?void 0:t.id]:(null==e?void 0:e["thumbnail_"+(null==t?void 0:t.id)])?e["thumbnail_"+(null==t?void 0:t.id)]:_e}const qe={image:null},Ie=L([]),je=L([]);function Fe(t){Ie.set(j([t],z(Ie))),je.set(j([t],z(je)))}const Pe=A([Ie,je],(([t,e])=>[...t,...e])),Be=L([]);function He(){var t;const e=T(1,z(re("throttle")));if(z(Be).length>=e)return;if(z(Pe).length<1)return;const[l,...n]=z(Pe),[s,i,o=!1]=l;if(void 0!==q(M([s,o]),z(Be)))return void Fe(l);const r=z(re("useSourceQuality")),c=o?"thumbnail_url":r?"file_url":"sample_url",a=o?"thumbnail_":"";if(!(null==(t=z(Ne))?void 0:t[a+(null==s?void 0:s.id)])){const t=[s,o];Be.set(I(t,z(Be))),async function(t,e,l){try{const n=await _.downloadFile({url:null==t?void 0:t[e],filePath:l+(null==t?void 0:t.file_name),fileDirectory:"CACHE",method:"GET",progress:"thumbnail_"!==l});let s=null;if(null==n?void 0:n.blob){const t=n.blob;s=URL.createObjectURL(t)}if(null==n?void 0:n.path){const t=await X.getUri({path:n.path});s=K.convertFileSrc(t.uri)}return s?(z(Ne)[l+(null==t?void 0:t.id)]=s,Ne.set(z(Ne)),s):null}catch(n){return null}}(s,c,a).then((e=>{(o||qe.image===s||(null==s?void 0:s.video))&&document.body.contains(i)&&Ge(i,Oe(s)),Be.set(j([t],z(Be)))}))}Fe(l)}function Ge(t,e){"IMG"===t.tagName?t.src=e:t.style.setProperty("--image",`url(${e})`)}function Re(t,[e,l=!1]){return l&&(qe.image=e),(null==e?void 0:e.video)||Ge(t,Oe(e)),Ie.set([...z(Ie),[e,t,!0]]),l&&je.set([[e,t,!1],...z(je)]),{update([e,l=!1]){l&&(qe.image=e),(null==e?void 0:e.video)||Ge(t,Oe(e)),Ie.set([...z(Ie),[e,t,!0]]),l&&je.set([[e,t,!1],...z(je)])}}}Pe.subscribe(He),Be.subscribe(He);function Ue(t,e,l){const n=t.slice();return n[14]=e[l],n}function De(t){let e,l,n,s,i,o,r,c,a;function d(){return t[13](t[14])}return{c(){e=u("img"),f(e,"class","object-cover svelte-10i13kt"),f(e,"alt",""),y(e.src,l=Ce(t[14]))||f(e,"src",l),f(e,"style",n=`width:${t[2]}; height:${t[1]}`)},m(l,n){m(l,e,n),r=!0,c||(a=[J(s=Re.call(null,e,[t[14],!1])),W(e,"click",d)],c=!0)},p(i,o){t=i,(!r||8&o&&!y(e.src,l=Ce(t[14])))&&f(e,"src",l),(!r||6&o&&n!==(n=`width:${t[2]}; height:${t[1]}`))&&f(e,"style",n),s&&Z(s.update)&&8&o&&s.update.call(null,[t[14],!1])},i(l){r||(w((()=>{o&&o.end(1),i=$(e,t[9],{key:t[14].id}),i.start()})),r=!0)},o(l){i&&i.invalidate(),o=tt(e,t[8],{key:t[14].id}),r=!1},d(t){t&&g(e),t&&o&&o.end(),c=!1,et(a)}}}function Ye(t){let e,l,n,s=t[3],i=[];for(let r=0;r<s.length;r+=1)i[r]=De(Ue(t,s,r));const o=t=>U(i[t],1,1,(()=>{i[t]=null}));return{c(){e=u("div");for(let t=0;t<i.length;t+=1)i[t].c();f(e,"id","images"),f(e,"class","flex flex-row flex-wrap justify-center md:justify-between svelte-10i13kt"),f(e,"style",l=t[0]?"filter: blur(20px)":null)},m(t,l){m(t,e,l);for(let n=0;n<i.length;n+=1)i[n].m(e,null);n=!0},p(t,[r]){if(30&r){let l;for(s=t[3],l=0;l<s.length;l+=1){const n=Ue(t,s,l);i[l]?(i[l].p(n,r),p(i[l],1)):(i[l]=De(n),i[l].c(),p(i[l],1),i[l].m(e,null))}for(lt(),l=s.length;l<i.length;l+=1)o(l);nt()}(!n||1&r&&l!==(l=t[0]?"filter: blur(20px)":null))&&f(e,"style",l)},i(t){if(!n){for(let t=0;t<s.length;t+=1)p(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)U(i[e]);n=!1},d(t){t&&g(e),st(i,t)}}}const Qe={SMALL:{width:"12rem",height:"16rem"},BASE:{width:"14rem",height:"20rem"},LARGE:{width:"16rem",height:"24rem"}},We=t=>T(Qe.BASE,t?Qe[t]:null);function Ve(t,e,l){let n,s,i,o,r,c;h(t,ee,(t=>l(3,c=t)));const a=Y();let{blur:u=!1}=e;const{isMobile:d}=x("screen");h(t,d,(t=>l(12,r=t)));const f=re("galleryCols");h(t,f,(t=>l(11,o=t)));const m=re("galleryImageSize");h(t,m,(t=>l(10,i=t)));const[p,v]=it({duration:200,fallback:ot});return t.$$set=t=>{"blur"in t&&l(0,u=t.blur)},t.$$.update=()=>{7168&t.$$.dirty&&l(2,n=r?1/o*100+"vw":We(i).width),7168&t.$$.dirty&&l(1,s=r?Math.max(20,4/o*20)+"vh":We(i).height)},[u,s,n,c,a,d,f,m,p,v,i,o,r,t=>a("imageclick",t)]}class Xe extends r{constructor(t){super(),c(this,t,Ve,Ye,a,{blur:0})}}function Ke(t){let e,l,n,s,i,o,r,c,a,p,v,x,h,b,y,k,E,L,A,T,z,S,M,_,N,C,O,q,I,j,F,P,H,G,R,U,D,Y,X,K,lt,nt,st,it,ot,at,ut,dt,ft,mt,pt,vt,gt,xt,ht,bt,yt,wt,$t,kt,Et,Lt,At,Tt,zt,St,Mt,_t,Nt,Ct,Ot,qt,It,jt,Ft,Pt,Bt,Ht,Gt,Rt,Ut,Dt,Yt,Qt,Wt,Vt=t[6]?"SM":"SMALL",Xt=t[6]?"LG":"LARGE";return{c(){e=u("article"),l=u("section"),n=u("p"),n.innerHTML="Images <br/>per page",s=d(),i=u("button"),i.textContent="-",o=d(),r=u("button"),c=Q(t[0]),a=d(),p=u("button"),p.textContent="+",v=d(),x=u("section"),h=u("p"),h.innerHTML="Load <br/>limit",b=d(),y=u("button"),y.textContent="-",k=d(),E=u("button"),L=Q(t[1]),A=d(),T=u("button"),T.textContent="+",z=d(),S=u("section"),M=u("p"),M.innerHTML="Use source <br/> quality",_=d(),N=u("button"),N.textContent="YES",O=d(),q=u("button"),q.textContent="NO",j=d(),F=u("section"),P=u("sup"),P.textContent="MOBILE ONLY",H=d(),G=u("p"),G.innerHTML="Grid<br/> columns",R=d(),U=u("button"),U.textContent="-",D=d(),Y=u("button"),X=Q(t[3]),K=d(),lt=u("button"),lt.textContent="+",nt=d(),st=u("section"),it=u("sup"),it.textContent="MOBILE ONLY",ot=d(),at=u("p"),at.innerHTML="Swipe <br/>distance",ut=d(),dt=u("button"),dt.textContent="16.1%",mt=d(),pt=u("button"),pt.textContent="20%",gt=d(),xt=u("button"),xt.textContent="25%",bt=d(),yt=u("section"),wt=u("sup"),wt.textContent="TABLET+ ONLY",$t=d(),kt=u("p"),kt.innerHTML="Image <br/> size",Et=d(),Lt=u("button"),At=Q(Vt),zt=d(),St=u("button"),St.textContent="BASE",_t=d(),Nt=u("button"),Ct=Q(Xt),qt=d(),It=u("section"),jt=u("p"),jt.innerHTML="NSFW<br/> mode",Ft=d(),Pt=u("button"),Pt.textContent="OFF",Ht=d(),Gt=u("button"),Gt.textContent="ON",f(n,"class","flex-1"),f(i,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(r,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),r.disabled=!0,f(p,"class","w-14 md:w-16 svelte-ddyzwm"),f(l,"class","px-2 py-4 svelte-ddyzwm"),f(h,"class","flex-1"),f(y,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(E,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),E.disabled=!0,f(T,"class","w-14 md:w-16 svelte-ddyzwm"),f(x,"class","px-2 py-4 svelte-ddyzwm"),f(M,"class","flex-1 text-wrap"),f(N,"class","mr-1 w-24 svelte-ddyzwm"),f(q,"class","mr-1 w-24 svelte-ddyzwm"),f(S,"class","px-2 py-4 svelte-ddyzwm"),f(P,"class","svelte-ddyzwm"),f(G,"class","flex-1"),f(U,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),f(Y,"class","w-14 md:w-16 mr-1 svelte-ddyzwm"),Y.disabled=!0,f(lt,"class","w-14 md:w-16 svelte-ddyzwm"),f(F,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(it,"class","svelte-ddyzwm"),f(at,"class","flex-1 text-wrap"),f(dt,"class","mr-1 svelte-ddyzwm"),f(pt,"class","mr-1 svelte-ddyzwm"),f(xt,"class","svelte-ddyzwm"),f(st,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(wt,"class","svelte-ddyzwm"),f(kt,"class","flex-1 text-wrap"),f(Lt,"class","mr-1 svelte-ddyzwm"),f(St,"class","mr-1 svelte-ddyzwm"),f(Nt,"class","svelte-ddyzwm"),f(yt,"class","relative px-2 py-4 pt-8 svelte-ddyzwm"),f(jt,"class","flex-1"),rt(Pt,"flex-basis","6rem"),f(Pt,"class","svelte-ddyzwm"),f(Gt,"class","ml-1 svelte-ddyzwm"),rt(Gt,"flex-basis","6rem"),f(It,"class","px-2 py-4 svelte-ddyzwm"),f(e,"class","flex flex-col items-stretch overflow-y-auto svelte-ddyzwm")},m(u,d){m(u,e,d),B(e,l),B(l,n),B(l,s),B(l,i),B(l,o),B(l,r),B(r,c),B(l,a),B(l,p),B(e,v),B(e,x),B(x,h),B(x,b),B(x,y),B(x,k),B(x,E),B(E,L),B(x,A),B(x,T),B(e,z),B(e,S),B(S,M),B(S,_),B(S,N),B(S,O),B(S,q),B(e,j),B(e,F),B(F,P),B(F,H),B(F,G),B(F,R),B(F,U),B(F,D),B(F,Y),B(Y,X),B(F,K),B(F,lt),B(e,nt),B(e,st),B(st,it),B(st,ot),B(st,at),B(st,ut),B(st,dt),B(st,mt),B(st,pt),B(st,gt),B(st,xt),B(e,bt),B(e,yt),B(yt,wt),B(yt,$t),B(yt,kt),B(yt,Et),B(yt,Lt),B(Lt,At),B(yt,zt),B(yt,St),B(yt,_t),B(yt,Nt),B(Nt,Ct),B(e,qt),B(e,It),B(It,jt),B(It,Ft),B(It,Pt),B(It,Ht),B(It,Gt),Yt=!0,Qt||(Wt=[W(i,"click",t[16]),W(p,"click",t[17]),W(y,"click",t[18]),W(T,"click",t[19]),J(C=tl.call(null,N,t[2])),W(N,"click",t[20]),J(I=tl.call(null,q,!t[2])),W(q,"click",t[21]),W(U,"click",t[22]),W(lt,"click",t[23]),J(ft=tl.call(null,dt,.161===t[4])),W(dt,"click",t[24]),J(vt=tl.call(null,pt,.2===t[4])),W(pt,"click",t[25]),J(ht=tl.call(null,xt,.25===t[4])),W(xt,"click",t[26]),J(Tt=tl.call(null,Lt,"SMALL"===t[5])),W(Lt,"click",t[27]),J(Mt=tl.call(null,St,"BASE"===t[5])),W(St,"click",t[28]),J(Ot=tl.call(null,Nt,"LARGE"===t[5])),W(Nt,"click",t[29]),J(Bt=tl.call(null,Pt,!1===t[7])),W(Pt,"click",t[30]),J(Rt=tl.call(null,Gt,!0===t[7])),W(Gt,"click",t[31])],Qt=!0)},p(e,l){t=e,(!Yt||1&l[0])&&V(c,t[0]),(!Yt||2&l[0])&&V(L,t[1]),C&&Z(C.update)&&4&l[0]&&C.update.call(null,t[2]),I&&Z(I.update)&&4&l[0]&&I.update.call(null,!t[2]),(!Yt||8&l[0])&&V(X,t[3]),ft&&Z(ft.update)&&16&l[0]&&ft.update.call(null,.161===t[4]),vt&&Z(vt.update)&&16&l[0]&&vt.update.call(null,.2===t[4]),ht&&Z(ht.update)&&16&l[0]&&ht.update.call(null,.25===t[4]),(!Yt||64&l[0])&&Vt!==(Vt=t[6]?"SM":"SMALL")&&V(At,Vt),Tt&&Z(Tt.update)&&32&l[0]&&Tt.update.call(null,"SMALL"===t[5]),Mt&&Z(Mt.update)&&32&l[0]&&Mt.update.call(null,"BASE"===t[5]),(!Yt||64&l[0])&&Xt!==(Xt=t[6]?"LG":"LARGE")&&V(Ct,Xt),Ot&&Z(Ot.update)&&32&l[0]&&Ot.update.call(null,"LARGE"===t[5]),Bt&&Z(Bt.update)&&128&l[0]&&Bt.update.call(null,!1===t[7]),Rt&&Z(Rt.update)&&128&l[0]&&Rt.update.call(null,!0===t[7])},i(t){Yt||(w((()=>{Dt&&Dt.end(1),Ut=$(e,ct,{delay:Je}),Ut.start()})),Yt=!0)},o(t){Ut&&Ut.invalidate(),Dt=tt(e,ct,{delay:0,duration:Ze}),Yt=!1},d(t){t&&g(e),t&&Dt&&Dt.end(),Qt=!1,et(Wt)}}}const Je=200,Ze=100;function tl(t,e){return t.classList.toggle("active-button",e),{update(e){t.classList.toggle("active-button",e)}}}function el(t,e,l){let n,s,i,o,r,c,a,u;const{isMobile:d}=x("screen");h(t,d,(t=>l(6,a=t)));const f=re("limit");h(t,f,(t=>l(0,n=t)));const m=re("throttle");h(t,m,(t=>l(1,s=t)));const p=re("galleryCols");h(t,p,(t=>l(3,o=t)));const v=re("galleryImageSize");h(t,v,(t=>l(5,c=t)));const g=re("swipeDistance");h(t,g,(t=>l(4,r=t)));const b=re("useSourceQuality");h(t,b,(t=>l(2,i=t)));const y=re("nsfw");h(t,y,(t=>l(7,u=t)));return[n,s,i,o,r,c,a,u,d,f,m,p,v,g,b,y,()=>{n>5&&ce("limit",n-5)},()=>{n<95&&ce("limit",n+5)},()=>{s>1&&ce("throttle",s-1)},()=>{s<5&&ce("throttle",s+1)},()=>ce("useSourceQuality",!0),()=>ce("useSourceQuality",!1),()=>{o>1&&ce("galleryCols",at(o))},()=>{o<5&&ce("galleryCols",ut(o))},()=>ce("swipeDistance",.161),()=>ce("swipeDistance",.2),()=>ce("swipeDistance",.25),()=>ce("galleryImageSize","SMALL"),()=>ce("galleryImageSize","BASE"),()=>ce("galleryImageSize","LARGE"),()=>ce("nsfw",!1),()=>ce("nsfw",!0)]}class ll extends r{constructor(t){super(),c(this,t,el,Ke,a,{},null,[-1,-1])}}function nl(t,e,l){const n=t.slice();return n[24]=e[l],n}function sl(t,e,l){const n=t.slice();return n[24]=e[l],n}function il(t){let e,l,n,s,i=t[3],o=[];for(let r=0;r<i.length;r+=1)o[r]=ol(sl(t,i,r));return{c(){e=u("section"),l=u("p"),l.textContent="Suggested",n=d(),s=u("div");for(let t=0;t<o.length;t+=1)o[t].c();f(l,"class","text-4xl font-medium"),f(s,"id","suggestions"),f(s,"class","flex flex-row flex-wrap svelte-z8y7qz"),f(e,"class","svelte-z8y7qz")},m(t,i){m(t,e,i),B(e,l),B(e,n),B(e,s);for(let e=0;e<o.length;e+=1)o[e].m(s,null)},p(t,e){if(2059&e){let l;for(i=t[3],l=0;l<i.length;l+=1){const n=sl(t,i,l);o[l]?o[l].p(n,e):(o[l]=ol(n),o[l].c(),o[l].m(s,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=i.length}},d(t){t&&g(e),st(o,t)}}}function ol(t){let e,l,n,s,i,o=t[24]+"";function r(){return t[14](t[24])}return{c(){e=u("button"),l=Q(o),n=d(),f(e,"class","select-none svelte-z8y7qz")},m(t,o){m(t,e,o),B(e,l),B(e,n),s||(i=W(e,"click",r),s=!0)},p(e,n){t=e,8&n&&o!==(o=t[24]+"")&&V(l,o)},d(t){t&&g(e),s=!1,i()}}}function rl(t){let e,l,n,s,i=t[4],o=[];for(let r=0;r<i.length;r+=1)o[r]=cl(nl(t,i,r));return{c(){e=u("section"),l=u("p"),l.textContent="Favorites",n=d(),s=u("div");for(let t=0;t<o.length;t+=1)o[t].c();f(l,"class","text-4xl font-medium"),f(s,"id","favorites"),f(s,"class","flex flex-row flex-wrap svelte-z8y7qz"),f(e,"class","svelte-z8y7qz")},m(t,i){m(t,e,i),B(e,l),B(e,n),B(e,s);for(let e=0;e<o.length;e+=1)o[e].m(s,null)},p(t,e){if(6160&e){let l;for(i=t[4],l=0;l<i.length;l+=1){const n=nl(t,i,l);o[l]?o[l].p(n,e):(o[l]=cl(n),o[l].c(),o[l].m(s,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=i.length}},d(t){t&&g(e),st(o,t)}}}function cl(t){let e,l,n,s,i,o=t[24]+"";function r(){return t[15](t[24])}function c(){return t[16](t[24])}return{c(){e=u("button"),l=Q(o),n=d(),f(e,"class","select-none svelte-z8y7qz")},m(t,o){m(t,e,o),B(e,l),B(e,n),s||(i=[J(vl.call(null,e)),J(gl.call(null,e)),W(e,"longpress",r),W(e,"click",c)],s=!0)},p(e,n){t=e,16&n&&o!==(o=t[24]+"")&&V(l,o)},d(t){t&&g(e),s=!1,et(i)}}}function al(t){let e,l,n,s,i,o,r,c,a,p,v;return{c(){e=u("div"),l=u("button"),l.textContent="SAFE",s=d(),i=u("button"),i.textContent="UNSAFE",r=d(),c=u("button"),c.textContent="EXPLICIT",f(l,"class","svelte-z8y7qz"),f(i,"class","svelte-z8y7qz"),f(c,"class","svelte-z8y7qz"),f(e,"id","rating-buttons"),f(e,"class","flex flex-row items-center justify-between svelte-z8y7qz")},m(u,d){m(u,e,d),B(e,l),B(e,s),B(e,i),B(e,r),B(e,c),p||(v=[J(n=xl.call(null,l,"SAFE"===t[2])),W(l,"click",t[17]),J(o=xl.call(null,i,"UNSAFE"===t[2])),W(i,"click",t[18]),J(a=xl.call(null,c,"EXPLICIT"===t[2])),W(c,"click",t[19])],p=!0)},p(t,e){n&&Z(n.update)&&4&e&&n.update.call(null,"SAFE"===t[2]),o&&Z(o.update)&&4&e&&o.update.call(null,"UNSAFE"===t[2]),a&&Z(a.update)&&4&e&&a.update.call(null,"EXPLICIT"===t[2])},d(t){t&&g(e),p=!1,et(v)}}}function ul(t){let e,l,n,s,i,o,r,c,a,v,x,h,b,y,k,E,L,A,T=!dt(t[3]),z=!dt(t[4]),S=t[6]?"Searching...":"Search";n=new ft({props:{tags:t[1],onlyUnique:!0,allowBlur:!0}}),n.$on("tags",t[13]);let M=T&&il(t),_=z&&rl(t),N=t[5]&&al(t);return{c(){e=u("main"),l=u("div"),mt(n.$$.fragment),s=d(),i=u("div"),M&&M.c(),o=d(),r=u("div"),_&&_.c(),c=d(),a=u("div"),v=d(),N&&N.c(),x=d(),h=u("button"),b=Q(S),f(l,"id","tags-input"),f(l,"class","svelte-z8y7qz"),f(i,"class","rounded overflow-y-auto"),f(r,"class","rounded overflow-y-auto"),f(a,"class","flex-1"),f(h,"id","search-button"),f(h,"class","py-2 text-4xl rounded-lg svelte-z8y7qz"),f(e,"class","flex flex-col items-stretch space-y-2 svelte-z8y7qz")},m(u,d){m(u,e,d),B(e,l),pt(n,l,null),B(e,s),B(e,i),M&&M.m(i,null),B(e,o),B(e,r),_&&_.m(r,null),B(e,c),B(e,a),B(e,v),N&&N.m(e,null),B(e,x),B(e,h),B(h,b),E=!0,L||(A=W(h,"click",t[10]),L=!0)},p(l,[s]){t=l;const o={};2&s&&(o.tags=t[1]),n.$set(o),8&s&&(T=!dt(t[3])),T?M?M.p(t,s):(M=il(t),M.c(),M.m(i,null)):M&&(M.d(1),M=null),16&s&&(z=!dt(t[4])),z?_?_.p(t,s):(_=rl(t),_.c(),_.m(r,null)):_&&(_.d(1),_=null),t[5]?N?N.p(t,s):(N=al(t),N.c(),N.m(e,x)):N&&(N.d(1),N=null),(!E||64&s)&&S!==(S=t[6]?"Searching...":"Search")&&V(b,S)},i(t){E||(p(n.$$.fragment,t),w((()=>{k&&k.end(1),y=$(e,ct,{delay:dl}),y.start()})),E=!0)},o(t){U(n.$$.fragment,t),y&&y.invalidate(),k=tt(e,ct,{delay:0,duration:fl}),E=!1},d(t){t&&g(e),vt(n),M&&M.d(),_&&_.d(),N&&N.d(),t&&k&&k.end(),L=!1,A()}}}const dl=200,fl=100,ml={SAFE:"rating:safe",UNSAFE:"rating:questionable",EXPLICIT:"rating:explicit"},pl=j(["","rating:safe","rating:questionable","rating:explicit"]);function vl(t,e=1500){function l(){const l=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),e),n=()=>{clearTimeout(l),t.removeEventListener("mousemove",n),t.removeEventListener("mouseup",n)};t.addEventListener("mousemove",n),t.addEventListener("mouseup",n)}function n(){const l=setTimeout((()=>{t.dispatchEvent(new CustomEvent("longpress"))}),e),n=()=>{clearTimeout(l),t.removeEventListener("touchmove",n),t.removeEventListener("touchend",n)};t.addEventListener("touchmove",n),t.addEventListener("touchend",n)}return t.addEventListener("mousedown",l),t.addEventListener("touchstart",n),{destroy(){t.removeEventListener("mousedown",l),t.removeEventListener("touchstart",n)}}}function gl(t){function e(t){return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1}return t.addEventListener("oncontextmenu",e),{destroy(){t.removeEventListener("oncontextmenu",e)}}}function xl(t,e){return t.classList.toggle("active-button",e),{update(e){t.classList.toggle("active-button",e)}}}function hl(t,e,l){let n,s,i,o,r;h(t,se,(t=>l(3,n=t))),h(t,he,(t=>l(6,o=t))),h(t,ne,(t=>l(22,r=t)));const{tags:c}=ie;h(t,c,(t=>l(4,s=t)));const a=Y(),u=re("nsfw");h(t,u,(t=>l(5,i=t)));var d=null,f=null,m=pl(r),p="";function v(t){l(2,p=p!==t?t:"")}function g(t){ht(t,m)||l(1,m=I(t,m))}function x(t){ht(t,s)&&gt(c,s=j([t],s),s)}var y=null;function w(){const t=C(bt(" ",d.value));clearTimeout(f),dt(t)||y===t||(gt(se,n=[],n),y=t,l(0,f=setTimeout((()=>async function(t){const e=xe[z($e)],[l,n]=await e.fetchTags(t);return se.set(F(10,n)),l}(t)),1e3)))}b((()=>{gt(se,n=[],n),(d=document.querySelector(".svelte-tags-input")).addEventListener("input",w),d.focus()})),xt((()=>{clearTimeout(f),gt(se,n=[],n),d.removeEventListener("input",w)}));return[f,m,p,n,s,i,o,c,u,v,async function(){if(o)return;const t=p?null==ml?void 0:ml[p]:"";a("search",[...m,i?t:"rating:safe"])},g,x,w,async t=>{clearTimeout(f),await yt(),l(1,m=wt(1,m)),g(t),gt(se,n=[],n)},t=>x(t),t=>g(t),()=>v("SAFE"),()=>v("UNSAFE"),()=>v("EXPLICIT")]}class bl extends r{constructor(t){super(),c(this,t,hl,ul,a,{})}}const yl={tags:E("favorites:tags",[]),images:E("favorites:images",[]),bookmarks:E("bookmarks",[])};function wl(t){const e=z(yl.tags);let l=e;l=q(M(t),e)?j([t],l):I(t,l),yl.tags.set(l)}function $l(t){const e=z(yl.images);let l=e;const n=T(null,q(Et("id",t.id),e));l=n?j([n],l):I(t,l),yl.images.set(l)}yl.tags.subscribe((t=>ie.tags.set(t))),yl.images.subscribe((t=>ie.images.set(t))),yl.bookmarks.subscribe((t=>ie.bookmarks.set($t(t,kt((t=>E("bookmarks:"+t,[])),t)))));function kl(t,e,l){const n=t.slice();return n[25]=e[l],n}function El(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Ll(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-3xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Al(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-4xl md:text-5xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Tl(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function zl(t){let e,l,n,s,i,o,r=t[8]?"":"Add";function c(){return t[22](t[25])}return{c(){e=u("button"),l=Q(r),n=d(),s=u("i"),f(s,"class","ri-add-line text-4xl md:text-5xl"),f(e,"class","icon-button svelte-1pzovkq")},m(t,r){m(t,e,r),B(e,l),B(e,n),B(e,s),i||(o=W(e,"click",c),i=!0)},p(e,n){t=e,256&n&&r!==(r=t[8]?"":"Add")&&V(l,r)},d(t){t&&g(e),i=!1,o()}}}function Sl(t){let e,l,n,s,i,o,r=t[8]?"":"Remove";function c(){return t[21](t[25])}return{c(){e=u("button"),l=Q(r),n=d(),s=u("i"),f(s,"class","ri-subtract-line text-4xl md:text-5xl"),f(e,"class","icon-button svelte-1pzovkq")},m(t,r){m(t,e,r),B(e,l),B(e,n),B(e,s),i||(o=W(e,"click",c),i=!0)},p(e,n){t=e,256&n&&r!==(r=t[8]?"":"Remove")&&V(l,r)},d(t){t&&g(e),i=!1,o()}}}function Ml(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-4xl md:text-5xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function _l(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-fill text-4xl md:text-5xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Nl(t){let e,l,n,s,i,o,r,c,a,p,v,x=t[25]+"";function h(t,e){return(null==i||96&e)&&(i=!!t[5](t[25])),i?Sl:zl}let b=h(t,-1),y=b(t);function w(t,e){return(null==c||72&e)&&(c=!!t[3](t[25])),c?_l:Ml}let $=w(t,-1),k=$(t);function E(){return t[23](t[25])}return{c(){e=u("div"),l=u("p"),n=Q(x),s=d(),y.c(),o=d(),r=u("button"),k.c(),a=d(),f(l,"class","truncate flex-1 md:text-lg font-light svelte-1pzovkq"),f(r,"class","icon-button svelte-1pzovkq"),f(e,"class","p-4 flex flex-row rounded-lg items-center svelte-1pzovkq")},m(t,i){m(t,e,i),B(e,l),B(l,n),B(e,s),y.m(e,null),B(e,o),B(e,r),k.m(r,null),B(e,a),p||(v=W(r,"click",E),p=!0)},p(l,s){t=l,64&s&&x!==(x=t[25]+"")&&V(n,x),b===(b=h(t,s))&&y?y.p(t,s):(y.d(1),y=b(t),y&&(y.c(),y.m(e,o))),$!==($=w(t,s))&&(k.d(1),k=$(t),k&&(k.c(),k.m(r,null)))},d(t){t&&g(e),y.d(),k.d(),p=!1,v()}}}function Cl(t){let e,l,n;return{c(){e=u("button"),e.textContent="CLOSE",f(e,"id","close-button"),f(e,"class","tracking-wider svelte-1pzovkq")},m(s,i){m(s,e,i),l||(n=W(e,"click",t[24]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function Ol(t){var e;let l,n,s,i,o,r,c,a,p,x,h,b,y,w,$,k,E,L,A,T,z,S,M,_,N,C,O,q,I,j,F,P=(null==(e=t[1])?void 0:e.artist)+"";function H(t,e){return t[4]?Ll:El}let G=H(t),R=G(t);function U(t,e){var l;return(null==C||10&e)&&(C=!!t[3](null==(l=t[1])?void 0:l.artist)),C?Tl:Al}let D=U(t,-1),Y=D(t),X=t[6],K=[];for(let u=0;u<X.length;u+=1)K[u]=Nl(kl(t,X,u));let J=t[0]&&Cl(t);return{c(){var e,m,v;l=u("article"),n=u("div"),s=u("button"),R.c(),i=d(),o=u("a"),r=u("button"),c=u("i"),h=d(),b=u("button"),b.innerHTML='<i class="ri-file-copy-fill text-4xl"></i>',y=d(),w=u("a"),$=u("i"),E=d(),L=u("section"),A=u("div"),T=u("p"),T.textContent="Artist:",z=d(),S=u("p"),M=Q(P),_=d(),N=u("button"),Y.c(),O=d(),q=u("div");for(let t=0;t<K.length;t+=1)K[t].c();I=d(),J&&J.c(),f(s,"class","icon-button svelte-1pzovkq"),f(c,"class","ri-download-fill text-4xl cursor-pointer"),Lt(c,"ri-loader-4-line",t[2]),Lt(c,"animate-spin",t[2]),f(r,"class","icon-button svelte-1pzovkq"),f(o,"href",a=t[7]?null:null==(e=t[1])?void 0:e.file_url),f(o,"target",p=t[7]?null:"_blank"),f(o,"download",x=null==(m=t[1])?void 0:m.file_name),f(b,"class","icon-button svelte-1pzovkq"),f($,"class","ri-phone-find-line text-4xl"),f(w,"class","icon-button svelte-1pzovkq"),f(w,"href",k=null==(v=t[1])?void 0:v.source),f(w,"target","_blank"),f(n,"class","p-2 flex flex-row justify-between space-x-4 svelte-1pzovkq"),f(T,"class","text-lg"),f(S,"class","text-xl font-light"),f(A,"class","flex-1 flex flex-col"),f(N,"class","icon-button svelte-1pzovkq"),f(L,"class","p-4 flex flex-row svelte-1pzovkq"),f(q,"id","tags"),f(q,"class","flex flex-col svelte-1pzovkq"),f(l,"class","flex flex-col space-y-2 svelte-1pzovkq")},m(e,a){m(e,l,a),B(l,n),B(n,s),R.m(s,null),B(n,i),B(n,o),B(o,r),B(r,c),B(n,h),B(n,b),B(n,y),B(n,w),B(w,$),B(l,E),B(l,L),B(L,A),B(A,T),B(A,z),B(A,S),B(S,M),B(L,_),B(L,N),Y.m(N,null),B(l,O),B(l,q);for(let t=0;t<K.length;t+=1)K[t].m(q,null);B(l,I),J&&J.m(l,null),j||(F=[W(s,"click",t[19]),W(c,"click",t[14]),W(b,"click",t[15]),W(N,"click",t[20])],j=!0)},p(t,[e]){var n,i,r,u;if(G!==(G=H(t))&&(R.d(1),R=G(t),R&&(R.c(),R.m(s,null))),4&e&&Lt(c,"ri-loader-4-line",t[2]),4&e&&Lt(c,"animate-spin",t[2]),130&e&&a!==(a=t[7]?null:null==(n=t[1])?void 0:n.file_url)&&f(o,"href",a),128&e&&p!==(p=t[7]?null:"_blank")&&f(o,"target",p),2&e&&x!==(x=null==(i=t[1])?void 0:i.file_name)&&f(o,"download",x),2&e&&k!==(k=null==(r=t[1])?void 0:r.source)&&f(w,"href",k),2&e&&P!==(P=(null==(u=t[1])?void 0:u.artist)+"")&&V(M,P),D!==(D=U(t,e))&&(Y.d(1),Y=D(t),Y&&(Y.c(),Y.m(N,null))),360&e){let l;for(X=t[6],l=0;l<X.length;l+=1){const n=kl(t,X,l);K[l]?K[l].p(n,e):(K[l]=Nl(n),K[l].c(),K[l].m(q,null))}for(;l<K.length;l+=1)K[l].d(1);K.length=X.length}t[0]?J?J.p(t,e):(J=Cl(t),J.c(),J.m(l,null)):J&&(J.d(1),J=null)},i:v,o:v,d(t){t&&g(l),R.d(),Y.d(),st(K,t),J&&J.d(),j=!1,et(F)}}}function ql(t,e,l){let n,s,i,o,r,c,a,u,d,f;h(t,le,(t=>l(1,r=t))),h(t,ne,(t=>l(18,d=t)));const{tags:m,images:p}=ie;h(t,m,(t=>l(16,a=t))),h(t,p,(t=>l(17,u=t)));const{isMobile:v,isNative:g}=x("screen");h(t,v,(t=>l(8,f=t))),h(t,g,(t=>l(7,c=t)));const b=Y();let{closable:y=!1}=e;var w=!1;return t.$$set=t=>{"closable"in t&&l(0,y=t.closable)},t.$$.update=()=>{2&t.$$.dirty&&l(6,n=T([],null==r?void 0:r.tags)),262144&t.$$.dirty&&l(5,s=t=>ht(t,d)),131074&t.$$.dirty&&l(4,i=void 0!==q(Et("id",null==r?void 0:r.id),u)),65536&t.$$.dirty&&l(3,o=t=>ht(t,a))},[y,r,w,o,i,s,n,c,f,m,p,v,g,b,async function(){if(!c||w)return;l(2,w=!0);let t=await X.checkPermissions();if("granted"===t.publicStorage||(t=await X.requestPermissions(),"granted"===t.publicStorage)){try{await _.downloadFile({url:r.file_url,filePath:r.file_name,fileDirectory:"DOWNLOADS",method:"GET"})}catch(e){}l(2,w=!1)}else l(2,w=!1)},function(){At.write({url:null==r?void 0:r.file_url})},a,u,d,()=>$l(r),()=>wl(null==r?void 0:r.artist),t=>ke(t),t=>ke(t),t=>wl(t),()=>b("close")]}class Il extends r{constructor(t){super(),c(this,t,ql,Ol,a,{closable:0})}}function jl(t,e,l){const n=t.slice();return n[7]=e[l],n}function Fl(t){let e,l,n,s,i,o=t[7]+"";function r(){return t[3](t[7])}return{c(){e=u("button"),l=Q(o),n=d(),f(e,"class","svelte-1gaq04g")},m(t,o){m(t,e,o),B(e,l),B(e,n),s||(i=W(e,"click",r),s=!0)},p(e,n){t=e,1&n&&o!==(o=t[7]+"")&&V(l,o)},d(t){t&&g(e),s=!1,i()}}}function Pl(t){let e,l,n,s,i,o,r,c=t[0].length>0?"Add to bookmark":"No bookmarks",a=t[0],p=[];for(let u=0;u<a.length;u+=1)p[u]=Fl(jl(t,a,u));return{c(){e=u("article"),l=u("div");for(let t=0;t<p.length;t+=1)p[t].c();n=d(),s=u("p"),i=Q(c),f(l,"id","bookmarks"),f(l,"class","flex flex-row svelte-1gaq04g"),f(s,"class","text-xl text-white text-center"),f(e,"class","flex flex-col svelte-1gaq04g")},m(t,o){m(t,e,o),B(e,l);for(let e=0;e<p.length;e+=1)p[e].m(l,null);B(e,n),B(e,s),B(s,i)},p(t,[e]){if(5&e){let n;for(a=t[0],n=0;n<a.length;n+=1){const s=jl(t,a,n);p[n]?p[n].p(s,e):(p[n]=Fl(s),p[n].c(),p[n].m(l,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=a.length}1&e&&c!==(c=t[0].length>0?"Add to bookmark":"No bookmarks")&&V(i,c)},i(t){o||w((()=>{o=$(s,ct,{}),o.start()})),r||w((()=>{r=$(e,Tt,{}),r.start()}))},o:v,d(t){t&&g(e),st(p,t)}}}function Bl(t,e,l){let n,s,i;h(t,le,(t=>l(5,s=t))),h(t,oe,(t=>l(0,i=t)));const{bookmarks:o}=ie;h(t,o,(t=>l(4,n=t)));const r=Y();function c(t){const e=T([],null==n?void 0:n[t]);e.push(s),gt(o,n[t]=e,n),r("dismiss")}return[i,o,c,t=>c(t)]}class Hl extends r{constructor(t){super(),c(this,t,Bl,Pl,a,{})}}function Gl(t){let e,l,n,s,i,o,r,c,a,p,v,x,h,b,w;return{c(){e=u("div"),l=u("img"),s=d(),i=u("div"),r=d(),c=u("p"),a=Q(t[12]),p=Q("kB / "),v=Q(t[13]),x=Q("kB"),y(l.src,n=Ce(t[0]))||f(l,"src",n),f(l,"alt","current"),f(l,"class","svelte-1ated17"),Lt(l,"hidden",t[16]>1),f(i,"style",o=`transform: scale(${t[16]}) translate3d(${t[18]}px, ${t[17]}px, 0);`),f(i,"class","svelte-1ated17"),f(c,"id","progress"),f(c,"class","svelte-1ated17"),Lt(c,"hidden",!t[11]||t[12]==t[13]),f(e,"id","main-image"),f(e,"class","svelte-1ated17")},m(n,o){m(n,e,o),B(e,l),B(e,s),B(e,i),B(e,r),B(e,c),B(c,a),B(c,p),B(c,v),B(c,x),t[45](e),b||(w=J(h=Re.call(null,e,[t[0],!0])),b=!0)},p(t,e){1&e[0]&&!y(l.src,n=Ce(t[0]))&&f(l,"src",n),65536&e[0]&&Lt(l,"hidden",t[16]>1),458752&e[0]&&o!==(o=`transform: scale(${t[16]}) translate3d(${t[18]}px, ${t[17]}px, 0);`)&&f(i,"style",o),4096&e[0]&&V(a,t[12]),8192&e[0]&&V(v,t[13]),14336&e[0]&&Lt(c,"hidden",!t[11]||t[12]==t[13]),h&&Z(h.update)&&1&e[0]&&h.update.call(null,[t[0],!0])},d(l){l&&g(e),t[45](null),b=!1,w()}}}function Rl(t){let e,l=t[0],n=Yl(t);return{c(){n.c(),e=jt()},m(t,l){n.m(t,l),m(t,e,l)},p(t,s){1&s[0]&&a(l,l=t[0])?(n.d(1),n=Yl(t),n.c(),n.m(e.parentNode,e)):n.p(t,s)},d(t){t&&g(e),n.d(t)}}}function Ul(t){let e,l,n,s,i,o,r,c,a,p,v;return{c(){e=u("img"),s=d(),i=u("p"),o=Q(t[12]),r=Q("kB / "),c=Q(t[13]),a=Q("kB"),y(e.src,l=Ce(t[0]))||f(e,"src",l),f(e,"alt","current"),f(e,"class","svelte-1ated17"),f(i,"id","progress"),f(i,"class","svelte-1ated17"),Lt(i,"hidden",!t[11]||t[12]==t[13])},m(l,u){m(l,e,u),t[44](e),m(l,s,u),m(l,i,u),B(i,o),B(i,r),B(i,c),B(i,a),p||(v=J(n=Re.call(null,e,[t[0],!0])),p=!0)},p(t,s){1&s[0]&&!y(e.src,l=Ce(t[0]))&&f(e,"src",l),n&&Z(n.update)&&1&s[0]&&n.update.call(null,[t[0],!0]),4096&s[0]&&V(o,t[12]),8192&s[0]&&V(c,t[13]),14336&s[0]&&Lt(i,"hidden",!t[11]||t[12]==t[13])},d(l){l&&g(e),t[44](null),l&&g(s),l&&g(i),p=!1,v()}}}function Dl(t){let e,l,n,s,i,o,r,c,a,p,v,x,h,b,$,k,E,L,A,T,z,S,M=!1,_=Math.floor(t[10])+"",N=Math.floor(t[9])+"";function C(){cancelAnimationFrame(o),l.paused||(o=Ft(C),M=!0),t[41].call(l)}return{c(){e=u("div"),l=u("video"),n=u("track"),s=u("source"),r=d(),c=u("div"),a=u("button"),a.innerHTML='<i class="ri-play-line text-5xl"></i>',p=d(),v=u("button"),v.innerHTML='<i class="ri-skip-forward-line text-5xl"></i>',x=d(),h=u("button"),h.innerHTML='<i class="ri-skip-back-line text-5xl"></i>',b=d(),$=u("div"),k=d(),E=u("p"),L=Q(_),A=Q(" / "),T=Q(N),n.default=!0,f(n,"kind","captions"),y(s.src,i=Oe(t[0]))||f(s,"src",i),f(l,"class","relative h-screen bg-black"),f(l,"width",t[5]),f(l,"height",t[4]),l.loop=!0,void 0===t[9]&&w((()=>t[42].call(l))),f(a,"class","w-16 h-16 z-10"),f(v,"class","w-16 h-16 z-10"),f(h,"class","w-16 h-16 z-10"),f($,"class","flex-1"),f(E,"class","pb-2"),f(c,"id","video-buttons"),f(c,"class","fixed flex flex-row items-center pl-2 pr-4 z-10 svelte-1ated17")},m(i,o){m(i,e,o),B(e,l),B(l,n),B(l,s),t[40](l),B(e,r),B(e,c),B(c,a),B(c,p),B(c,v),B(c,x),B(c,h),B(c,b),B(c,$),B(c,k),B(c,E),B(E,L),B(E,A),B(E,T),z||(S=[J(en.call(null,l)),W(l,"timeupdate",C),W(l,"durationchange",t[42]),W(l,"click",t[43]),W(a,"click",t[30]),W(a,"touchend",t[30],{passive:!0}),W(v,"click",t[31]),W(v,"touchend",t[31],{passive:!0}),W(h,"click",t[32]),W(h,"touchend",t[32],{passive:!0})],z=!0)},p(t,e){1&e[0]&&!y(s.src,i=Oe(t[0]))&&f(s,"src",i),32&e[0]&&f(l,"width",t[5]),16&e[0]&&f(l,"height",t[4]),!M&&1024&e[0]&&!isNaN(t[10])&&(l.currentTime=t[10]),M=!1,1024&e[0]&&_!==(_=Math.floor(t[10])+"")&&V(L,_),512&e[0]&&N!==(N=Math.floor(t[9])+"")&&V(T,N)},d(l){l&&g(e),t[40](null),z=!1,et(S)}}}function Yl(t){let e;function l(t,e){var l;return(null==(l=t[19])?void 0:l[t[0].id])?Dl:Ul}let n=l(t),s=n(t);return{c(){s.c(),e=jt()},m(t,l){s.m(t,l),m(t,e,l)},p(t,i){n===(n=l(t))&&s?s.p(t,i):(s.d(1),s=n(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&g(e)}}}function Ql(t){let e,l,n;return l=new Hl({}),l.$on("dismiss",t[47]),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","bookmarks-menu"),f(e,"class","svelte-1ated17")},m(t,s){m(t,e,s),pt(l,e,null),n=!0},p:v,i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){U(l.$$.fragment,t),n=!1},d(t){t&&g(e),vt(l)}}}function Wl(t){let e,l,n,s,i,o,r,c,a,v,x,h,b,k,E,L,A;function T(t,e){var l;return(null==(l=t[0])?void 0:l.video)?Rl:Gl}let z=T(t),S=z(t),M=t[8]&&Ql(t);return b=new Il({props:{closable:!0}}),b.$on("close",t[48]),{c(){e=u("div"),l=u("div"),n=u("img"),i=d(),S.c(),o=d(),r=u("img"),v=d(),M&&M.c(),x=d(),h=u("div"),mt(b.$$.fragment),f(n,"class","invisible svelte-1ated17"),rt(n,"transform","translateX(-1px)"),y(n.src,s=Ce(t[6]))||f(n,"src",s),f(n,"alt","previous"),f(r,"class","invisible svelte-1ated17"),rt(r,"transform","translateX(1px)"),y(r.src,c=Ce(t[7]))||f(r,"src",c),f(r,"alt","next"),f(l,"id","carousel"),f(l,"class","flex flex-row w-[300vw] bg-black svelte-1ated17"),rt(l,"transform","translate("+(-t[5]+t[15])+"px,"+t[14]+"px)"),f(e,"class","fixed top-0 left-0"),f(h,"id","info-container"),f(h,"style",k=t[3]?"":`transform:translateY(${t[4]+1.75*t[14]}px`),f(h,"class","svelte-1ated17")},m(s,c){m(s,e,c),B(e,l),B(l,n),B(l,i),S.m(l,null),B(l,o),B(l,r),t[46](l),m(s,v,c),M&&M.m(s,c),m(s,x,c),m(s,h,c),pt(b,h,null),E=!0,L||(A=[J(tn.call(null,n)),J(tn.call(null,r)),J(t[29].call(null,e))],L=!0)},p(t,e){(!E||64&e[0]&&!y(n.src,s=Ce(t[6])))&&f(n,"src",s),z===(z=T(t))&&S?S.p(t,e):(S.d(1),S=z(t),S&&(S.c(),S.m(l,o))),(!E||128&e[0]&&!y(r.src,c=Ce(t[7])))&&f(r,"src",c),(!E||49184&e[0])&&rt(l,"transform","translate("+(-t[5]+t[15])+"px,"+t[14]+"px)"),t[8]?M?(M.p(t,e),256&e[0]&&p(M,1)):(M=Ql(t),M.c(),p(M,1),M.m(x.parentNode,x)):M&&(lt(),U(M,1,1,(()=>{M=null})),nt()),(!E||16408&e[0]&&k!==(k=t[3]?"":`transform:translateY(${t[4]+1.75*t[14]}px`))&&f(h,"style",k)},i(t){E||(a||w((()=>{a=$(e,St,{y:1e3}),a.start()})),p(M),p(b.$$.fragment,t),E=!0)},o(t){U(M),U(b.$$.fragment,t),E=!1},d(l){l&&g(e),S.d(),t[46](null),l&&g(v),M&&M.d(l),l&&g(x),l&&g(h),vt(b),L=!1,et(A)}}}const Vl=zt(M(0),(()=>null)),Xl=t=>t>200&&t<315,Kl=t=>t>120&&t<200,Jl=t=>t>0&&t<60||t>315&&t<=360,Zl=t=>t>60&&t<120;function tn(t){setTimeout((()=>{t.classList.remove("invisible")}),300)}function en(t){null==t||t.play()}function ln(t,e,l){let n,s,i,o,r,c,a,u,d,f,m,p,v,g,b,y,w,$,k;h(t,ee,(t=>l(38,w=t))),h(t,Ne,(t=>l(19,k=t)));const E=Y();let{image:A=null}=e;const{width:z,height:S}=x("screen");h(t,z,(t=>l(5,y=t))),h(t,S,(t=>l(4,b=t)));var N=null;const C=re("swipeDistance");h(t,C,(t=>l(39,$=t)));var q=null,I=null,j=null,F=!1,P=!1;const B=L(!1);h(t,B,(t=>l(56,m=t)));const H=L(null);h(t,H,(t=>l(37,f=t)));const G=Ot(0,{duration:50});h(t,G,(t=>l(36,d=t)));const R=L(1);h(t,R,(t=>l(16,p=t)));const U=L(0);h(t,U,(t=>l(18,g=t)));const D=L(0);function Q(){m&&(gt(B,m=!1,m),gt(G,d=0,d)),d>n&&("DOWN"===f&&gt(G,d=0,d),"UP"===f&&(gt(G,d=0,d),l(3,F=!0)),"LEFT"===f&&E("imagechange",j),"RIGHT"===f&&E("imagechange",I),E("swipe",f)),gt(H,f=null,f),gt(G,d=0,d)}h(t,D,(t=>l(17,v=t)));var W=null;function V(t,e,n){if(W&&t)if(n)W.unbind(e,"pan");else{var i=10,o=null,c=null,a=null;W.bind(e,"pan",u),W.bind(e,new qt.Pan({numInputs:2}),u),window.addEventListener("touchend",Q)}function u(t){if(l(8,P=!1),function(t){var e;if(!(null==A?void 0:A.video))if(O(null==(e=t.detail)?void 0:e.events)>=2){const e=t.detail.data[0].distanceFromOrigin,l=t.detail.data[1].distanceFromOrigin,n=t.detail.data[0].directionFromOrigin,s=t.detail.data[1].directionFromOrigin;let r=[n,s];t.detail.events[0].clientY>t.detail.events[1].clientY&&(r=[s,n]);const c=Math.max(e,l);c>i&&(Xl(r[0])&&Zl(r[1])?(gt(R,p=Math.max(1,p-.05),p),p<=1&&(gt(U,g=0,g),gt(D,v=0,v))):gt(R,p=Math.min(3,p+.05),p),i=c,clearTimeout(o),o=setTimeout((()=>{i=10}),100))}else{if(p<=1)return;const e=t.detail.data[0].distanceFromOrigin,l=t.detail.data[0].directionFromOrigin;if(!c)return void(c=e);Kl(l)&&gt(U,g+=c-e,g),Jl(l)&&gt(U,g-=c-e,g),Zl(l)&&gt(D,v+=c-e,v),Xl(l)&&gt(D,v-=c-e,v),c=e,clearTimeout(a),a=setTimeout((()=>{c=null}),30)}}(t),p>1)return;if(function(t){const e=t.detail.data[0].directionFromOrigin,n=t.detail.data[0].distanceFromOrigin,s=t.detail.events[0].x,i=t.detail.events[0].y,[o,c]=r;s>o&&i<c&&gt(B,m=!0,m),Xl(e)&&n>150&&m&&l(8,P=!0)}(t),m)return;const e=t.detail.data[0].directionFromOrigin,n=t.detail.data[0].distanceFromOrigin;let u=null;Xl(e)?u="DOWN":Kl(e)?u="LEFT":Jl(e)?u="RIGHT":Zl(e)&&(u="UP"),u!==f?(gt(H,f=u,f),gt(G,d=0,d)):gt(G,d=n,d),n>s&&Q()}}var X=0,K=0;var J=!1,Z=null,tt=L(null);h(t,tt,(t=>l(55,a=t)));var et=0,lt=0;const nt=re("useSourceQuality");h(t,nt,(t=>l(35,u=t))),_.addListener("progress",(t=>{t.url===c(a)&&(l(12,et=Math.floor(t.bytes/1024)),l(13,lt=Math.floor(t.contentLength/1024)),clearTimeout(Z),Z=setTimeout((()=>{l(11,J=!1)}),2e3))})),xt((()=>{_.removeAllListeners()}));return t.$$set=t=>{"image"in t&&l(0,A=t.image)},t.$$.update=()=>{if(32&t.$$.dirty[0]|256&t.$$.dirty[1]&&(n=T(120,Vl(y*$))),32&t.$$.dirty[0]|256&t.$$.dirty[1]&&(s=T(450,Vl(y*$*3))),1&t.$$.dirty[0]|128&t.$$.dirty[1]){const t=Mt(M(A))(w);l(6,I=w[_t(t-1,0)]),l(7,j=w[Nt(t+1,O(w))])}var e;96&t.$$.dirty[1]&&l(15,i="RIGHT"===f?d:"LEFT"===f?-d:0),96&t.$$.dirty[1]&&l(14,o="DOWN"===f?d:"UP"===f?-d:0),48&t.$$.dirty[0]&&(r=[y-.25*y,.3*b]),14&t.$$.dirty[0]&&V(q,N,F),1&t.$$.dirty[0]|16&t.$$.dirty[1]&&(c=T(Ct(u?"file_url":"sample_url"),(null==A?void 0:A.video)?Ct("file_url"):null)),1&t.$$.dirty[0]&&(e=A,l(11,J=!0),clearTimeout(Z),l(12,et=0),l(13,lt=0),gt(tt,a=e,a))},[A,N,q,F,b,y,I,j,P,X,K,J,et,lt,o,i,p,v,g,k,z,S,C,B,H,G,R,U,D,function(t){if(t&&!W)return W=qt.Region(t),{destroy(){W.unbind(N,"pan"),window.removeEventListener("touchend",Q),W=null}}},function(){(null==A?void 0:A.video)&&void 0!==q.paused&&((null==q?void 0:q.paused)?null==q||q.play():null==q||q.pause())},function(){(null==A?void 0:A.video)&&(null==q||q.pause(),l(2,q.currentTime=Math.min((null==q?void 0:q.currentTime)+5,X),q),null==q||q.play())},function(){(null==A?void 0:A.video)&&(null==q||q.pause(),l(2,q.currentTime=Math.max((null==q?void 0:q.currentTime)-5,0),q),null==q||q.play())},tt,nt,u,d,f,w,$,function(t){It[t?"unshift":"push"]((()=>{l(2,q=t)}))},function(){K=this.currentTime,l(10,K)},function(){X=this.duration,l(9,X)},t=>q.play(),function(t){It[t?"unshift":"push"]((()=>{l(2,q=t)}))},function(t){It[t?"unshift":"push"]((()=>{l(2,q=t)}))},function(t){It[t?"unshift":"push"]((()=>{l(1,N=t)}))},()=>{l(8,P=!1)},()=>{l(3,F=!1)}]}class nn extends r{constructor(t){super(),c(this,t,ln,Wl,a,{image:0},null,[-1,-1])}}const{window:sn}=Pt;function on(t){let e,l,n,s,i,o;function r(t,e){return t[7]?cn:rn}let c=r(t),a=c(t);return{c(){e=u("button"),a.c(),f(e,"id","backend-button"),f(e,"class","svelte-1lu2xd3")},m(l,n){m(l,e,n),a.m(e,null),s=!0,i||(o=W(e,"click",t[25]),i=!0)},p(l,n){c===(c=r(t=l))&&a?a.p(t,n):(a.d(1),a=c(t),a&&(a.c(),a.m(e,null)))},i(t){s||(w((()=>{n&&n.end(1),l=$(e,ct,{delay:dl}),l.start()})),s=!0)},o(t){l&&l.invalidate(),n=tt(e,ct,{duration:fl}),s=!1},d(t){t&&g(e),a.d(),t&&n&&n.end(),i=!1,o()}}}function rn(t){let e;return{c(){e=Q(t[8])},m(t,l){m(t,e,l)},p(t,l){256&l[0]&&V(e,t[8])},d(t){t&&g(e)}}}function cn(t){let e;return{c(){e=u("i"),f(e,"class","ri-gallery-line text-3xl")},m(t,l){m(t,e,l)},p:v,d(t){t&&g(e)}}}function an(t){let e,l,n=t[1]&&on(t);return{c(){e=u("section"),n&&n.c(),f(e,"slot","left"),f(e,"class","flex-1 flex flex-row")},m(t,s){m(t,e,s),n&&n.m(e,null),l=!0},p(t,l){t[1]?n?(n.p(t,l),2&l[0]&&p(n,1)):(n=on(t),n.c(),p(n,1),n.m(e,null)):n&&(lt(),U(n,1,1,(()=>{n=null})),nt())},i(t){l||(p(n),l=!0)},o(t){U(n),l=!1},d(t){t&&g(e),n&&n.d()}}}function un(t){let e;return{c(){e=u("i"),f(e,"class","ri-settings-2-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function dn(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function fn(t){let e;return{c(){e=u("i"),f(e,"class","ri-search-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function mn(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function pn(t){let e,l,n,s,i,o,r,c;function a(t,e){return t[5]?dn:un}let p=a(t),v=p(t);function x(t,e){return t[1]?mn:fn}let h=x(t),b=h(t);return{c(){e=u("section"),l=u("div"),l.innerHTML='<i class="ri-bookmark-line text-3xl"></i>',n=d(),s=u("div"),v.c(),i=d(),o=u("div"),b.c(),f(l,"id","bookmarks-icon"),f(l,"class","svelte-1lu2xd3"),f(s,"id","settings-icon"),f(s,"class","svelte-1lu2xd3"),f(o,"id","search-icon"),f(o,"class","svelte-1lu2xd3"),f(e,"slot","right"),f(e,"class","flex flex-row space-x-2")},m(a,u){m(a,e,u),B(e,l),B(e,n),B(e,s),v.m(s,null),B(e,i),B(e,o),b.m(o,null),r||(c=[W(l,"click",t[24]),W(s,"click",t[17]),W(o,"click",t[18])],r=!0)},p(t,e){p!==(p=a(t))&&(v.d(1),v=p(t),v&&(v.c(),v.m(s,null))),h!==(h=x(t))&&(b.d(1),b=h(t),b&&(b.c(),b.m(o,null)))},d(t){t&&g(e),v.d(),b.d(),r=!1,et(c)}}}function vn(t){let e,l;return e=new Xe({props:{blur:t[1]||t[5]}}),e.$on("imageclick",t[26]),{c(){mt(e.$$.fragment)},m(t,n){pt(e,t,n),l=!0},p(t,l){const n={};34&l[0]&&(n.blur=t[1]||t[5]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){vt(e,t)}}}function gn(t){let e,l,n,s,i=t[4]&&vn(t);return{c(){e=u("article"),i&&i.c(),f(e,"class","flex-1 flex flex-col items-stretch svelte-1lu2xd3")},m(o,r){m(o,e,r),i&&i.m(e,null),l=!0,n||(s=J(t[20].call(null,e)),n=!0)},p(t,l){t[4]?i?(i.p(t,l),16&l[0]&&p(i,1)):(i=vn(t),i.c(),p(i,1),i.m(e,null)):i&&(lt(),U(i,1,1,(()=>{i=null})),nt())},i(t){l||(p(i),l=!0)},o(t){U(i),l=!1},d(t){t&&g(e),i&&i.d(),n=!1,s()}}}function xn(t){let e,l;return e=new nn({props:{image:t[0]}}),e.$on("imagechange",t[27]),e.$on("swipe",t[28]),{c(){mt(e.$$.fragment)},m(t,n){pt(e,t,n),l=!0},p(t,l){const n={};1&l[0]&&(n.image=t[0]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){vt(e,t)}}}function hn(t){let e;return{c(){e=u("p"),e.textContent="No more images...",f(e,"class","text-3xl text-center pb-2")},m(t,l){m(t,e,l)},p:v,d(t){t&&g(e)}}}function bn(t){let e,l,n;return{c(){e=u("button"),e.textContent="More",f(e,"id","more-button"),f(e,"class","mb-2 svelte-1lu2xd3")},m(s,i){m(s,e,i),l||(n=W(e,"click",t[29]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function yn(t){let e,l,n;return l=new ll({}),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","settings-menu"),f(e,"class","svelte-1lu2xd3")},m(t,s){m(t,e,s),pt(l,e,null),n=!0},i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){U(l.$$.fragment,t),n=!1},d(t){t&&g(e),vt(l)}}}function wn(t){let e,l,n;return l=new bl({}),l.$on("search",t[19]),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","search-menu"),f(e,"class","svelte-1lu2xd3")},m(t,s){m(t,e,s),pt(l,e,null),n=!0},p:v,i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){U(l.$$.fragment,t),n=!1},d(t){t&&g(e),vt(l)}}}function $n(t){let e,l,n;return{c(){e=u("button"),e.innerHTML='<i class="ri-arrow-up-line text-2xl text-black"></i>',f(e,"id","back-button"),f(e,"class","svelte-1lu2xd3")},m(s,i){m(s,e,i),l||(n=W(e,"click",t[30]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function kn(t){let e,l,n,s,i,o,r,c,u,f,x,h,b=t[9];e=new Me({props:{$$slots:{right:[pn],left:[an]},$$scope:{ctx:t}}});let y=gn(t),w=t[7]&&t[0]&&xn(t);function $(t,e){return!t[3]||t[0]||t[1]||t[5]||t[10]||!t[11]?((null==i||2603&e[0])&&(i=!(!t[3]||t[0]||t[1]||t[5]||t[11]||dt(t[9]))),i?hn:void 0):bn}let k=$(t,[-1,-1]),E=k&&k(t),L=t[5]&&yn(),A=t[1]&&wn(t),T=t[6]&&!t[0]&&!t[1]&&!t[5]&&$n(t);return{c(){mt(e.$$.fragment),l=d(),y.c(),n=d(),w&&w.c(),s=d(),E&&E.c(),o=d(),L&&L.c(),r=d(),A&&A.c(),c=d(),T&&T.c(),u=jt()},m(i,a){pt(e,i,a),m(i,l,a),y.m(i,a),m(i,n,a),w&&w.m(i,a),m(i,s,a),E&&E.m(i,a),m(i,o,a),L&&L.m(i,a),m(i,r,a),A&&A.m(i,a),m(i,c,a),T&&T.m(i,a),m(i,u,a),f=!0,x||(h=W(sn,"keyup",t[21]),x=!0)},p(t,l){const i={};418&l[0]|128&l[1]&&(i.$$scope={dirty:l,ctx:t}),e.$set(i),512&l[0]&&a(b,b=t[9])?(lt(),U(y,1,1,v),nt(),y=gn(t),y.c(),p(y),y.m(n.parentNode,n)):y.p(t,l),t[7]&&t[0]?w?(w.p(t,l),129&l[0]&&p(w,1)):(w=xn(t),w.c(),p(w,1),w.m(s.parentNode,s)):w&&(lt(),U(w,1,1,(()=>{w=null})),nt()),k===(k=$(t,l))&&E?E.p(t,l):(E&&E.d(1),E=k&&k(t),E&&(E.c(),E.m(o.parentNode,o))),t[5]?L?32&l[0]&&p(L,1):(L=yn(),L.c(),p(L,1),L.m(r.parentNode,r)):L&&(lt(),U(L,1,1,(()=>{L=null})),nt()),t[1]?A?(A.p(t,l),2&l[0]&&p(A,1)):(A=wn(t),A.c(),p(A,1),A.m(c.parentNode,c)):A&&(lt(),U(A,1,1,(()=>{A=null})),nt()),!t[6]||t[0]||t[1]||t[5]?T&&(T.d(1),T=null):T?T.p(t,l):(T=$n(t),T.c(),T.m(u.parentNode,u))},i(t){f||(p(e.$$.fragment,t),p(y),p(w),p(L),p(A),f=!0)},o(t){U(e.$$.fragment,t),U(y),U(w),U(L),U(A),f=!1},d(t){vt(e,t),t&&g(l),y.d(t),t&&g(n),w&&w.d(t),t&&g(s),E&&E.d(t),t&&g(o),L&&L.d(t),t&&g(r),A&&A.d(t),t&&g(c),T&&T.d(t),t&&g(u),x=!1,h()}}}const En=L(0);function Ln(t,e,l){let n,s,i,o,r,c,a,u,d,f,m=v;h(t,En,(t=>l(32,s=t))),h(t,ee,(t=>l(33,i=t))),h(t,le,(t=>l(34,c=t))),h(t,ne,(t=>l(9,u=t))),h(t,he,(t=>l(10,d=t))),h(t,ye,(t=>l(11,f=t))),t.$$.on_destroy.push((()=>m()));const{height:p,isMobile:g}=x("screen");h(t,p,(t=>l(23,r=t))),h(t,g,(t=>l(7,o=t)));const{navigate:b}=x("navigator"),y=re("backend");h(t,y,(t=>l(8,a=t)));var w=!1,$=null,k=0,E=c,L=!1,A=!0,T=!1,S=!1;function M(t){const e=A||S||T||O(i)>0;l(4,A=!1),l(1,S=!1),l(5,T=!1),setTimeout((()=>b(t)),200+(e?300:0))}function _(t){l(0,E=t),o||M("Image")}return t.$$.update=()=>{1&t.$$.dirty[0]&&gt(le,c=E,c),12582912&t.$$.dirty[0]&&l(6,n=k>r),3&t.$$.dirty[0]&&document.body.classList.toggle("noscroll",S||null!==E)},[E,S,$,L,A,T,n,o,a,u,d,f,p,g,y,M,_,function(){l(1,S=!1),setTimeout((()=>{l(5,T=!T)}),Ze)},function(){window.scrollTo(0,0),l(5,T=!1),setTimeout((()=>{l(1,S=!S)}),Ze)},async function(t){const e=t.detail;$.getScrollElement().scrollTop=0,gt(ee,i=[],i),await async function(t){return new Promise((e=>setTimeout(e,t)))}(210),await async function(t){if(z(he))return!1;const e=xe[z($e)];be.set(0),ye.set(!1),ee.set([]),he.set(!0);const[l,n]=await e.fetchImages(t,{page:z(be),limit:z(we)});return he.set(!1),ne.set(t),ee.set(n),O(n)>0&&ye.set(!0),l}(e)&&l(1,S=!1)},function(t){function e(){l(22,k=$.getScrollElement().scrollTop);const t=$.getScrollElement().scrollHeight;Math.abs(window.innerHeight-ue(6.5)+k-t)<ue(6)||t>0&&t<window.innerHeight?l(3,L=!0):l(3,L=!1),gt(En,s=k,s)}l(2,$=new Bt(t)),$.getScrollElement().scrollTop=s,$.getScrollElement().addEventListener("scroll",e),ee.subscribe((async()=>{$.recalculate(),await yt(),e()}))},function(t){"Escape"===t.key&&(S&&l(1,S=!1),T?l(5,T=!1):async function(){if(w)return;w=!0,gt(ee,i=[],i),l(5,T=!1),l(1,S=!1);const t=Math.max(200,T?200+Ze:0,S?200+fl:0);setTimeout((()=>M("Start")),t+10)}())},k,r,()=>M("Bookmarks"),()=>M("Backends"),t=>_(t.detail),t=>{const e=t.detail;l(0,E=e)},t=>{"DOWN"===t.detail&&l(0,E=null)},()=>{l(3,L=!1),async function(){if(!z(ye))return!1;if(z(he))return!1;const t=xe[z($e)];he.set(!0),be.update((t=>t+1));const[e,l]=await t.fetchImages(z(ne),{page:z(be),limit:z(we)});l&&(null==l?void 0:l.length)<1&&ye.set(!1),he.set(!1),ee.set([...z(ee),...l])}()},()=>{$.getScrollElement().scrollTo(0,0)}]}function An(t,e,l){const n=t.slice();return n[8]=e[l],n}function Tn(t){let e,l,n,s,i,o;function r(){return t[7](t[8])}return{c(){e=u("img"),f(e,"class","object-contain transform hover:scale-110 svelte-u94g43"),y(e.src,l=Ce(t[8]))||f(e,"src",l),f(e,"alt","adjacent")},m(l,c){m(l,e,c),i||(o=[J(n=Re.call(null,e,[t[8]])),J(s=Sn.call(null,e,t[8]===t[0])),W(e,"click",r)],i=!0)},p(i,o){t=i,2&o&&!y(e.src,l=Ce(t[8]))&&f(e,"src",l),n&&Z(n.update)&&2&o&&n.update.call(null,[t[8]]),s&&Z(s.update)&&3&o&&s.update.call(null,t[8]===t[0])},d(t){t&&g(e),i=!1,et(o)}}}function zn(t){let e,l=t[1],n=[];for(let s=0;s<l.length;s+=1)n[s]=Tn(An(t,l,s));return{c(){e=u("div");for(let t=0;t<n.length;t+=1)n[t].c();f(e,"id","images"),f(e,"class","flex flex-row lg:flex-col rounded-lg svelte-u94g43")},m(t,l){m(t,e,l);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(t,[s]){if(7&s){let i;for(l=t[1],i=0;i<l.length;i+=1){const o=An(t,l,i);n[i]?n[i].p(o,s):(n[i]=Tn(o),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},i:v,o:v,d(t){t&&g(e),st(n,t)}}}function Sn(t,e){return t.classList.toggle("active-queue-image",e),{update(e){t.classList.toggle("active-queue-image",e)}}}function Mn(t,e,l){let n,s,i,o;h(t,ee,(t=>l(5,s=t))),h(t,le,(t=>l(0,i=t)));const r=Y();var c=[];const{height:a}=x("screen");h(t,a,(t=>l(6,o=t)));return t.$$.update=()=>{if(64&t.$$.dirty&&l(4,n=o<1050?4:5),49&t.$$.dirty){const t=Mt(M(i))(s);let e=1,o=0,r=0;for(;e<s.length&&o+r<n&&(T(null,null==s?void 0:s[t+e])&&++r,o+r!==n);)T(null,null==s?void 0:s[t-e])&&++o,++e;r<=2&&(--o,++r);const a=_t(0,t-o),u=Nt(s.length,t+r);l(1,c=Ht(a,u,s))}},[i,c,r,a,n,s,o,t=>r("imagechange",t)]}class _n extends r{constructor(t){super(),c(this,t,Mn,zn,a,{})}}function Nn(t){let e,l,n,s,i,o,r,c,a,p,v,x=t[5]+1+"",h=t[2].length+"";return{c(){e=u("section"),l=u("button"),l.innerHTML='<i class="ri-arrow-left-s-line text-4xl md:text-5xl"></i>',n=d(),s=u("button"),s.innerHTML='<i class="ri-arrow-right-s-line text-4xl md:text-5xl"></i>',i=d(),o=u("p"),r=Q(x),c=Q(" / "),a=Q(h),f(l,"id","previous-image-button"),f(s,"id","next-image-button"),f(o,"id","index-indicator"),f(o,"class","ml-4 text-3xl text-center svelte-19526fs"),f(e,"slot","right"),f(e,"class","flex flex-row items-center")},m(u,d){m(u,e,d),B(e,l),B(e,n),B(e,s),B(e,i),B(e,o),B(o,r),B(o,c),B(o,a),p||(v=[W(l,"click",t[12]),W(s,"click",t[11])],p=!0)},p(t,e){32&e&&x!==(x=t[5]+1+"")&&V(r,x),4&e&&h!==(h=t[2].length+"")&&V(a,h)},d(t){t&&g(e),p=!1,et(v)}}}function Cn(t){let e,l,n,s,i,o,r,c,a;return{c(){var o,r,c;e=u("img"),f(e,"id","main-image"),f(e,"style",l=t[4]?"filter: blur(12px)":""),f(e,"width",n=null==(o=t[1])?void 0:o.width),f(e,"height",s=null==(r=t[1])?void 0:r.height),y(e.src,i=null==(c=t[1])?void 0:c.thumbnail_url)||f(e,"src",i),f(e,"alt","main"),f(e,"class","svelte-19526fs")},m(l,n){m(l,e,n),c||(a=J(o=Re.call(null,e,[t[1],!0])),c=!0)},p(t,r){var c,a,u;16&r&&l!==(l=t[4]?"filter: blur(12px)":"")&&f(e,"style",l),2&r&&n!==(n=null==(c=t[1])?void 0:c.width)&&f(e,"width",n),2&r&&s!==(s=null==(a=t[1])?void 0:a.height)&&f(e,"height",s),2&r&&!y(e.src,i=null==(u=t[1])?void 0:u.thumbnail_url)&&f(e,"src",i),o&&Z(o.update)&&2&r&&o.update.call(null,[t[1],!0])},i(t){r||w((()=>{r=$(e,ct,{}),r.start()}))},o:v,d(t){t&&g(e),c=!1,a()}}}function On(t){let e,l,n,s,i,o;return{c(){var r,c;e=u("video"),l=u("track"),n=u("source"),l.default=!0,f(l,"kind","captions"),y(n.src,s=Oe(t[1]))||f(n,"src",s),f(n,"type","video/webm"),f(e,"id","main-image"),f(e,"width",i=null==(r=t[1])?void 0:r.width),f(e,"height",o=null==(c=t[1])?void 0:c.height),e.controls=!0,f(e,"class","svelte-19526fs")},m(s,i){m(s,e,i),B(e,l),B(e,n),t[16](e)},p(t,l){var r,c;2&l&&!y(n.src,s=Oe(t[1]))&&f(n,"src",s),2&l&&i!==(i=null==(r=t[1])?void 0:r.width)&&f(e,"width",i),2&l&&o!==(o=null==(c=t[1])?void 0:c.height)&&f(e,"height",o)},i:v,o:v,d(l){l&&g(e),t[16](null)}}}function qn(t){let e,l,n,s;return l=new _n({}),l.$on("imagechange",t[17]),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","images-queue"),f(e,"class","svelte-19526fs")},m(t,n){m(t,e,n),pt(l,e,null),s=!0},p(e,l){t=e},i(t){s||(p(l.$$.fragment,t),w((()=>{n||(n=Gt(e,St,{delay:0,duration:Gn,y:300},!0)),n.run(1)})),s=!0)},o(t){U(l.$$.fragment,t),n||(n=Gt(e,St,{delay:0,duration:Gn,y:300},!1)),n.run(0),s=!1},d(t){t&&g(e),vt(l),t&&n&&n.end()}}}function In(t){let e,l,n,s,i;return l=new Il({}),{c(){e=u("div"),mt(l.$$.fragment),f(e,"id","image-info"),f(e,"class","svelte-19526fs")},m(t,n){m(t,e,n),pt(l,e,null),i=!0},p(t,e){},i(t){i||(p(l.$$.fragment,t),w((()=>{s&&s.end(1),n=$(e,St,{delay:Rn,duration:Un,y:1e3}),n.start()})),i=!0)},o(t){U(l.$$.fragment,t),n&&n.invalidate(),s=tt(e,St,{delay:0,duration:Un,y:1e3}),i=!1},d(t){t&&g(e),vt(l),t&&s&&s.end()}}}function jn(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Fn(t){let e;return{c(){e=u("i"),f(e,"class","ri-star-line text-3xl text-yellow-300")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Pn(t){let e;return{c(){e=u("i"),f(e,"class","ri-information-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Bn(t){let e;return{c(){e=u("i"),f(e,"class","ri-close-line text-3xl")},m(t,l){m(t,e,l)},d(t){t&&g(e)}}}function Hn(t){let e,l,n,s,i,o,r,c,a,v,x,h;function b(t,e){var l,n,s;return(null==(l=t[1])?void 0:l.video)&&(null==(s=t[7])?void 0:s[null==(n=t[1])?void 0:n.id])?On:Cn}e=new Me({props:{$$slots:{right:[Nn]},$$scope:{ctx:t}}}),e.$on("back",t[9]);let y=b(t),w=y(t),$=t[3]&&!t[4]&&qn(t),k=t[4]&&In();function E(t,e){return t[6]?Fn:jn}let L=E(t),A=L(t);function T(t,e){return t[4]?Bn:Pn}let z=T(t),S=z(t);return{c(){mt(e.$$.fragment),l=d(),n=u("main"),w.c(),s=d(),$&&$.c(),i=d(),k&&k.c(),o=d(),r=u("button"),A.c(),c=d(),a=u("button"),S.c(),f(r,"id","favorite-button"),f(r,"class","absolute bottom-0 left-0 ml-6 mb-6 py-6 px-8 rounded-3xl svelte-19526fs"),f(a,"id","info-button"),f(a,"class","absolute bottom-0 right-0 mr-6 mb-6 py-6 px-8 rounded-3xl svelte-19526fs"),f(n,"class","flex flex-col lg:flex-row px-4 overflow-hidden svelte-19526fs")},m(u,d){pt(e,u,d),m(u,l,d),m(u,n,d),w.m(n,null),B(n,s),$&&$.m(n,null),B(n,i),k&&k.m(n,null),B(n,o),B(n,r),A.m(r,null),B(n,c),B(n,a),S.m(a,null),v=!0,x||(h=[W(window,"keyup",t[13]),W(r,"click",t[18]),W(a,"click",t[19])],x=!0)},p(t,[l]){const c={};4194340&l&&(c.$$scope={dirty:l,ctx:t}),e.$set(c),y===(y=b(t))&&w?w.p(t,l):(w.d(1),w=y(t),w&&(w.c(),p(w,1),w.m(n,s))),t[3]&&!t[4]?$?($.p(t,l),24&l&&p($,1)):($=qn(t),$.c(),p($,1),$.m(n,i)):$&&(lt(),U($,1,1,(()=>{$=null})),nt()),t[4]?k?(k.p(t,l),16&l&&p(k,1)):(k=In(),k.c(),p(k,1),k.m(n,o)):k&&(lt(),U(k,1,1,(()=>{k=null})),nt()),L!==(L=E(t))&&(A.d(1),A=L(t),A&&(A.c(),A.m(r,null))),z!==(z=T(t))&&(S.d(1),S=z(t),S&&(S.c(),S.m(a,null)))},i(t){v||(p(e.$$.fragment,t),p(w),p($),p(k),v=!0)},o(t){U(e.$$.fragment,t),U($),U(k),v=!1},d(t){vt(e,t),t&&g(l),t&&g(n),w.d(),$&&$.d(),k&&k.d(),A.d(),S.d(),x=!1,et(h)}}}const Gn=200,Rn=300,Un=200;function Dn(t,e,l){let n,s,i,o,r,c,a;h(t,le,(t=>l(1,i=t))),h(t,ee,(t=>l(2,o=t))),h(t,Ne,(t=>l(7,a=t)));const{images:u}=ie;h(t,u,(t=>l(14,r=t)));const{navigate:d}=x("navigator");async function f(){l(4,v=!1),l(3,p=!1),setTimeout((()=>{gt(le,i=null,i),d("Gallery")}),Gn)}x("events");const{isMobile:m}=x("screen");h(t,m,(t=>l(15,c=t)));var p=!0,v=!1;function g(){gt(le,i=o[Nt(s+1,o.length-1)],i)}function b(){gt(le,i=o[_t(s-1,0)],i)}var y=null;return t.$$.update=()=>{32768&t.$$.dirty&&c&&f(),16386&t.$$.dirty&&l(6,n=void 0!==q(Et("id",null==i?void 0:i.id),r)),6&t.$$.dirty&&l(5,s=Mt(M(i))(o)),3&t.$$.dirty&&(null==i?void 0:i.video)&&(null==y||y.load())},[y,i,o,p,v,s,n,a,u,f,m,g,b,function(t){const e=t.key;"Escape"===e&&f(),"ArrowLeft"!==e&&"j"!==e||b(),"ArrowRight"!==e&&"k"!==e||g()," "===e&&g()},r,c,function(t){It[t?"unshift":"push"]((()=>{l(0,y=t)}))},t=>{gt(le,i=t.detail,i)},()=>$l(i),()=>{l(4,v=!v)}]}function Yn(t,e,l){const n=t.slice();return n[9]=e[l][0],n[10]=e[l][1],n}function Qn(t){let e,l,n,s,i,o,r,c,a,p,v,x,h,b,y,w,$,k,E,L,A=Vn(t[10],t[3])?"AVAILABLE":"UNAVAILABLE",T=t[9]+"",z=Vn(t[10],"web")?"✓":"✗",S=Vn(t[10],"native")?"✓":"✗";function M(){return t[6](t[9])}return{c(){e=u("button"),l=u("p"),n=Q(A),s=d(),i=u("p"),o=Q(T),r=d(),c=u("p"),c.textContent="Supported platforms:",a=d(),p=u("div"),v=u("p"),x=Q("WEB: "),h=Q(z),b=d(),y=u("p"),w=Q("NATIVE: "),$=Q(S),k=d(),f(l,"class","absolute top-0 right-0 pt-6 pr-6"),f(i,"class","pb-2 text-2xl"),Lt(i,"text-green-400",t[0]===t[9]),f(c,"class","text-lg"),f(p,"class","pt-1 flex flex-row space-x-4"),f(e,"data-supported",Vn(t[10],t[3])),f(e,"class","svelte-1vjqs3k")},m(t,u){m(t,e,u),B(e,l),B(l,n),B(e,s),B(e,i),B(i,o),B(e,r),B(e,c),B(e,a),B(e,p),B(p,v),B(v,x),B(v,h),B(p,b),B(p,y),B(y,w),B(y,$),B(e,k),E||(L=W(e,"click",M),E=!0)},p(e,l){t=e,1&l&&Lt(i,"text-green-400",t[0]===t[9])},d(t){t&&g(e),E=!1,L()}}}function Wn(t){let e,l,n,s,i,o,r;e=new Me({}),e.$on("back",t[4]);let c=Object.entries(xe),a=[];for(let u=0;u<c.length;u+=1)a[u]=Qn(Yn(t,c,u));return{c(){mt(e.$$.fragment),l=d(),n=u("main"),s=u("div");for(let t=0;t<a.length;t+=1)a[t].c();i=d(),o=u("button"),o.textContent="Help",f(s,"id","backends"),f(s,"class","flex flex-col space-y-2 svelte-1vjqs3k"),f(o,"class","text-2xl svelte-1vjqs3k"),f(n,"class","flex flex-col svelte-1vjqs3k")},m(t,c){pt(e,t,c),m(t,l,c),m(t,n,c),B(n,s);for(let e=0;e<a.length;e+=1)a[e].m(s,null);B(n,i),B(n,o),r=!0},p(t,[e]){if(41&e){let l;for(c=Object.entries(xe),l=0;l<c.length;l+=1){const n=Yn(t,c,l);a[l]?a[l].p(n,e):(a[l]=Qn(n),a[l].c(),a[l].m(s,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=c.length}},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){U(e.$$.fragment,t),r=!1},d(t){vt(e,t),t&&g(l),t&&g(n),st(a,t)}}}const Vn=(t,e)=>ht(e,T([],null==t?void 0:t.PLATFORMS));function Xn(t,e,l){let n,s;const{navigate:i}=x("navigator"),{isNative:o}=x("screen");h(t,o,(t=>l(7,n=t)));const r=re("backend");h(t,r,(t=>l(0,s=t)));function c(){i("Gallery")}function a(t){ce("backend",t),c()}return[s,o,r,n?"native":"web",c,a,t=>a(t)]}function Kn(t,e,l){const n=t.slice();return n[5]=e[l],n[22]=l,n}function Jn(t){let e,l,n;return{c(){e=u("button"),e.innerHTML='<i class="ri-add-line text-3xl"></i>',f(e,"slot","right"),f(e,"id","add-bookmark-button"),f(e,"class","svelte-sxugu4")},m(s,i){m(s,e,i),l||(n=W(e,"click",t[11]),l=!0)},p:v,d(t){t&&g(e),l=!1,n()}}}function Zn(t){let e,l,n,s,i,o,r,c;return{c(){e=u("div"),l=u("input"),n=d(),s=u("button"),s.innerHTML='<i class="ri-add-line px-4 py-8 text-3xl"></i>',f(l,"type","text"),f(l,"class","flex-1 svelte-sxugu4"),f(l,"placeholder","Bookmark name..."),f(e,"id","bookmark-menu"),f(e,"class","flex flex-row items-center svelte-sxugu4")},m(i,a){m(i,e,a),B(e,l),t[13](l),Rt(l,t[5]),B(e,n),B(e,s),o=!0,r||(c=[W(l,"input",t[14]),W(l,"keyup",t[15]),W(s,"click",t[10])],r=!0)},p(e,n){t=e,32&n&&l.value!==t[5]&&Rt(l,t[5])},i(t){o||(w((()=>{i||(i=Gt(e,Tt,{duration:ls+10},!0)),i.run(1)})),o=!0)},o(t){i||(i=Gt(e,Tt,{duration:ls+10},!1)),i.run(0),o=!1},d(l){l&&g(e),t[13](null),l&&i&&i.end(),r=!1,et(c)}}}function ts(t){var e;let l,n,s,i,o,r,c,a,p,x,h,b,y,k,E,L,A=t[5]+"",T=O((null==(e=t[3])?void 0:e[t[5]])||[])+"";function z(){return t[16](t[5])}return{c(){l=u("section"),n=u("div"),s=u("p"),i=Q(A),o=d(),r=u("p"),c=Q(T),a=d(),p=u("div"),x=u("div"),h=d(),b=u("button"),b.innerHTML='<i class="ri-arrow-right-line text-6xl"></i>',y=d(),f(s,"class","flex-1 text-3xl truncate"),f(r,"class","flex-2xl pr-1"),f(n,"class","flex flex-row items-center"),f(x,"class","flex-1"),f(p,"class","flex flex-row"),f(l,"class","svelte-sxugu4")},m(t,e){m(t,l,e),B(l,n),B(n,s),B(s,i),B(n,o),B(n,r),B(r,c),B(l,a),B(l,p),B(p,x),B(p,h),B(p,b),B(l,y),E||(L=W(b,"click",z),E=!0)},p(e,l){var n;t=e,4&l&&A!==(A=t[5]+"")&&V(i,A),12&l&&T!==(T=O((null==(n=t[3])?void 0:n[t[5]])||[])+"")&&V(c,T)},i(e){k||w((()=>{k=$(l,ct,{delay:250*t[22],duration:175}),k.start()}))},o:v,d(t){t&&g(l),E=!1,L()}}}function es(t){let e,l,n,s,i,o,r,c,a,v,x,h,b,y,w,$,k,E,L,A=O(t[4]||[])+"";e=new Me({props:{$$slots:{right:[Jn]},$$scope:{ctx:t}}}),e.$on("back",t[8]);let T=t[1]&&Zn(t),z=t[2],S=[];for(let u=0;u<z.length;u+=1)S[u]=ts(Kn(t,z,u));return{c(){mt(e.$$.fragment),l=d(),n=u("article"),s=u("section"),i=u("div"),o=u("p"),o.textContent="Favorites",r=d(),c=u("p"),a=Q(A),v=d(),x=u("div"),h=u("div"),b=d(),y=u("button"),y.innerHTML='<i class="ri-arrow-right-line text-6xl"></i>',w=d(),T&&T.c(),$=d();for(let t=0;t<S.length;t+=1)S[t].c();f(o,"class","flex-1 text-3xl truncate"),f(c,"class","text-2xl pr-1"),f(i,"class","flex flex-row items-center"),f(h,"class","flex-1"),f(x,"class","flex flex-row"),f(s,"class","svelte-sxugu4"),f(n,"class","flex flex-col space-y-2 svelte-sxugu4")},m(u,d){pt(e,u,d),m(u,l,d),m(u,n,d),B(n,s),B(s,i),B(i,o),B(i,r),B(i,c),B(c,a),B(s,v),B(s,x),B(x,h),B(x,b),B(x,y),B(n,w),T&&T.m(n,null),B(n,$);for(let t=0;t<S.length;t+=1)S[t].m(n,null);k=!0,E||(L=W(y,"click",t[12]),E=!0)},p(t,[l]){const s={};if(8388610&l&&(s.$$scope={dirty:l,ctx:t}),e.$set(s),(!k||16&l)&&A!==(A=O(t[4]||[])+"")&&V(a,A),t[1]?T?(T.p(t,l),2&l&&p(T,1)):(T=Zn(t),T.c(),p(T,1),T.m(n,$)):T&&(lt(),U(T,1,1,(()=>{T=null})),nt()),524&l){let e;for(z=t[2],e=0;e<z.length;e+=1){const s=Kn(t,z,e);S[e]?(S[e].p(s,l),p(S[e],1)):(S[e]=ts(s),S[e].c(),p(S[e],1),S[e].m(n,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=z.length}},i(t){if(!k){p(e.$$.fragment,t),p(T);for(let t=0;t<z.length;t+=1)p(S[t]);k=!0}},o(t){U(e.$$.fragment,t),U(T),k=!1},d(t){vt(e,t),t&&g(l),t&&g(n),T&&T.d(),st(S,t),E=!1,L()}}}const ls=300;function ns(t,e,l){let n,s,i,o,r,c;h(t,oe,(t=>l(2,n=t))),h(t,ye,(t=>l(17,s=t))),h(t,ne,(t=>l(18,i=t))),h(t,ee,(t=>l(19,o=t)));const{images:a,bookmarks:u}=ie;h(t,a,(t=>l(4,c=t))),h(t,u,(t=>l(3,r=t)));const{navigate:d}=x("navigator");var f=null,m=!1,p="";function v(t){let e=[];e="favorites"===t?c:T([],null==r?void 0:r[t]),gt(ee,o=e,o),gt(ne,i=[],i),gt(ye,s=!1,s),l(1,m=!1),setTimeout((()=>d("Gallery")),ls)}function g(){l(1,m=!1),p&&(n.push(p),oe.set(n),l(5,p=""))}return t.$$.update=()=>{3&t.$$.dirty&&m&&(null==f||f.focus())},[f,m,n,r,c,p,a,u,function(){l(1,m=!1),setTimeout((()=>d("Gallery")),ls)},v,g,()=>{l(1,m=!0)},()=>v("favorites"),function(t){It[t?"unshift":"push"]((()=>{l(0,f=t)}))},function(){p=this.value,l(5,p)},t=>"Enter"===t.key&&g(),t=>v(t)]}var ss={Start:{NAME:"Start",COMPONENT:class extends r{constructor(t){super(),c(this,t,Jt,Xt,a,{})}}},Gallery:{NAME:"Gallery",COMPONENT:class extends r{constructor(t){super(),c(this,t,Ln,kn,a,{},null,[-1,-1])}}},Image:{NAME:"Image",COMPONENT:class extends r{constructor(t){super(),c(this,t,Dn,Hn,a,{})}}},Backends:{NAME:"Backends",COMPONENT:class extends r{constructor(t){super(),c(this,t,Xn,Wn,a,{})}}},Bookmarks:{NAME:"Bookmarks",COMPONENT:class extends r{constructor(t){super(),c(this,t,ns,es,a,{})}}}};const is=L(null),os=L([]),rs=L({}),cs=L({}),as=L({});function us(t,e){if(z(is)){const e=Object.entries(z(rs)),l=Object.entries(z(as));for(const[t,s]of l)"function"==typeof s.clear&&s.clear();const n={};for(const[s,i]of e)n[s]=new ds(t,i);as.set(n)}e&&z(os).push("StartView");const l=z(cs);is.set(l[t])}class ds{constructor(t,e){this.view=t,this.emitter=e,this.listeners=[]}on(t,e){this.listeners.push([t,e]),this.emitter.on(t,e)}clear(){const t=this.listeners;for(const[e,l]of t)this.emitter.removeListener(e,l)}}function fs(t){var e;let l,n,s,i,o;w(t[6]);var r=null==(e=t[2])?void 0:e.COMPONENT;return r&&(n=new r({})),{c(){l=u("main"),n&&mt(n.$$.fragment),f(l,"class","relative flex flex-col svelte-ln6rb5")},m(e,r){m(e,l,r),n&&pt(n,l,null),s=!0,i||(o=W(window,"resize",t[6]),i=!0)},p(t,[e]){var s;if(r!==(r=null==(s=t[2])?void 0:s.COMPONENT)){if(n){lt();const t=n;U(t.$$.fragment,1,0,(()=>{vt(t,1)})),nt()}r?(n=new r({}),mt(n.$$.fragment),p(n.$$.fragment,1),pt(n,l,null)):n=null}},i(t){s||(n&&p(n.$$.fragment,t),s=!0)},o(t){n&&U(n.$$.fragment,t),s=!1},d(t){t&&g(l),n&&vt(n),i=!1,o()}}}function ms(t,e,l){let n,s,i,o;var r,c;h(t,is,(t=>l(2,o=t))),r=Yt,c=ss,rs.set(r),cs.set(c);const a=L(0);h(t,a,(t=>l(0,n=t)));const u=L(0);h(t,u,(t=>l(1,i=t)));const d=L(!1);h(t,d,(t=>l(7,s=t)));const f=L(!1);return Ut("screen",{width:a,height:u,isMobile:d,isNative:f}),Ut("navigator",{currentScreen:is,navigate:us}),Ut("events",as),b((async()=>{const t=await Dt.getInfo();"android"===(null==t?void 0:t.operatingSystem)&&f.set(!0),us("Start")})),t.$$.update=()=>{1&t.$$.dirty&&gt(d,s=n<768,s)},[n,i,o,a,u,d,function(){a.set(n=window.innerWidth),u.set(i=window.innerHeight)}]}new class extends r{constructor(t){super(),c(this,t,ms,fs,a,{})}}({target:document.getElementById("app")});
